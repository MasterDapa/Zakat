var Iu=Object.defineProperty,Au=Object.defineProperties;var Bu=Object.getOwnPropertyDescriptors;var Ma=Object.getOwnPropertySymbols;var ku=Object.prototype.hasOwnProperty,Ru=Object.prototype.propertyIsEnumerable;var Ka=(e,t,n)=>t in e?Iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ke=(e,t)=>{for(var n in t||(t={}))ku.call(t,n)&&Ka(e,n,t[n]);if(Ma)for(var n of Ma(t))Ru.call(t,n)&&Ka(e,n,t[n]);return e},qn=(e,t)=>Au(e,Bu(t));function Nu(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}function W(){}const Cr=e=>e;function Nt(e,t){for(const n in t)e[n]=t[n];return e}function Lu(e){return e&&typeof e=="object"&&typeof e.then=="function"}function ja(e){return e()}function za(){return Object.create(null)}function Ot(e){e.forEach(ja)}function Er(e){return typeof e=="function"}function Ce(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Gn;function vy(e,t){return Gn||(Gn=document.createElement("a")),Gn.href=t,e===Gn.href}function Du(e){return Object.keys(e).length===0}function Ha(e,...t){if(e==null)return W;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function qa(e,t,n){e.$$.on_destroy.push(Ha(t,n))}function Uu(e,t,n,r){if(e){const i=Ga(e,t,n,r);return e[0](i)}}function Ga(e,t,n,r){return e[1]&&r?Nt(n.ctx.slice(),e[1](r(t))):n.ctx}function Ou(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],a=Math.max(t.dirty.length,i.length);for(let o=0;o<a;o+=1)s[o]=t.dirty[o]|i[o];return s}return t.dirty|i}return t.dirty}function Pu(e,t,n,r,i,s){if(i){const a=Ga(t,n,r,s);e.p(a,i)}}function Vu(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Yi(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Wa(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function yy(e){const t={};for(const n in e)t[n]=!0;return t}function Qa(e){return e==null?"":e}function my(e,t,n){return e.set(n),t}function Cy(e){return e&&Er(e.destroy)?e.destroy:W}const Ya=typeof window!="undefined";let gn=Ya?()=>window.performance.now():()=>Date.now(),Xi=Ya?e=>requestAnimationFrame(e):W;const jr=new Set;function Xa(e){jr.forEach(t=>{t.c(e)||(jr.delete(t),t.f())}),jr.size!==0&&Xi(Xa)}function vn(e){let t;return jr.size===0&&Xi(Xa),{promise:new Promise(n=>{jr.add(t={c:e,f:n})}),abort(){jr.delete(t)}}}let Wn=!1;function Fu(){Wn=!0}function Mu(){Wn=!1}function Ku(e,t,n,r){for(;e<t;){const i=e+(t-e>>1);n(i)<=r?e=i+1:t=i}return e}function ju(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if(e.nodeName==="HEAD"){const l=[];for(let u=0;u<t.length;u++){const c=t[u];c.claim_order!==void 0&&l.push(c)}t=l}const n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;let i=0;for(let l=0;l<t.length;l++){const u=t[l].claim_order,c=(i>0&&t[n[i]].claim_order<=u?i+1:Ku(1,i,h=>t[n[h]].claim_order,u))-1;r[l]=n[c]+1;const f=c+1;n[f]=l,i=Math.max(f,i)}const s=[],a=[];let o=t.length-1;for(let l=n[i]+1;l!=0;l=r[l-1]){for(s.push(t[l-1]);o>=l;o--)a.push(t[o]);o--}for(;o>=0;o--)a.push(t[o]);s.reverse(),a.sort((l,u)=>l.claim_order-u.claim_order);for(let l=0,u=0;l<a.length;l++){for(;u<s.length&&a[l].claim_order>=s[u].claim_order;)u++;const c=u<s.length?s[u]:null;e.insertBefore(a[l],c)}}function zu(e,t){e.appendChild(t)}function Ja(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Hu(e){const t=Yt("style");return qu(Ja(e),t),t}function qu(e,t){zu(e.head||e,t)}function X(e,t){if(Wn){for(ju(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(t.claim_order!==void 0||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||t.nextSibling!==null)&&e.appendChild(t)}function Gu(e,t,n){e.insertBefore(t,n||null)}function pe(e,t,n){Wn&&!n?X(e,t):(t.parentNode!==e||t.nextSibling!=n)&&e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function Wu(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Yt(e){return document.createElement(e)}function F(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ji(e){return document.createTextNode(e)}function Zi(){return Ji(" ")}function zr(){return Ji("")}function Qn(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Ey(e){return function(t){return t.preventDefault(),e.call(this,t)}}function xy(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Hr(e,t){for(const n in t)d(e,n,t[n])}function _y(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function P(e){return Array.from(e.childNodes)}function Za(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function $a(e,t,n,r,i=!1){Za(e);const s=(()=>{for(let a=e.claim_info.last_index;a<e.length;a++){const o=e[a];if(t(o)){const l=n(o);return l===void 0?e.splice(a,1):e[a]=l,i||(e.claim_info.last_index=a),o}}for(let a=e.claim_info.last_index-1;a>=0;a--){const o=e[a];if(t(o)){const l=n(o);return l===void 0?e.splice(a,1):e[a]=l,i?l===void 0&&e.claim_info.last_index--:e.claim_info.last_index=a,o}}return r()})();return s.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,s}function eo(e,t,n,r){return $a(e,i=>i.nodeName===t,i=>{const s=[];for(let a=0;a<i.attributes.length;a++){const o=i.attributes[a];n[o.name]||s.push(o.name)}s.forEach(a=>i.removeAttribute(a))},()=>r(t))}function qr(e,t,n){return eo(e,t,n,Yt)}function M(e,t,n){return eo(e,t,n,F)}function Qu(e,t){return $a(e,n=>n.nodeType===3,n=>{const r=""+t;if(n.data.startsWith(r)){if(n.data.length!==r.length)return n.splitText(r.length)}else n.data=r},()=>Ji(t),!0)}function $i(e){return Qu(e," ")}function to(e,t,n){for(let r=n;r<e.length;r+=1){const i=e[r];if(i.nodeType===8&&i.textContent.trim()===t)return r}return e.length}function Yu(e){const t=to(e,"HTML_TAG_START",0),n=to(e,"HTML_TAG_END",t);if(t===n)return new es;Za(e);const r=e.splice(t,n+1);k(r[0]),k(r[r.length-1]);const i=r.slice(1,r.length-1);for(const s of i)s.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1;return new es(i)}function by(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Sy(e,t){e.value=t==null?"":t}function Ty(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function Yn(e,t,n){e.classList[n?"add":"remove"](t)}function ro(e,t,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,!1,t),r}function wy(e,t=document.body){return Array.from(t.querySelectorAll(e))}class Xu{constructor(){this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.e=Yt(n.nodeName),this.t=n,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)Gu(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(k)}}class es extends Xu{constructor(t){super();this.e=this.n=null,this.l=t}c(t){this.l?this.n=this.l:super.c(t)}i(t){for(let n=0;n<this.n.length;n+=1)pe(this.t,this.n[n],t)}}const ts=new Set;let Xn=0;function Ju(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function yn(e,t,n,r,i,s,a,o=0){const l=16.666/r;let u=`{
`;for(let E=0;E<=1;E+=l){const _=t+(n-t)*s(E);u+=E*100+`%{${a(_,1-_)}}
`}const c=u+`100% {${a(n,1-n)}}
}`,f=`__svelte_${Ju(c)}_${o}`,h=Ja(e);ts.add(h);const m=h.__svelte_stylesheet||(h.__svelte_stylesheet=Hu(e).sheet),p=h.__svelte_rules||(h.__svelte_rules={});p[f]||(p[f]=!0,m.insertRule(`@keyframes ${f} ${c}`,m.cssRules.length));const C=e.style.animation||"";return e.style.animation=`${C?`${C}, `:""}${f} ${r}ms linear ${i}ms 1 both`,Xn+=1,f}function mn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Xn-=i,Xn||Zu())}function Zu(){Xi(()=>{Xn||(ts.forEach(e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),ts.clear())})}function $u(e,t,n,r){if(!t)return W;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return W;const{delay:s=0,duration:a=300,easing:o=Cr,start:l=gn()+s,end:u=l+a,tick:c=W,css:f}=n(e,{from:t,to:i},r);let h=!0,m=!1,p;function C(){f&&(p=yn(e,0,1,a,s,o,f)),s||(m=!0)}function E(){f&&mn(e,p),h=!1}return vn(_=>{if(!m&&_>=l&&(m=!0),m&&_>=u&&(c(1,0),E()),!h)return!1;if(m){const I=_-l,T=0+1*o(I/a);c(T,1-T)}return!0}),C(),c(0,1),E}function ec(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,no(e,i)}}function no(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Cn;function Xt(e){Cn=e}function xr(){if(!Cn)throw new Error("Function called outside component initialization");return Cn}function Jn(e){xr().$$.on_mount.push(e)}function tc(e){xr().$$.after_update.push(e)}function io(e){xr().$$.on_destroy.push(e)}function so(){const e=xr();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const i=ro(t,n);r.slice().forEach(s=>{s.call(e,i)})}}}function Iy(e,t){xr().$$.context.set(e,t)}function Ay(e){return xr().$$.context.get(e)}function By(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const En=[],ao=[],Zn=[],rs=[],oo=Promise.resolve();let ns=!1;function lo(){ns||(ns=!0,oo.then(ss))}function rc(){return lo(),oo}function _r(e){Zn.push(e)}function ky(e){rs.push(e)}const is=new Set;let $n=0;function ss(){const e=Cn;do{for(;$n<En.length;){const t=En[$n];$n++,Xt(t),nc(t.$$)}for(Xt(null),En.length=0,$n=0;ao.length;)ao.pop()();for(let t=0;t<Zn.length;t+=1){const n=Zn[t];is.has(n)||(is.add(n),n())}Zn.length=0}while(En.length);for(;rs.length;)rs.pop()();ns=!1,is.clear(),Xt(e)}function nc(e){if(e.fragment!==null){e.update(),Ot(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_r)}}let xn;function as(){return xn||(xn=Promise.resolve(),xn.then(()=>{xn=null})),xn}function br(e,t,n){e.dispatchEvent(ro(`${t?"intro":"outro"}${n}`))}const ei=new Set;let Pt;function ti(){Pt={r:0,c:[],p:Pt}}function ri(){Pt.r||Ot(Pt.c),Pt=Pt.p}function Vt(e,t){e&&e.i&&(ei.delete(e),e.i(t))}function Jt(e,t,n,r){if(e&&e.o){if(ei.has(e))return;ei.add(e),Pt.c.push(()=>{ei.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const os={duration:0};function ic(e,t,n){let r=t(e,n),i=!1,s,a,o=0;function l(){s&&mn(e,s)}function u(){const{delay:f=0,duration:h=300,easing:m=Cr,tick:p=W,css:C}=r||os;C&&(s=yn(e,0,1,h,f,m,C,o++)),p(0,1);const E=gn()+f,_=E+h;a&&a.abort(),i=!0,_r(()=>br(e,!0,"start")),a=vn(I=>{if(i){if(I>=_)return p(1,0),br(e,!0,"end"),l(),i=!1;if(I>=E){const T=m((I-E)/h);p(T,1-T)}}return i})}let c=!1;return{start(){c||(c=!0,mn(e),Er(r)?(r=r(),as().then(u)):u())},invalidate(){c=!1},end(){i&&(l(),i=!1)}}}function sc(e,t,n){let r=t(e,n),i=!0,s;const a=Pt;a.r+=1;function o(){const{delay:l=0,duration:u=300,easing:c=Cr,tick:f=W,css:h}=r||os;h&&(s=yn(e,1,0,u,l,c,h));const m=gn()+l,p=m+u;_r(()=>br(e,!1,"start")),vn(C=>{if(i){if(C>=p)return f(0,1),br(e,!1,"end"),--a.r||Ot(a.c),!1;if(C>=m){const E=c((C-m)/u);f(1-E,E)}}return i})}return Er(r)?as().then(()=>{r=r(),o()}):o(),{end(l){l&&r.tick&&r.tick(1,0),i&&(s&&mn(e,s),i=!1)}}}function Ry(e,t,n,r){let i=t(e,n),s=r?0:1,a=null,o=null,l=null;function u(){l&&mn(e,l)}function c(h,m){const p=h.b-s;return m*=Math.abs(p),{a:s,b:h.b,d:p,duration:m,start:h.start,end:h.start+m,group:h.group}}function f(h){const{delay:m=0,duration:p=300,easing:C=Cr,tick:E=W,css:_}=i||os,I={start:gn()+m,b:h};h||(I.group=Pt,Pt.r+=1),a||o?o=I:(_&&(u(),l=yn(e,s,h,p,m,C,_)),h&&E(0,1),a=c(I,p),_r(()=>br(e,h,"start")),vn(T=>{if(o&&T>o.start&&(a=c(o,p),o=null,br(e,a.b,"start"),_&&(u(),l=yn(e,s,a.b,a.duration,0,C,i.css))),a){if(T>=a.end)E(s=a.b,1-s),br(e,a.b,"end"),o||(a.b?u():--a.group.r||Ot(a.group.c)),a=null;else if(T>=a.start){const N=T-a.start;s=a.a+a.d*C(N/a.duration),E(s,1-s)}}return!!(a||o)}))}return{run(h){Er(i)?as().then(()=>{i=i(),f(h)}):f(h)},end(){u(),a=o=null}}}function Ny(e,t){const n=t.token={};function r(i,s,a,o){if(t.token!==n)return;t.resolved=o;let l=t.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const u=i&&(t.current=i)(l);let c=!1;t.block&&(t.blocks?t.blocks.forEach((f,h)=>{h!==s&&f&&(ti(),Jt(f,1,1,()=>{t.blocks[h]===f&&(t.blocks[h]=null)}),ri())}):t.block.d(1),u.c(),Vt(u,1),u.m(t.mount(),t.anchor),c=!0),t.block=u,t.blocks&&(t.blocks[s]=u),c&&ss()}if(Lu(e)){const i=xr();if(e.then(s=>{Xt(i),r(t.then,1,t.value,s),Xt(null)},s=>{if(Xt(i),r(t.catch,2,t.error,s),Xt(null),!t.hasCatch)throw s}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function Ly(e,t,n){const r=t.slice(),{resolved:i}=e;e.current===e.then&&(r[e.value]=i),e.current===e.catch&&(r[e.error]=i),e.block.p(r,n)}const Dy=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function ac(e,t){Jt(e,1,1,()=>{t.delete(e.key)})}function oc(e,t){e.f(),ac(e,t)}function lc(e,t,n,r,i,s,a,o,l,u,c,f){let h=e.length,m=s.length,p=h;const C={};for(;p--;)C[e[p].key]=p;const E=[],_=new Map,I=new Map;for(p=m;p--;){const B=f(i,s,p),Y=n(B);let J=a.get(Y);J?r&&J.p(B,t):(J=u(Y,B),J.c()),_.set(Y,E[p]=J),Y in C&&I.set(Y,Math.abs(p-C[Y]))}const T=new Set,N=new Set;function O(B){Vt(B,1),B.m(o,c),a.set(B.key,B),c=B.first,m--}for(;h&&m;){const B=E[m-1],Y=e[h-1],J=B.key,se=Y.key;B===Y?(c=B.first,h--,m--):_.has(se)?!a.has(J)||T.has(J)?O(B):N.has(se)?h--:I.get(J)>I.get(se)?(N.add(J),O(B)):(T.add(se),h--):(l(Y,a),h--)}for(;h--;){const B=e[h];_.has(B.key)||l(B,a)}for(;m;)O(E[m-1]);return E}function ni(e,t){const n={},r={},i={$$scope:1};let s=e.length;for(;s--;){const a=e[s],o=t[s];if(o){for(const l in a)l in o||(r[l]=1);for(const l in o)i[l]||(n[l]=o[l],i[l]=1);e[s]=o}else for(const l in a)i[l]=1}for(const a in r)a in n||(n[a]=void 0);return n}function uc(e){return typeof e=="object"&&e!==null?e:{}}function Uy(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function ls(e){e&&e.c()}function uo(e,t){e&&e.l(t)}function ii(e,t,n,r){const{fragment:i,on_mount:s,on_destroy:a,after_update:o}=e.$$;i&&i.m(t,n),r||_r(()=>{const l=s.map(ja).filter(Er);a?a.push(...l):Ot(l),e.$$.on_mount=[]}),o.forEach(_r)}function si(e,t){const n=e.$$;n.fragment!==null&&(Ot(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function cc(e,t){e.$$.dirty[0]===-1&&(En.push(e),lo(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function xe(e,t,n,r,i,s,a,o=[-1]){const l=Cn;Xt(e);const u=e.$$={fragment:null,ctx:null,props:s,update:W,not_equal:i,bound:za(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:za(),dirty:o,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=n?n(e,t.props||{},(f,h,...m)=>{const p=m.length?m[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&cc(e,f)),h}):[],u.update(),c=!0,Ot(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){Fu();const f=P(t.target);u.fragment&&u.fragment.l(f),f.forEach(k)}else u.fragment&&u.fragment.c();t.intro&&Vt(e.$$.fragment),ii(e,t.target,t.anchor,t.customElement),Mu(),ss()}Xt(l)}class _e{$destroy(){si(this,1),this.$destroy=W}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Du(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Gr=[];function fc(e,t){return{subscribe:ai(e,t).subscribe}}function ai(e,t=W){let n;const r=new Set;function i(o){if(Ce(e,o)&&(e=o,n)){const l=!Gr.length;for(const u of r)u[1](),Gr.push(u,e);if(l){for(let u=0;u<Gr.length;u+=2)Gr[u][0](Gr[u+1]);Gr.length=0}}}function s(o){i(o(e))}function a(o,l=W){const u=[o,l];return r.add(u),r.size===1&&(n=t(i)||W),o(e),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Oy(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,s=t.length<2;return fc(n,a=>{let o=!1;const l=[];let u=0,c=W;const f=()=>{if(u)return;c();const m=t(r?l[0]:l,a);s?a(m):c=Er(m)?m:W},h=i.map((m,p)=>Ha(m,C=>{l[p]=C,u&=~(1<<p),o&&f()},()=>{u|=1<<p}));return o=!0,f(),function(){Ot(h),c()}})}function hc(e,t,n){let r=e.length;function i(){r=--r,r<1&&n()}t()?n():e.forEach(({type:s,url:a,options:o={async:!0,defer:!0}})=>{const l=s==="script",u=document.createElement(l?"script":"link");l?(u.src=a,u.async=o.async,u.defer=o.defer):(u.rel="stylesheet",u.href=a),u.onload=i,document.body.appendChild(u)})}const co=ai([]);function dc(){return Boolean(window.dataLayer).valueOf()&&Array.isArray(window.dataLayer)}function us(){window.dataLayer.push(arguments)}function pc(e,t,n){let{properties:r}=t,{configurations:i={}}=t,{enabled:s=!0}=t;Jn(()=>{!s||a()});function a(){const l=r[0];hc([{type:"script",url:`//www.googletagmanager.com/gtag/js?id=${l}`}],dc,o)}function o(){return window.dataLayer=window.dataLayer||[],us("js",new Date),r.forEach(l=>{us("config",l,i[l]||{})}),co.subscribe(l=>{let u=l.length&&l.shift();for(;u;){const{event:c,data:f}=u;us("event",c,f),u=l.shift()}})}return e.$$set=l=>{"properties"in l&&n(0,r=l.properties),"configurations"in l&&n(1,i=l.configurations),"enabled"in l&&n(2,s=l.enabled)},[r,i,s,a]}class Py extends _e{constructor(t){super();xe(this,t,pc,null,Ce,{properties:0,configurations:1,enabled:2,init:3})}get init(){return this.$$.ctx[3]}}function Vy(e,t){t.send_to||delete t.send_to,co.update(n=>[...n,{event:e,data:t}])}function gc(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("circle"),r=F("polyline"),i=F("line"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(o,"polyline",{points:!0}),P(r).forEach(k),i=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"cx","12"),d(n,"cy","12"),d(n,"r","10"),d(r,"points","12 8 8 12 12 16"),d(i,"x1","16"),d(i,"y1","12"),d(i,"x2","8"),d(i,"y2","12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-arrow-left-circle "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-arrow-left-circle "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function vc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Fy extends _e{constructor(t){super();xe(this,t,vc,gc,Ce,{size:0,strokeWidth:1,class:2})}}function yc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("line"),r=F("polyline"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(n).forEach(k),r=M(a,"polyline",{points:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"x1","19"),d(n,"y1","12"),d(n,"x2","5"),d(n,"y2","12"),d(r,"points","12 19 5 12 12 5"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-arrow-left "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-arrow-left "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function mc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class My extends _e{constructor(t){super();xe(this,t,mc,yc,Ce,{size:0,strokeWidth:1,class:2})}}function Cc(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("circle"),r=F("polyline"),i=F("line"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(o,"polyline",{points:!0}),P(r).forEach(k),i=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"cx","12"),d(n,"cy","12"),d(n,"r","10"),d(r,"points","12 16 16 12 12 8"),d(i,"x1","8"),d(i,"y1","12"),d(i,"x2","16"),d(i,"y2","12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-arrow-right-circle "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-arrow-right-circle "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function Ec(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Ky extends _e{constructor(t){super();xe(this,t,Ec,Cc,Ce,{size:0,strokeWidth:1,class:2})}}function xc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("path"),r=F("polyline"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"path",{d:!0}),P(n).forEach(k),r=M(a,"polyline",{points:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"d","M22 11.08V12a10 10 0 1 1-5.93-9.14"),d(r,"points","22 4 12 14.01 9 11.01"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-check-circle "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-check-circle "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function _c(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class jy extends _e{constructor(t){super();xe(this,t,_c,xc,Ce,{size:0,strokeWidth:1,class:2})}}function bc(e){let t,n,r;return{c(){t=F("svg"),n=F("polyline"),this.h()},l(i){t=M(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=P(t);n=M(s,"polyline",{points:!0}),P(n).forEach(k),s.forEach(k),this.h()},h(){d(n,"points","6 9 12 15 18 9"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",r="feather feather-chevron-down "+e[2])},m(i,s){pe(i,t,s),X(t,n)},p(i,[s]){s&1&&d(t,"width",i[0]),s&1&&d(t,"height",i[0]),s&2&&d(t,"stroke-width",i[1]),s&4&&r!==(r="feather feather-chevron-down "+i[2])&&d(t,"class",r)},i:W,o:W,d(i){i&&k(t)}}}function Sc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class zy extends _e{constructor(t){super();xe(this,t,Sc,bc,Ce,{size:0,strokeWidth:1,class:2})}}function Tc(e){let t,n,r;return{c(){t=F("svg"),n=F("polyline"),this.h()},l(i){t=M(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=P(t);n=M(s,"polyline",{points:!0}),P(n).forEach(k),s.forEach(k),this.h()},h(){d(n,"points","15 18 9 12 15 6"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",r="feather feather-chevron-left "+e[2])},m(i,s){pe(i,t,s),X(t,n)},p(i,[s]){s&1&&d(t,"width",i[0]),s&1&&d(t,"height",i[0]),s&2&&d(t,"stroke-width",i[1]),s&4&&r!==(r="feather feather-chevron-left "+i[2])&&d(t,"class",r)},i:W,o:W,d(i){i&&k(t)}}}function wc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Hy extends _e{constructor(t){super();xe(this,t,wc,Tc,Ce,{size:0,strokeWidth:1,class:2})}}function Ic(e){let t,n,r;return{c(){t=F("svg"),n=F("polyline"),this.h()},l(i){t=M(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=P(t);n=M(s,"polyline",{points:!0}),P(n).forEach(k),s.forEach(k),this.h()},h(){d(n,"points","9 18 15 12 9 6"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",r="feather feather-chevron-right "+e[2])},m(i,s){pe(i,t,s),X(t,n)},p(i,[s]){s&1&&d(t,"width",i[0]),s&1&&d(t,"height",i[0]),s&2&&d(t,"stroke-width",i[1]),s&4&&r!==(r="feather feather-chevron-right "+i[2])&&d(t,"class",r)},i:W,o:W,d(i){i&&k(t)}}}function Ac(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class qy extends _e{constructor(t){super();xe(this,t,Ac,Ic,Ce,{size:0,strokeWidth:1,class:2})}}function Bc(e){let t,n,r;return{c(){t=F("svg"),n=F("polyline"),this.h()},l(i){t=M(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=P(t);n=M(s,"polyline",{points:!0}),P(n).forEach(k),s.forEach(k),this.h()},h(){d(n,"points","18 15 12 9 6 15"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",r="feather feather-chevron-up "+e[2])},m(i,s){pe(i,t,s),X(t,n)},p(i,[s]){s&1&&d(t,"width",i[0]),s&1&&d(t,"height",i[0]),s&2&&d(t,"stroke-width",i[1]),s&4&&r!==(r="feather feather-chevron-up "+i[2])&&d(t,"class",r)},i:W,o:W,d(i){i&&k(t)}}}function kc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Gy extends _e{constructor(t){super();xe(this,t,kc,Bc,Ce,{size:0,strokeWidth:1,class:2})}}function Rc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("polyline"),r=F("polyline"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"polyline",{points:!0}),P(n).forEach(k),r=M(a,"polyline",{points:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"points","16 18 22 12 16 6"),d(r,"points","8 6 2 12 8 18"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-code "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-code "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function Nc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Wy extends _e{constructor(t){super();xe(this,t,Nc,Rc,Ce,{size:0,strokeWidth:1,class:2})}}function Lc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("rect"),r=F("line"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"rect",{x:!0,y:!0,width:!0,height:!0,rx:!0,ry:!0}),P(n).forEach(k),r=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"x","1"),d(n,"y","4"),d(n,"width","22"),d(n,"height","16"),d(n,"rx","2"),d(n,"ry","2"),d(r,"x1","1"),d(r,"y1","10"),d(r,"x2","23"),d(r,"y2","10"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-credit-card "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-credit-card "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function Dc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Qy extends _e{constructor(t){super();xe(this,t,Dc,Lc,Ce,{size:0,strokeWidth:1,class:2})}}function Uc(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("polyline"),r=F("line"),i=F("path"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"polyline",{points:!0}),P(n).forEach(k),r=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),i=M(o,"path",{d:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"points","8 17 12 21 16 17"),d(r,"x1","12"),d(r,"y1","12"),d(r,"x2","12"),d(r,"y2","21"),d(i,"d","M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-download-cloud "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-download-cloud "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function Oc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Yy extends _e{constructor(t){super();xe(this,t,Oc,Uc,Ce,{size:0,strokeWidth:1,class:2})}}function Pc(e){let t,n,r,i,s,a,o;return{c(){t=F("svg"),n=F("path"),r=F("polyline"),i=F("line"),s=F("line"),a=F("polyline"),this.h()},l(l){t=M(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var u=P(t);n=M(u,"path",{d:!0}),P(n).forEach(k),r=M(u,"polyline",{points:!0}),P(r).forEach(k),i=M(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(i).forEach(k),s=M(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(s).forEach(k),a=M(u,"polyline",{points:!0}),P(a).forEach(k),u.forEach(k),this.h()},h(){d(n,"d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"),d(r,"points","14 2 14 8 20 8"),d(i,"x1","16"),d(i,"y1","13"),d(i,"x2","8"),d(i,"y2","13"),d(s,"x1","16"),d(s,"y1","17"),d(s,"x2","8"),d(s,"y2","17"),d(a,"points","10 9 9 9 8 9"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",o="feather feather-file-text "+e[2])},m(l,u){pe(l,t,u),X(t,n),X(t,r),X(t,i),X(t,s),X(t,a)},p(l,[u]){u&1&&d(t,"width",l[0]),u&1&&d(t,"height",l[0]),u&2&&d(t,"stroke-width",l[1]),u&4&&o!==(o="feather feather-file-text "+l[2])&&d(t,"class",o)},i:W,o:W,d(l){l&&k(t)}}}function Vc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Xy extends _e{constructor(t){super();xe(this,t,Vc,Pc,Ce,{size:0,strokeWidth:1,class:2})}}function Fc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("path"),r=F("polyline"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"path",{d:!0}),P(n).forEach(k),r=M(a,"polyline",{points:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"d","M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"),d(r,"points","9 22 9 12 15 12 15 22"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-home "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-home "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function Mc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Jy extends _e{constructor(t){super();xe(this,t,Mc,Fc,Ce,{size:0,strokeWidth:1,class:2})}}function Kc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("path"),r=F("line"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"path",{d:!0}),P(n).forEach(k),r=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"d","M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"),d(r,"x1","8"),d(r,"y1","12"),d(r,"x2","16"),d(r,"y2","12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-link-2 "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-link-2 "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function jc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class Zy extends _e{constructor(t){super();xe(this,t,jc,Kc,Ce,{size:0,strokeWidth:1,class:2})}}function zc(e){let t,n,r,i,s,a,o,l,u,c;return{c(){t=F("svg"),n=F("line"),r=F("line"),i=F("line"),s=F("line"),a=F("line"),o=F("line"),l=F("line"),u=F("line"),this.h()},l(f){t=M(f,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var h=P(t);n=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(n).forEach(k),r=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),i=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(i).forEach(k),s=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(s).forEach(k),a=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(a).forEach(k),o=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(o).forEach(k),l=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(l).forEach(k),u=M(h,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(u).forEach(k),h.forEach(k),this.h()},h(){d(n,"x1","12"),d(n,"y1","2"),d(n,"x2","12"),d(n,"y2","6"),d(r,"x1","12"),d(r,"y1","18"),d(r,"x2","12"),d(r,"y2","22"),d(i,"x1","4.93"),d(i,"y1","4.93"),d(i,"x2","7.76"),d(i,"y2","7.76"),d(s,"x1","16.24"),d(s,"y1","16.24"),d(s,"x2","19.07"),d(s,"y2","19.07"),d(a,"x1","2"),d(a,"y1","12"),d(a,"x2","6"),d(a,"y2","12"),d(o,"x1","18"),d(o,"y1","12"),d(o,"x2","22"),d(o,"y2","12"),d(l,"x1","4.93"),d(l,"y1","19.07"),d(l,"x2","7.76"),d(l,"y2","16.24"),d(u,"x1","16.24"),d(u,"y1","7.76"),d(u,"x2","19.07"),d(u,"y2","4.93"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",c="feather feather-loader "+e[2])},m(f,h){pe(f,t,h),X(t,n),X(t,r),X(t,i),X(t,s),X(t,a),X(t,o),X(t,l),X(t,u)},p(f,[h]){h&1&&d(t,"width",f[0]),h&1&&d(t,"height",f[0]),h&2&&d(t,"stroke-width",f[1]),h&4&&c!==(c="feather feather-loader "+f[2])&&d(t,"class",c)},i:W,o:W,d(f){f&&k(t)}}}function Hc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class $y extends _e{constructor(t){super();xe(this,t,Hc,zc,Ce,{size:0,strokeWidth:1,class:2})}}function qc(e){let t,n,r;return{c(){t=F("svg"),n=F("line"),this.h()},l(i){t=M(i,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var s=P(t);n=M(s,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(n).forEach(k),s.forEach(k),this.h()},h(){d(n,"x1","5"),d(n,"y1","12"),d(n,"x2","19"),d(n,"y2","12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",r="feather feather-minus "+e[2])},m(i,s){pe(i,t,s),X(t,n)},p(i,[s]){s&1&&d(t,"width",i[0]),s&1&&d(t,"height",i[0]),s&2&&d(t,"stroke-width",i[1]),s&4&&r!==(r="feather feather-minus "+i[2])&&d(t,"class",r)},i:W,o:W,d(i){i&&k(t)}}}function Gc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class e1 extends _e{constructor(t){super();xe(this,t,Gc,qc,Ce,{size:0,strokeWidth:1,class:2})}}function Wc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("line"),r=F("line"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(n).forEach(k),r=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"x1","12"),d(n,"y1","5"),d(n,"x2","12"),d(n,"y2","19"),d(r,"x1","5"),d(r,"y1","12"),d(r,"x2","19"),d(r,"y2","12"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-plus "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-plus "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function Qc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class t1 extends _e{constructor(t){super();xe(this,t,Qc,Wc,Ce,{size:0,strokeWidth:1,class:2})}}function Yc(e){let t,n,r,i;return{c(){t=F("svg"),n=F("circle"),r=F("line"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"cx","11"),d(n,"cy","11"),d(n,"r","8"),d(r,"x1","21"),d(r,"y1","21"),d(r,"x2","16.65"),d(r,"y2","16.65"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-search "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-search "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function Xc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class r1 extends _e{constructor(t){super();xe(this,t,Xc,Yc,Ce,{size:0,strokeWidth:1,class:2})}}function Jc(e){let t,n,r,i,s,a,o;return{c(){t=F("svg"),n=F("circle"),r=F("circle"),i=F("circle"),s=F("line"),a=F("line"),this.h()},l(l){t=M(l,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var u=P(t);n=M(u,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(u,"circle",{cx:!0,cy:!0,r:!0}),P(r).forEach(k),i=M(u,"circle",{cx:!0,cy:!0,r:!0}),P(i).forEach(k),s=M(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(s).forEach(k),a=M(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(a).forEach(k),u.forEach(k),this.h()},h(){d(n,"cx","18"),d(n,"cy","5"),d(n,"r","3"),d(r,"cx","6"),d(r,"cy","12"),d(r,"r","3"),d(i,"cx","18"),d(i,"cy","19"),d(i,"r","3"),d(s,"x1","8.59"),d(s,"y1","13.51"),d(s,"x2","15.42"),d(s,"y2","17.49"),d(a,"x1","15.41"),d(a,"y1","6.51"),d(a,"x2","8.59"),d(a,"y2","10.49"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",o="feather feather-share-2 "+e[2])},m(l,u){pe(l,t,u),X(t,n),X(t,r),X(t,i),X(t,s),X(t,a)},p(l,[u]){u&1&&d(t,"width",l[0]),u&1&&d(t,"height",l[0]),u&2&&d(t,"stroke-width",l[1]),u&4&&o!==(o="feather feather-share-2 "+l[2])&&d(t,"class",o)},i:W,o:W,d(l){l&&k(t)}}}function Zc(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class n1 extends _e{constructor(t){super();xe(this,t,Zc,Jc,Ce,{size:0,strokeWidth:1,class:2})}}function $c(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("path"),r=F("line"),i=F("path"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"path",{d:!0}),P(n).forEach(k),r=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),i=M(o,"path",{d:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"d","M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"),d(r,"x1","3"),d(r,"y1","6"),d(r,"x2","21"),d(r,"y2","6"),d(i,"d","M16 10a4 4 0 0 1-8 0"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-shopping-bag "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-shopping-bag "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function ef(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class i1 extends _e{constructor(t){super();xe(this,t,ef,$c,Ce,{size:0,strokeWidth:1,class:2})}}function tf(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("circle"),r=F("circle"),i=F("path"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(o,"circle",{cx:!0,cy:!0,r:!0}),P(r).forEach(k),i=M(o,"path",{d:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"cx","9"),d(n,"cy","21"),d(n,"r","1"),d(r,"cx","20"),d(r,"cy","21"),d(r,"r","1"),d(i,"d","M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-shopping-cart "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-shopping-cart "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function rf(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class s1 extends _e{constructor(t){super();xe(this,t,rf,tf,Ce,{size:0,strokeWidth:1,class:2})}}function nf(e){let t,n,r,i;return{c(){t=F("svg"),n=F("path"),r=F("circle"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"path",{d:!0}),P(n).forEach(k),r=M(a,"circle",{cx:!0,cy:!0,r:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"),d(r,"cx","12"),d(r,"cy","7"),d(r,"r","4"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-user "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-user "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function sf(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class a1 extends _e{constructor(t){super();xe(this,t,sf,nf,Ce,{size:0,strokeWidth:1,class:2})}}function af(e){let t,n,r,i,s;return{c(){t=F("svg"),n=F("circle"),r=F("line"),i=F("line"),this.h()},l(a){t=M(a,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var o=P(t);n=M(o,"circle",{cx:!0,cy:!0,r:!0}),P(n).forEach(k),r=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),i=M(o,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(i).forEach(k),o.forEach(k),this.h()},h(){d(n,"cx","12"),d(n,"cy","12"),d(n,"r","10"),d(r,"x1","15"),d(r,"y1","9"),d(r,"x2","9"),d(r,"y2","15"),d(i,"x1","9"),d(i,"y1","9"),d(i,"x2","15"),d(i,"y2","15"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",s="feather feather-x-circle "+e[2])},m(a,o){pe(a,t,o),X(t,n),X(t,r),X(t,i)},p(a,[o]){o&1&&d(t,"width",a[0]),o&1&&d(t,"height",a[0]),o&2&&d(t,"stroke-width",a[1]),o&4&&s!==(s="feather feather-x-circle "+a[2])&&d(t,"class",s)},i:W,o:W,d(a){a&&k(t)}}}function of(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class o1 extends _e{constructor(t){super();xe(this,t,of,af,Ce,{size:0,strokeWidth:1,class:2})}}function lf(e){let t,n,r,i;return{c(){t=F("svg"),n=F("line"),r=F("line"),this.h()},l(s){t=M(s,"svg",{xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0,class:!0});var a=P(t);n=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(n).forEach(k),r=M(a,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),P(r).forEach(k),a.forEach(k),this.h()},h(){d(n,"x1","18"),d(n,"y1","6"),d(n,"x2","6"),d(n,"y2","18"),d(r,"x1","6"),d(r,"y1","6"),d(r,"x2","18"),d(r,"y2","18"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"width",e[0]),d(t,"height",e[0]),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke","currentColor"),d(t,"stroke-width",e[1]),d(t,"stroke-linecap","round"),d(t,"stroke-linejoin","round"),d(t,"class",i="feather feather-x "+e[2])},m(s,a){pe(s,t,a),X(t,n),X(t,r)},p(s,[a]){a&1&&d(t,"width",s[0]),a&1&&d(t,"height",s[0]),a&2&&d(t,"stroke-width",s[1]),a&4&&i!==(i="feather feather-x "+s[2])&&d(t,"class",i)},i:W,o:W,d(s){s&&k(t)}}}function uf(e,t,n){let{size:r="100%"}=t,{strokeWidth:i=2}=t,{class:s=""}=t;return r!=="100%"&&(r=r.slice(-1)==="x"?r.slice(0,r.length-1)+"em":parseInt(r)+"px"),e.$$set=a=>{"size"in a&&n(0,r=a.size),"strokeWidth"in a&&n(1,i=a.strokeWidth),"class"in a&&n(2,s=a.class)},[r,i,s]}class l1 extends _e{constructor(t){super();xe(this,t,uf,lf,Ce,{size:0,strokeWidth:1,class:2})}}function cs(e){const t=e-1;return t*t*t+1}function cf(e,{delay:t=0,duration:n=400,easing:r=Cr}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function ff(e,{delay:t=0,duration:n=400,easing:r=cs,x:i=0,y:s=0,opacity:a=0}={}){const o=getComputedStyle(e),l=+o.opacity,u=o.transform==="none"?"":o.transform,c=l*(1-a);return{delay:t,duration:n,easing:r,css:(f,h)=>`
			transform: ${u} translate(${(1-f)*i}px, ${(1-f)*s}px);
			opacity: ${l-c*h}`}}function u1(e,{delay:t=0,duration:n=400,easing:r=cs}={}){const i=getComputedStyle(e),s=+i.opacity,a=parseFloat(i.height),o=parseFloat(i.paddingTop),l=parseFloat(i.paddingBottom),u=parseFloat(i.marginTop),c=parseFloat(i.marginBottom),f=parseFloat(i.borderTopWidth),h=parseFloat(i.borderBottomWidth);return{delay:t,duration:n,easing:r,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*s};height: ${m*a}px;padding-top: ${m*o}px;padding-bottom: ${m*l}px;margin-top: ${m*u}px;margin-bottom: ${m*c}px;border-top-width: ${m*f}px;border-bottom-width: ${m*h}px;`}}var hf=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const df=e=>{let t;return e?t=e:typeof fetch=="undefined"?t=(...n)=>hf(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(function(){return oi})).fetch(...n)}):t=fetch,(...n)=>t(...n)};class fs extends Error{constructor(t,n="FunctionsError",r){super(t);super.name=n,this.context=r}}class pf extends fs{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gf extends fs{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class vf extends fs{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yf=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};class mf{constructor(t,{headers:n={},customFetch:r}={}){this.url=t,this.headers=n,this.fetch=df(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return yf(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:a}=n;let o={},l;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob!="undefined"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",l=a):typeof a=="string"?(o["Content-Type"]="text/plain",l=a):typeof FormData!="undefined"&&a instanceof FormData?l=a:(o["Content-Type"]="application/json",l=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:l}).catch(m=>{throw new pf(m)}),c=u.headers.get("x-relay-error");if(c&&c==="true")throw new gf(u);if(!u.ok)throw new vf(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),h;return f==="application/json"?h=yield u.json():f==="application/octet-stream"?h=yield u.blob():f==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var fo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Cf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ef(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var _n={exports:{}};(function(e,t){var n=typeof self!="undefined"?self:fo,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(a){var o={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(o.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(A){return A&&u.indexOf(Object.prototype.toString.call(A))>-1};function f(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(A))throw new TypeError("Invalid character in header field name");return A.toLowerCase()}function h(A){return typeof A!="string"&&(A=String(A)),A}function m(A){var L={next:function(){var Z=A.shift();return{done:Z===void 0,value:Z}}};return o.iterable&&(L[Symbol.iterator]=function(){return L}),L}function p(A){this.map={},A instanceof p?A.forEach(function(L,Z){this.append(Z,L)},this):Array.isArray(A)?A.forEach(function(L){this.append(L[0],L[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(L){this.append(L,A[L])},this)}p.prototype.append=function(A,L){A=f(A),L=h(L);var Z=this.map[A];this.map[A]=Z?Z+", "+L:L},p.prototype.delete=function(A){delete this.map[f(A)]},p.prototype.get=function(A){return A=f(A),this.has(A)?this.map[A]:null},p.prototype.has=function(A){return this.map.hasOwnProperty(f(A))},p.prototype.set=function(A,L){this.map[f(A)]=h(L)},p.prototype.forEach=function(A,L){for(var Z in this.map)this.map.hasOwnProperty(Z)&&A.call(L,this.map[Z],Z,this)},p.prototype.keys=function(){var A=[];return this.forEach(function(L,Z){A.push(Z)}),m(A)},p.prototype.values=function(){var A=[];return this.forEach(function(L){A.push(L)}),m(A)},p.prototype.entries=function(){var A=[];return this.forEach(function(L,Z){A.push([Z,L])}),m(A)},o.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function C(A){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}function E(A){return new Promise(function(L,Z){A.onload=function(){L(A.result)},A.onerror=function(){Z(A.error)}})}function _(A){var L=new FileReader,Z=E(L);return L.readAsArrayBuffer(A),Z}function I(A){var L=new FileReader,Z=E(L);return L.readAsText(A),Z}function T(A){for(var L=new Uint8Array(A),Z=new Array(L.length),q=0;q<L.length;q++)Z[q]=String.fromCharCode(L[q]);return Z.join("")}function N(A){if(A.slice)return A.slice(0);var L=new Uint8Array(A.byteLength);return L.set(new Uint8Array(A)),L.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(A){this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:o.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:o.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():o.arrayBuffer&&o.blob&&l(A)?(this._bodyArrayBuffer=N(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||c(A))?this._bodyArrayBuffer=N(A):this._bodyText=A=Object.prototype.toString.call(A):this._bodyText="",this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var A=C(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(_)}),this.text=function(){var A=C(this);if(A)return A;if(this._bodyBlob)return I(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(se)}),this.json=function(){return this.text().then(JSON.parse)},this}var B=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Y(A){var L=A.toUpperCase();return B.indexOf(L)>-1?L:A}function J(A,L){L=L||{};var Z=L.body;if(A instanceof J){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,L.headers||(this.headers=new p(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!Z&&A._bodyInit!=null&&(Z=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=L.credentials||this.credentials||"same-origin",(L.headers||!this.headers)&&(this.headers=new p(L.headers)),this.method=Y(L.method||this.method||"GET"),this.mode=L.mode||this.mode||null,this.signal=L.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Z)}J.prototype.clone=function(){return new J(this,{body:this._bodyInit})};function se(A){var L=new FormData;return A.trim().split("&").forEach(function(Z){if(Z){var q=Z.split("="),ke=q.shift().replace(/\+/g," "),ge=q.join("=").replace(/\+/g," ");L.append(decodeURIComponent(ke),decodeURIComponent(ge))}}),L}function ue(A){var L=new p,Z=A.replace(/\r?\n[\t ]+/g," ");return Z.split(/\r?\n/).forEach(function(q){var ke=q.split(":"),ge=ke.shift().trim();if(ge){var Re=ke.join(":").trim();L.append(ge,Re)}}),L}O.call(J.prototype);function le(A,L){L||(L={}),this.type="default",this.status=L.status===void 0?200:L.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in L?L.statusText:"OK",this.headers=new p(L.headers),this.url=L.url||"",this._initBody(A)}O.call(le.prototype),le.prototype.clone=function(){return new le(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},le.error=function(){var A=new le(null,{status:0,statusText:""});return A.type="error",A};var Be=[301,302,303,307,308];le.redirect=function(A,L){if(Be.indexOf(L)===-1)throw new RangeError("Invalid status code");return new le(null,{status:L,headers:{location:A}})},a.DOMException=s.DOMException;try{new a.DOMException}catch{a.DOMException=function(L,Z){this.message=L,this.name=Z;var q=Error(L);this.stack=q.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function qe(A,L){return new Promise(function(Z,q){var ke=new J(A,L);if(ke.signal&&ke.signal.aborted)return q(new a.DOMException("Aborted","AbortError"));var ge=new XMLHttpRequest;function Re(){ge.abort()}ge.onload=function(){var Te={status:ge.status,statusText:ge.statusText,headers:ue(ge.getAllResponseHeaders()||"")};Te.url="responseURL"in ge?ge.responseURL:Te.headers.get("X-Request-URL");var Ue="response"in ge?ge.response:ge.responseText;Z(new le(Ue,Te))},ge.onerror=function(){q(new TypeError("Network request failed"))},ge.ontimeout=function(){q(new TypeError("Network request failed"))},ge.onabort=function(){q(new a.DOMException("Aborted","AbortError"))},ge.open(ke.method,ke.url,!0),ke.credentials==="include"?ge.withCredentials=!0:ke.credentials==="omit"&&(ge.withCredentials=!1),"responseType"in ge&&o.blob&&(ge.responseType="blob"),ke.headers.forEach(function(Te,Ue){ge.setRequestHeader(Ue,Te)}),ke.signal&&(ke.signal.addEventListener("abort",Re),ge.onreadystatechange=function(){ge.readyState===4&&ke.signal.removeEventListener("abort",Re)}),ge.send(typeof ke._bodyInit=="undefined"?null:ke._bodyInit)})}return qe.polyfill=!0,s.fetch||(s.fetch=qe,s.Headers=p,s.Request=J,s.Response=le),a.Headers=p,a.Request=J,a.Response=le,a.fetch=qe,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;t=i.fetch,t.default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})(_n,_n.exports);var hs=Cf(_n.exports),oi=Object.freeze(Nu({__proto__:null,[Symbol.toStringTag]:"Module",default:hs},[_n.exports]));class xf{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch=="undefined"?this.fetch=hs:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let i=this.fetch(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,f=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const _=await s.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=_:c=JSON.parse(_))}const C=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),E=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");C&&E&&E.length>1&&(f=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,f=null,h=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const C=await s.text();try{u=JSON.parse(C),Array.isArray(u)&&s.status===404&&(c=[],u=null,h=200,m="OK")}catch{s.status===404&&C===""?(h=204,m="No Content"):u={message:C}}if(u&&this.isMaybeSingle&&((l=u==null?void 0:u.details)===null||l===void 0?void 0:l.includes("Results contain 0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw u}return{error:u,data:c,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,n)}}class _f extends xf{select(t){let n=!1;const r=(t!=null?t:"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:i}={}){const s=i?`${i}.order`:"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${a?`${a},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n}={}){const r=typeof n=="undefined"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,n,{foreignTable:r}={}){const i=typeof r=="undefined"?"offset":`${r}.offset`,s=typeof r=="undefined"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(s,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){const o=[t?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Wr extends _f{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=n.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}}class bf{constructor(t,{headers:n={},schema:r,fetch:i}){this.url=t,this.headers=n,this.schema=r,this.fetch=i}select(t,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const a=(t!=null?t:"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Wr({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Wr({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const l=t.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wr({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Wr({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Wr({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Sf="1.7.1",Tf={"X-Client-Info":`postgrest-js/${Sf}`};class wf{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},Tf),n),this.schema=r,this.fetch=i}from(t){const n=new URL(`${this.url}/${t}`);return new bf(n,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(t,n={},{head:r=!1,count:i}={}){let s;const a=new URL(`${this.url}/rpc/${t}`);let o;r?(s="HEAD",Object.entries(n).forEach(([u,c])=>{a.searchParams.append(u,`${c}`)})):(s="POST",o=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new Wr({method:s,url:a,headers:l,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}}const If="websocket",Af="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Bf=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],kf="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Rf=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Nf="1.0.34",Lf={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Df="https://github.com/theturtle32/WebSocket-Node",Uf={node:">=4.0.0"},Of={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Pf={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Vf={verbose:!1},Ff={test:"tape test/unit/*.js",gulp:"gulp"},Mf="index",Kf={lib:"./lib"},jf="lib/browser.js",zf="Apache-2.0";var Hf={name:If,description:Af,keywords:Bf,author:kf,contributors:Rf,version:Nf,repository:Lf,homepage:Df,engines:Uf,dependencies:Of,devDependencies:Pf,config:Vf,scripts:Ff,main:Mf,directories:Kf,browser:jf,license:zf},qf=Hf.version,Sr;if(typeof globalThis=="object")Sr=globalThis;else try{Sr=require("es5-ext/global")}catch{}finally{if(!Sr&&typeof window!="undefined"&&(Sr=window),!Sr)throw new Error("Could not determine global this")}var bn=Sr.WebSocket||Sr.MozWebSocket,Gf=qf;function ho(e,t){var n;return t?n=new bn(e,t):n=new bn(e),n}bn&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(ho,e,{get:function(){return bn[e]}})});var Wf={w3cwebsocket:bn?ho:null,version:Gf};const Qf="2.7.3",Yf={"X-Client-Info":`realtime-js/${Qf}`},Xf="1.0.0",po=1e4,Jf=1e3;var Sn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Sn||(Sn={}));var _t;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_t||(_t={}));var Lt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Lt||(Lt={}));var ds;(function(e){e.websocket="websocket"})(ds||(ds={}));var Tr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Tr||(Tr={}));class go{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Zf{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(t.slice(a,a+i));a=a+i;const l=r.decode(t.slice(a,a+s));a=a+s;const u=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class ps{constructor(t,n,r={},i=po){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var vo;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(vo||(vo={}));class Tn{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Tn.syncState(this.state,i,s,a),this.pendingDiffs.forEach(l=>{this.state=Tn.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Tn.syncDiff(this.state,i,s,a),o())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){const s=this.cloneDeep(t),a=this.transformState(n),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const f=s[u];if(f){const h=c.map(E=>E.presence_ref),m=f.map(E=>E.presence_ref),p=c.filter(E=>m.indexOf(E.presence_ref)<0),C=f.filter(E=>h.indexOf(E.presence_ref)<0);p.length>0&&(o[u]=p),C.length>0&&(l[u]=C)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},r,i)}static syncDiff(t,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(l),c.length>0){const f=t[o].map(m=>m.presence_ref),h=c.filter(m=>f.indexOf(m.presence_ref)<0);t[o].unshift(...h)}r(o,c,l)}),this.map(a,(o,l)=>{let u=t[o];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),t[o]=u,i(o,u,l),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const i=t[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var we;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(we||(we={}));const yo=(e,t,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,a)=>(s[a]=$f(a,e,t,i),s),{})},$f=(e,t,n,r)=>{const i=t.find(o=>o.name===e),s=i==null?void 0:i.type,a=n[e];return s&&!r.includes(s)?mo(s,a):gs(a)},mo=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return n0(t,n)}switch(e){case we.bool:return e0(t);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return t0(t);case we.json:case we.jsonb:return r0(t);case we.timestamp:return i0(t);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return gs(t);default:return gs(t)}},gs=e=>e,e0=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},t0=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},r0=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},n0=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>mo(t,o))}return e},i0=e=>typeof e=="string"?e.replace(" ","T"):e;var Co=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},Eo;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Eo||(Eo={}));var xo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"})(xo||(xo={}));var _o;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(_o||(_o={}));class vs{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=_t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new ps(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new go(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_t.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Tn(this)}subscribe(t,n=this.timeout){var r,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>t&&t("CHANNEL_ERROR",u)),this._onClose(()=>t&&t("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){t&&t("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,h=(c=f==null?void 0:f.length)!==null&&c!==void 0?c:0,m=[];for(let p=0;p<h;p++){const C=f[p],{filter:{event:E,schema:_,table:I,filter:T}}=C,N=u&&u[p];if(N&&N.event===E&&N.schema===_&&N.table===I&&N.filter===T)m.push(Object.assign(Object.assign({},C),{id:N.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t("SUBSCRIBED");return}}).receive("error",u=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(t,n={}){return Co(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)})}untrack(t={}){return Co(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,n,r){return this._on(t,n,r)}send(t,n={}){return new Promise(r=>{var i,s,a;const o=this._push(t.type,t,n.timeout||this.timeout);o.rateLimited&&r("rate limited"),t.type==="broadcast"&&!((a=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0?void 0:a.ack)&&r("ok"),o.receive("ok",()=>r("ok")),o.receive("timeout",()=>r("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_t.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new ps(this,Lt.leave,{},t);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ps(this,t,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,s;const a=t.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Lt;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var p,C,E;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((E=(C=m.filter)===null||C===void 0?void 0:C.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(m=>m.callback(h,r)):(s=this.bindings[a])===null||s===void 0||s.filter(m=>{var p,C,E,_,I,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const N=m.id,O=(p=m.filter)===null||p===void 0?void 0:p.event;return N&&((C=n.ids)===null||C===void 0?void 0:C.includes(N))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const N=(I=(_=m==null?void 0:m.filter)===null||_===void 0?void 0:_.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return N==="*"||N===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:C,table:E,commit_timestamp:_,type:I,errors:T}=p;h=Object.assign(Object.assign({},{schema:C,table:E,commit_timestamp:_,eventType:I,new:{},old:{},errors:T}),this._getPayloadRecords(p))}m.callback(h,r)})}_isClosed(){return this.state===_t.closed}_isJoined(){return this.state===_t.joined}_isJoining(){return this.state===_t.joining}_isLeaving(){return this.state===_t.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const i=t.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&vs.isEqual(i.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Lt.close,{},t)}_onError(t){this._on(Lt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_t.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=yo(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=yo(t.columns,t.old_record)),n}}var ys=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const s0=()=>{};class a0{constructor(t,n){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Yf,this.params={},this.timeout=po,this.transport=Wf.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=s0,this.conn=null,this.sendBuffer=[],this.serializer=new Zf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${t}/${ds.websocket}`,(n==null?void 0:n.params)&&(this.params=n.params),(n==null?void 0:n.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),(n==null?void 0:n.timeout)&&(this.timeout=n.timeout),(n==null?void 0:n.logger)&&(this.logger=n.logger),(n==null?void 0:n.transport)&&(this.transport=n.transport),(n==null?void 0:n.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=(n==null?void 0:n.reconnectAfterMs)?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=(n==null?void 0:n.encode)?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=(n==null?void 0:n.decode)?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new go(()=>ys(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t)))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n!=null?n:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return ys(this,void 0,void 0,function*(){const n=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),n})}removeAllChannels(){return ys(this,void 0,void 0,function*(){const t=yield Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t})}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Sn.connecting:return Tr.Connecting;case Sn.open:return Tr.Open;case Sn.closing:return Tr.Closing;default:return Tr.Closed}}isConnected(){return this.connectionState()===Tr.Open}channel(t,n={config:{}}){this.isConnected()||this.connect();const r=new vs(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:i,ref:s}=t;let a=()=>{this.encode(t,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};if(this.log("push",`${n} ${r} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(a)())return"rate limited"}else a();else this.sendBuffer.push(a)}setAuth(t){this.accessToken=t,this.channels.forEach(n=>{t&&n.updateJoinPayload({access_token:t}),n.joinedOnce&&n._isJoined()&&n._push(Lt.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xf}))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:i,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(i,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Lt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Jf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(t,n=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(t(),n>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},n)),!1)}}class ms extends Error{constructor(t){super(t);this.__isStorageError=!0,this.name="StorageError"}}function ct(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class o0 extends ms{constructor(t,n){super(t);this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class bo extends ms{constructor(t,n){super(t);this.name="StorageUnknownError",this.originalError=n}}var So=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const To=e=>{let t;return e?t=e:typeof fetch=="undefined"?t=(...n)=>So(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(function(){return oi})).fetch(...n)}):t=fetch,(...n)=>t(...n)},l0=()=>So(void 0,void 0,void 0,function*(){return typeof Response=="undefined"?(yield Promise.resolve().then(function(){return oi})).Response:Response});var Qr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const Cs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),u0=(e,t)=>Qr(void 0,void 0,void 0,function*(){const n=yield l0();e instanceof n?e.json().then(r=>{t(new o0(Cs(r),e.status||500))}).catch(r=>{t(new bo(Cs(r),r))}):t(new bo(Cs(e),e))}),c0=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function li(e,t,n,r,i,s){return Qr(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,c0(t,r,i,s)).then(l=>{if(!l.ok)throw l;return(r==null?void 0:r.noResolveJson)?l:l.json()}).then(l=>a(l)).catch(l=>u0(l,o))})})}function Es(e,t,n,r){return Qr(this,void 0,void 0,function*(){return li(e,"GET",t,n,r)})}function nr(e,t,n,r,i){return Qr(this,void 0,void 0,function*(){return li(e,"POST",t,r,i,n)})}function f0(e,t,n,r,i){return Qr(this,void 0,void 0,function*(){return li(e,"PUT",t,r,i,n)})}function wo(e,t,n,r,i){return Qr(this,void 0,void 0,function*(){return li(e,"DELETE",t,r,i,n)})}var wt=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const h0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Io={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class d0{constructor(t,n={},r,i){this.url=t,this.headers=n,this.bucketId=r,this.fetch=To(i)}uploadOrUpdate(t,n,r,i){return wt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Io),i),o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob!="undefined"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl)):(s=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:s,headers:o},(a==null?void 0:a.duplex)?{duplex:a.duplex}:{}));if(c.ok)return{data:{path:l},error:null};{const f=yield c.json();return{data:null,error:f}}}catch(s){if(ct(s))return{data:null,error:s};throw s}})}upload(t,n,r){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,i){return wt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Io.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob!="undefined"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData!="undefined"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c});if(f.ok)return{data:{path:s},error:null};{const h=yield f.json();return{data:null,error:h}}}catch(l){if(ct(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t){return wt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const r=yield nr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),i=new URL(this.url+r.url),s=i.searchParams.get("token");if(!s)throw new ms("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:s},error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}})}update(t,n,r){return wt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n){return wt(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}copy(t,n){return wt(this,void 0,void 0,function*(){try{return{data:{path:(yield nr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,r){return wt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield nr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},(r==null?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(r==null?void 0:r.download)?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}})}createSignedUrls(t,n,r){return wt(this,void 0,void 0,function*(){try{const i=yield nr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=(r==null?void 0:r.download)?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}})}download(t,n){return wt(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)!="undefined"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Es(this.fetch,`${this.url}/${i}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(ct(o))return{data:null,error:o};throw o}})}getPublicUrl(t,n){const r=this._getFinalPath(t),i=[],s=(n==null?void 0:n.download)?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const o=typeof(n==null?void 0:n.transform)!="undefined"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(t){return wt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}})}list(t,n,r){return wt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},h0),n),{prefix:t||""});return{data:yield nr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(ct(i))return{data:null,error:i};throw i}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const p0="2.5.1",g0={"X-Client-Info":`storage-js/${p0}`};var Yr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};class v0{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},g0),n),this.fetch=To(r)}listBuckets(){return Yr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ct(t))return{data:null,error:t};throw t}})}getBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Yr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Yr(this,void 0,void 0,function*(){try{return{data:yield f0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ct(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ct(n))return{data:null,error:n};throw n}})}}class y0 extends v0{constructor(t,n={},r){super(t,n,r)}from(t){return new d0(this.url,this.headers,t,this.fetch)}}const m0="2.25.0",C0={"X-Client-Info":`supabase-js/${m0}`};var E0=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const x0=e=>{let t;return e?t=e:typeof fetch=="undefined"?t=hs:t=fetch,(...n)=>t(...n)},_0=()=>typeof Headers=="undefined"?_n.exports.Headers:Headers,b0=(e,t,n)=>{const r=x0(n),i=_0();return(s,a)=>E0(void 0,void 0,void 0,function*(){var o;const l=(o=yield t())!==null&&o!==void 0?o:e;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},a),{headers:u}))})};function S0(e){return e.replace(/\/$/,"")}function T0(e,t){const{db:n,auth:r,realtime:i,global:s}=e,{db:a,auth:o,realtime:l,global:u}=t;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},u),s)}}var wr=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};function w0(e){return Math.round(Date.now()/1e3)+e}function I0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ir=()=>typeof document!="undefined",Ir={tested:!1,writable:!1},ui=()=>{if(!ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ir.tested)return Ir.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ir.tested=!0,Ir.writable=!0}catch{Ir.tested=!0,Ir.writable=!1}return Ir.writable};function mt(e,t){var n;t||(t=((n=window==null?void 0:window.location)===null||n===void 0?void 0:n.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const Ao=e=>{let t;return e?t=e:typeof fetch=="undefined"?t=(...n)=>wr(void 0,void 0,void 0,function*(){return yield(yield Promise.resolve().then(function(){return oi})).fetch(...n)}):t=fetch,(...n)=>t(...n)},A0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wn=(e,t,n)=>wr(void 0,void 0,void 0,function*(){yield e.setItem(t,JSON.stringify(n))}),ci=(e,t)=>wr(void 0,void 0,void 0,function*(){const n=yield e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}}),xs=(e,t)=>wr(void 0,void 0,void 0,function*(){yield e.removeItem(t)});function B0(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,i,s,a,o,l,u,c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)a=t.indexOf(e.charAt(c++)),o=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=a<<2|o>>4,i=(o&15)<<4|l>>2,s=(l&3)<<6|u,n=n+String.fromCharCode(r),l!=64&&i!=0&&(n=n+String.fromCharCode(i)),u!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class fi{constructor(){this.promise=new fi.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}fi.promiseConstructor=Promise;function Bo(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(B0(r))}function k0(e){return new Promise(t=>{setTimeout(()=>t(null),e)})}function R0(e,t){return new Promise((r,i)=>{(()=>wr(this,void 0,void 0,function*(){for(let s=0;s<1/0;s++)try{const a=yield e(s);if(!t(s,null,a)){r(a);return}}catch(a){if(!t(s,a)){i(a);return}}}))()})}function N0(e){return("0"+e.toString(16)).substr(-2)}function hi(){const e=56,t=new Uint32Array(e);if(typeof crypto=="undefined"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<e;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,N0).join("")}function L0(e){return wr(this,void 0,void 0,function*(){const n=new TextEncoder().encode(e),r=yield crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function D0(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function di(e){return wr(this,void 0,void 0,function*(){if(typeof crypto=="undefined")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=yield L0(e);return D0(t)})}class _s extends Error{constructor(t,n){super(t);this.__isAuthError=!0,this.name="AuthError",this.status=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class U0 extends _s{constructor(t,n){super(t,n);this.name="AuthApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function O0(e){return me(e)&&e.name==="AuthApiError"}class ko extends _s{constructor(t,n){super(t);this.name="AuthUnknownError",this.originalError=n}}class Xr extends _s{constructor(t,n,r){super(t);this.name=n,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Jr extends Xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class bs extends Xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class pi extends Xr{constructor(t){super(t,"AuthInvalidCredentialsError",400)}}class Zt extends Xr{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500);this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ss extends Xr{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500);this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ts extends Xr{constructor(t,n){super(t,"AuthRetryableFetchError",n)}}var ws=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},P0=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const gi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),V0=(e,t)=>ws(void 0,void 0,void 0,function*(){const n=[502,503,504];A0(e)?n.includes(e.status)?t(new Ts(gi(e),e.status)):e.json().then(r=>{t(new U0(gi(r),e.status||500))}).catch(r=>{t(new ko(gi(r),r))}):t(new Ts(gi(e),0))}),F0=(e,t,n,r)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};function Ee(e,t,n,r){var i;return ws(this,void 0,void 0,function*(){const s=Object.assign({},r==null?void 0:r.headers);(r==null?void 0:r.jwt)&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};(r==null?void 0:r.redirectTo)&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=yield M0(e,t,n+o,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return(r==null?void 0:r.xform)?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}})}function M0(e,t,n,r,i,s){return ws(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(n,F0(t,r,i,s)).then(l=>{if(!l.ok)throw l;return(r==null?void 0:r.noResolveJson)?l:l.json()}).then(l=>a(l)).catch(l=>V0(l,o))})})}function sr(e){var t;let n=null;H0(e)&&(n=Object.assign({},e),n.expires_at=w0(e.expires_in));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Ar(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function K0(e){return{data:e,error:null}}function j0(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=e,a=P0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function z0(e){return e}function H0(e){return e.access_token&&e.refresh_token&&e.expires_in}var Ft=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})},q0=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class G0{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Ao(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}inviteUserByEmail(t,n={}){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ar})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}generateLink(t){return Ft(this,void 0,void 0,function*(){try{const{options:n}=t,r=q0(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),yield Ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:j0,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(me(n))return{data:{properties:null,user:null},error:n};throw n}})}createUser(t){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ar})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}})}listUsers(t){var n,r,i,s,a,o,l;return Ft(this,void 0,void 0,function*(){try{const u={nextPage:null,lastPage:0,total:0},c=yield Ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:z0});if(c.error)throw c.error;const f=yield c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const C=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(p.split(";")[1].split("=")[1]);u[`${E}Page`]=C}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}})}getUserById(t){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ar})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}})}updateUserById(t,n){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ar})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}deleteUser(t,n=!1){return Ft(this,void 0,void 0,function*(){try{return yield Ee(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ar})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}_listFactors(t){return Ft(this,void 0,void 0,function*(){try{const{data:n,error:r}=yield Ee(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(me(n))return{data:null,error:n};throw n}})}_deleteFactor(t){return Ft(this,void 0,void 0,function*(){try{return{data:yield Ee(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}}const W0="2.29.0",Q0="http://localhost:9999",Y0="supabase.auth.token",X0={"X-Client-Info":`gotrue-js/${W0}`},J0=10,Ro={getItem:e=>ui()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{!ui()||globalThis.localStorage.setItem(e,t)},removeItem:e=>{!ui()||globalThis.localStorage.removeItem(e)}};function Z0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self!="undefined"&&(self.globalThis=self)}}var re=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};Z0();const $0={url:Q0,storageKey:Y0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:X0,flowType:"implicit"},Is=30*1e3,eh=3;class th{constructor(t){var n;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const r=Object.assign(Object.assign({},$0),t);if(this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||Ro,this.admin=new G0({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ao(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Ro&&!ui()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",i=>{this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return re(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{const t=ir()?yield this._isPKCEFlow():!1;if(t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=yield this._getSessionFromUrl(t);if(r)return yield this._removeSession(),{error:r};const{session:i,redirectType:s}=n;return yield this._saveSession(i),setTimeout(()=>{s==="recovery"?this._notifyAllSubscribers("PASSWORD_RECOVERY",i):this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return me(t)?{error:t}:{error:new ko("Unexpected error during initialization",t)}}finally{yield this._handleVisibilityChange()}})}signUp(t){var n,r,i;return re(this,void 0,void 0,function*(){try{yield this._removeSession();let s;if("email"in t){const{email:c,password:f,options:h}=t;let m=null,p=null;if(this.flowType==="pkce"){const C=hi();yield wn(this.storage,`${this.storageKey}-code-verifier`,C),m=yield di(C),p=C===m?"plain":"s256"}s=yield Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:p},xform:sr})}else if("phone"in t){const{phone:c,password:f,options:h}=t;s=yield Ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:sr})}else throw new pi("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithPassword(t){return re(this,void 0,void 0,function*(){try{yield this._removeSession();let n;if("email"in t){const{email:s,password:a,options:o}=t;n=yield Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:sr})}else if("phone"in t){const{phone:s,password:a,options:o}=t;n=yield Ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:sr})}else throw new pi("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bs}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(n){if(me(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOAuth(t){var n,r,i,s;return re(this,void 0,void 0,function*(){return yield this._removeSession(),yield this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}exchangeCodeForSession(t){return re(this,void 0,void 0,function*(){const n=yield ci(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=yield Ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:sr});return yield xs(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new bs}:(r.session&&(yield this._saveSession(r.session),this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})})}signInWithIdToken(t){return re(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:n,provider:r,token:i,nonce:s}=t,a=yield Ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sr}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new bs}:(o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l})}catch(n){if(me(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOtp(t){var n,r,i,s,a;return re(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in t){const{email:o,options:l}=t;let u=null,c=null;if(this.flowType==="pkce"){const h=hi();yield wn(this.storage,`${this.storageKey}-code-verifier`,h),u=yield di(h),c=h===u?"plain":"s256"}const{error:f}=yield Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:o,options:l}=t,{error:u}=yield Ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null},error:u}}throw new pi("You must provide either an email or phone number.")}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(t){var n,r;return re(this,void 0,void 0,function*(){try{t.type!=="email_change"&&t.type!=="phone_change"&&(yield this._removeSession());const{data:i,error:s}=yield Ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:(n=t.options)===null||n===void 0?void 0:n.captchaToken}}),redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,xform:sr});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,o=i.user;return(a==null?void 0:a.access_token)&&(yield this._saveSession(a),this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:o,session:a},error:null}}catch(i){if(me(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(t){var n,r,i;return re(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield Ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),((i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:K0})}catch(s){if(me(s))return{data:null,error:s};throw s}})}reauthenticate(){return re(this,void 0,void 0,function*(){try{const{data:{session:t},error:n}=yield this.getSession();if(n)throw n;if(!t)throw new Jr;const{error:r}=yield Ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return re(this,void 0,void 0,function*(){try{yield this._removeSession();const n=`${this.url}/resend`;if("email"in t){const{email:r,type:i,options:s}=t,{error:a}=yield Ee(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:i,options:s}=t,{error:a}=yield Ee(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null},error:a}}throw new pi("You must provide either an email or phone number and a type")}catch(n){if(me(n))return{data:{user:null,session:null},error:n};throw n}})}getSession(){return re(this,void 0,void 0,function*(){yield this.initializePromise;let t=null;if(this.persistSession){const s=yield ci(this.storage,this.storageKey);s!==null&&(this._isValidSession(s)?t=s:yield this._removeSession())}else t=this.inMemorySession;if(!t)return{data:{session:null},error:null};if(!(t.expires_at?t.expires_at<=Date.now()/1e3:!1))return{data:{session:t},error:null};const{session:r,error:i}=yield this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}})}getUser(t){var n,r;return re(this,void 0,void 0,function*(){try{if(!t){const{data:i,error:s}=yield this.getSession();if(s)throw s;t=(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0}return yield Ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ar})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}})}updateUser(t,n={}){return re(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)throw i;if(!r.session)throw new Jr;const s=r.session,{data:a,error:o}=yield Ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:t,jwt:s.access_token,xform:Ar});if(o)throw o;return s.user=a.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}_decodeJWT(t){return Bo(t)}setSession(t){return re(this,void 0,void 0,function*(){try{if(!t.access_token||!t.refresh_token)throw new Jr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const a=Bo(t.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{session:o,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=yield this.getUser(t.access_token);if(l)throw l;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},yield this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(me(n))return{data:{session:null,user:null},error:n};throw n}})}refreshSession(t){var n;return re(this,void 0,void 0,function*(){try{if(!t){const{data:s,error:a}=yield this.getSession();if(a)throw a;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t==null?void 0:t.refresh_token))throw new Jr;const{session:r,error:i}=yield this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromUrl(t){return re(this,void 0,void 0,function*(){try{if(!ir())throw new Zt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Zt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Ss("Not a valid PKCE flow url.");if(t){const E=mt("code");if(!E)throw new Ss("No code detected.");const{data:_,error:I}=yield this.exchangeCodeForSession(E);if(I)throw I;if(!_.session)throw new Ss("No session detected.");let T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:_.session,redirectType:null},error:null}}const n=mt("error_description");if(n){const E=mt("error_code");if(!E)throw new Zt("No error_code detected.");const _=mt("error");throw _?new Zt(n,{error:_,code:E}):new Zt("No error detected.")}const r=mt("provider_token"),i=mt("provider_refresh_token"),s=mt("access_token");if(!s)throw new Zt("No access_token detected.");const a=mt("expires_in");if(!a)throw new Zt("No expires_in detected.");const o=mt("refresh_token");if(!o)throw new Zt("No refresh_token detected.");const l=mt("token_type");if(!l)throw new Zt("No token_type detected.");const c=Math.round(Date.now()/1e3)+parseInt(a),{data:f,error:h}=yield this.getUser(s);if(h)throw h;const m=f.user,p={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(a),expires_at:c,refresh_token:o,token_type:l,user:m},C=mt("type");return window.location.hash="",{data:{session:p,redirectType:C},error:null}}catch(n){if(me(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantFlow(){return ir()&&(Boolean(mt("access_token"))||Boolean(mt("error_description")))}_isPKCEFlow(){return re(this,void 0,void 0,function*(){const t=yield ci(this.storage,`${this.storageKey}-code-verifier`);return Boolean(mt("code"))&&Boolean(t)})}signOut(){var t;return re(this,void 0,void 0,function*(){const{data:n,error:r}=yield this.getSession();if(r)return{error:r};const i=(t=n.session)===null||t===void 0?void 0:t.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s&&!(O0(s)&&(s.status===404||s.status===401)))return{error:s}}return yield this._removeSession(),yield xs(this.storage,`${this.storageKey}-code-verifier`),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(t){const n=I0(),r={id:n,callback:t,unsubscribe:()=>{this.stateChangeEmitters.delete(n)}};return this.stateChangeEmitters.set(n,r),this.emitInitialSession(n),{data:{subscription:r}}}emitInitialSession(t){var n,r;return re(this,void 0,void 0,function*(){try{const{data:{session:i},error:s}=yield this.getSession();if(s)throw s;(n=this.stateChangeEmitters.get(t))===null||n===void 0||n.callback("INITIAL_SESSION",i)}catch(i){(r=this.stateChangeEmitters.get(t))===null||r===void 0||r.callback("INITIAL_SESSION",null),console.error(i)}})}resetPasswordForEmail(t,n={}){return re(this,void 0,void 0,function*(){let r=null,i=null;if(this.flowType==="pkce"){const s=hi();yield wn(this.storage,`${this.storageKey}-code-verifier`,s),r=yield di(s),i=s===r?"plain":"s256"}try{return yield Ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(me(s))return{data:null,error:s};throw s}})}_refreshAccessToken(t){return re(this,void 0,void 0,function*(){try{const n=Date.now();return yield R0(r=>re(this,void 0,void 0,function*(){return yield k0(r*200),yield Ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sr})}),(r,i,s)=>s&&s.error&&s.error instanceof Ts&&Date.now()+(r+1)*200-n<Is)}catch(n){if(me(n))return{data:{session:null,user:null},error:n};throw n}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,n){return re(this,void 0,void 0,function*(){const r=yield this._getUrlForProvider(t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return ir()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}})}_recoverAndRefresh(){var t;return re(this,void 0,void 0,function*(){try{const n=yield ci(this.storage,this.storageKey);if(!this._isValidSession(n)){n!==null&&(yield this._removeSession());return}const r=Math.round(Date.now()/1e3);if(((t=n.expires_at)!==null&&t!==void 0?t:1/0)<r+J0){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=yield this._callRefreshToken(n.refresh_token);i&&(console.log(i.message),yield this._removeSession())}}else this.persistSession&&(yield this._saveSession(n)),this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){console.error(n);return}})}_callRefreshToken(t){var n,r;return re(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new fi,!t)throw new Jr;const{data:i,error:s}=yield this._refreshAccessToken(t);if(s)throw s;if(!i.session)throw new Jr;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(me(i)){const s={session:null,error:i};return(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(t,n,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n}),this.stateChangeEmitters.forEach(i=>i.callback(t,n))}_saveSession(t){return re(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=t),this.persistSession&&t.expires_at&&(yield this._persistSession(t))})}_persistSession(t){return wn(this.storage,this.storageKey,t)}_removeSession(){return re(this,void 0,void 0,function*(){this.persistSession?yield xs(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ir()&&(window==null?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}_startAutoRefresh(){return re(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const t=setInterval(()=>this._autoRefreshTokenTick(),Is);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno!="undefined"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return re(this,void 0,void 0,function*(){const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return re(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return re(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return re(this,void 0,void 0,function*(){const t=Date.now();try{const{data:{session:n}}=yield this.getSession();if(!n||!n.refresh_token||!n.expires_at)return;Math.floor((n.expires_at*1e3-t)/Is)<eh&&(yield this._callRefreshToken(n.refresh_token))}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}})}_handleVisibilityChange(){return re(this,void 0,void 0,function*(){if(!ir()||!(window==null?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>re(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return re(this,void 0,void 0,function*(){document.visibilityState==="visible"?(t||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,n){return re(this,void 0,void 0,function*(){const r=[`provider=${encodeURIComponent(t)}`];if((n==null?void 0:n.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(n==null?void 0:n.scopes)&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const i=hi();yield wn(this.storage,`${this.storageKey}-code-verifier`,i);const s=yield di(i),a=i===s?"plain":"s256",o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(n==null?void 0:n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`})}_unenroll(t){var n;return re(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield Ee(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})}catch(r){if(me(r))return{data:null,error:r};throw r}})}_enroll(t){var n,r;return re(this,void 0,void 0,function*(){try{const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:a,error:o}=yield Ee(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(((r=a==null?void 0:a.totp)===null||r===void 0?void 0:r.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}catch(i){if(me(i))return{data:null,error:i};throw i}})}_verify(t){var n;return re(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:a}=yield Ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:a})}catch(r){if(me(r))return{data:null,error:r};throw r}})}_challenge(t){var n;return re(this,void 0,void 0,function*(){try{const{data:r,error:i}=yield this.getSession();return i?{data:null,error:i}:yield Ee(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})}catch(r){if(me(r))return{data:null,error:r};throw r}})}_challengeAndVerify(t){return re(this,void 0,void 0,function*(){const{data:n,error:r}=yield this._challenge({factorId:t.factorId});return r?{data:null,error:r}:yield this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})})}_listFactors(){return re(this,void 0,void 0,function*(){const{data:{user:t},error:n}=yield this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var t,n;return re(this,void 0,void 0,function*(){const{data:{session:r},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let a=null;s.aal&&(a=s.aal);let o=a;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=s.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:u},error:null}})}}class rh extends th{constructor(t){super(t)}}var nh=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((r=r.apply(e,t||[])).next())})};const ih={headers:C0},sh={schema:"public"},ah={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oh={};class lh{constructor(t,n,r){var i,s,a,o,l,u,c,f;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=S0(t);this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p={db:sh,realtime:oh,auth:Object.assign(Object.assign({},ah),{storageKey:m}),global:ih},C=T0(r!=null?r:{},p);this.storageKey=(s=(i=C.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=(a=C.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=C.auth)!==null&&l!==void 0?l:{},this.headers,(u=C.global)===null||u===void 0?void 0:u.fetch),this.fetch=b0(n,this._getAccessToken.bind(this),(c=C.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},C.realtime)),this.rest=new wf(`${h}/rest/v1`,{headers:this.headers,schema:(f=C.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new mf(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new y0(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}rpc(t,n={},r){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return nh(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:a},o,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rh({url:this.authUrl,headers:Object.assign(Object.assign({},u),o),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:i,flowType:a,fetch:l})}_initRealtimeClient(t){return new a0(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,r==null?void 0:r.access_token,"CLIENT")})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n!=null?n:null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c1=(e,t,n)=>new lh(e,t,n);function uh(e,{from:t,to:n},r={}){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform,[a,o]=i.transformOrigin.split(" ").map(parseFloat),l=t.left+t.width*a/n.width-(n.left+a),u=t.top+t.height*o/n.height-(n.top+o),{delay:c=0,duration:f=m=>Math.sqrt(m)*120,easing:h=cs}=r;return{delay:c,duration:Er(f)?f(Math.sqrt(l*l+u*u)):f,easing:h,css:(m,p)=>{const C=p*l,E=p*u,_=m+p*t.width/n.width,I=m+p*t.height/n.height;return`transform: ${s} translate(${C}px, ${E}px) scale(${_}, ${I});`}}}const ch={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},fh=()=>{const{subscribe:e,update:t}=ai([]);let n=0;const r={},i=u=>u instanceof Object;return{subscribe:e,push:(u,c={})=>{const f=Ke({target:"default"},i(u)?u:qn(Ke({},c),{msg:u})),h=r[f.target]||{},m=qn(Ke(Ke(Ke({},ch),h),f),{theme:Ke(Ke({},h.theme),f.theme),classes:[...h.classes||[],...f.classes||[]],id:++n});return t(p=>m.reversed?[...p,m]:[m,...p]),n},pop:u=>{t(c=>{if(!c.length||u===0)return[];if(i(u))return c.filter(h=>u(h));const f=u||Math.max(...c.map(h=>h.id));return c.filter(h=>h.id!==f)})},set:(u,c={})=>{const f=i(u)?Ke({},u):qn(Ke({},c),{id:u});t(h=>{const m=h.findIndex(p=>p.id===f.id);return m>-1&&(h[m]=Ke(Ke({},h[m]),f)),h})},_init:(u="default",c={})=>(r[u]=c,r)}},As=fh();function No(e){return Object.prototype.toString.call(e)==="[object Date]"}function Bs(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const r=t.map((i,s)=>Bs(e[s],i));return i=>r.map(s=>s(i))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(No(e)&&No(t)){e=e.getTime(),t=t.getTime();const s=t-e;return a=>new Date(e+a*s)}const r=Object.keys(t),i={};return r.forEach(s=>{i[s]=Bs(e[s],t[s])}),s=>{const a={};return r.forEach(o=>{a[o]=i[o](s)}),a}}if(n==="number"){const r=t-e;return i=>e+i*r}throw new Error(`Cannot interpolate ${n} values`)}function hh(e,t={}){const n=ai(e);let r,i=e;function s(a,o){if(e==null)return n.set(e=a),Promise.resolve();i=a;let l=r,u=!1,{delay:c=0,duration:f=400,easing:h=Cr,interpolate:m=Bs}=Nt(Nt({},t),o);if(f===0)return l&&(l.abort(),l=null),n.set(e=i),Promise.resolve();const p=gn()+c;let C;return r=vn(E=>{if(E<p)return!0;u||(C=m(e,a),typeof f=="function"&&(f=f(e,a)),u=!0),l&&(l.abort(),l=null);const _=E-p;return _>f?(n.set(e=a),!1):(n.set(e=C(h(_/f))),!0)}),r.promise}return{set:s,update:(a,o)=>s(a(i,e),o),subscribe:n.subscribe}}function dh(e){let t,n=e[0].msg+"",r;return{c(){t=new es,r=zr(),this.h()},l(i){t=Yu(i),r=zr(),this.h()},h(){t.a=r},m(i,s){t.m(n,i,s),pe(i,r,s)},p(i,s){s&1&&n!==(n=i[0].msg+"")&&t.p(n)},i:W,o:W,d(i){i&&k(r),i&&t.d()}}}function ph(e){let t,n,r;const i=[e[2]];var s=e[0].component.src;function a(o){let l={};for(let u=0;u<i.length;u+=1)l=Nt(l,i[u]);return{props:l}}return s&&(t=new s(a())),{c(){t&&ls(t.$$.fragment),n=zr()},l(o){t&&uo(t.$$.fragment,o),n=zr()},m(o,l){t&&ii(t,o,l),pe(o,n,l),r=!0},p(o,l){const u=l&4?ni(i,[uc(o[2])]):{};if(s!==(s=o[0].component.src)){if(t){ti();const c=t;Jt(c.$$.fragment,1,0,()=>{si(c,1)}),ri()}s?(t=new s(a()),ls(t.$$.fragment),Vt(t.$$.fragment,1),ii(t,n.parentNode,n)):t=null}else s&&t.$set(u)},i(o){r||(t&&Vt(t.$$.fragment,o),r=!0)},o(o){t&&Jt(t.$$.fragment,o),r=!1},d(o){o&&k(n),t&&si(t,o)}}}function Lo(e){let t,n,r;return{c(){t=Yt("div"),this.h()},l(i){t=qr(i,"DIV",{class:!0,role:!0,tabindex:!0}),P(t).forEach(k),this.h()},h(){d(t,"class","_toastBtn pe svelte-l65oht"),d(t,"role","button"),d(t,"tabindex","0")},m(i,s){pe(i,t,s),n||(r=[Qn(t,"click",e[4]),Qn(t,"keydown",e[8])],n=!0)},p:W,d(i){i&&k(t),n=!1,Ot(r)}}}function gh(e){let t,n,r,i,s,a,o,l,u,c;const f=[ph,dh],h=[];function m(C,E){return C[0].component?0:1}r=m(e),i=h[r]=f[r](e);let p=e[0].dismissable&&Lo(e);return{c(){t=Yt("div"),n=Yt("div"),i.c(),s=Zi(),p&&p.c(),a=Zi(),o=Yt("progress"),this.h()},l(C){t=qr(C,"DIV",{class:!0});var E=P(t);n=qr(E,"DIV",{role:!0,class:!0});var _=P(n);i.l(_),_.forEach(k),s=$i(E),p&&p.l(E),a=$i(E),o=qr(E,"PROGRESS",{class:!0}),P(o).forEach(k),E.forEach(k),this.h()},h(){d(n,"role","status"),d(n,"class","_toastMsg svelte-l65oht"),Yn(n,"pe",e[0].component),d(o,"class","_toastBar svelte-l65oht"),o.value=e[1],d(t,"class","_toastItem svelte-l65oht"),Yn(t,"pe",e[0].pausable)},m(C,E){pe(C,t,E),X(t,n),h[r].m(n,null),X(t,s),p&&p.m(t,null),X(t,a),X(t,o),l=!0,u||(c=[Qn(t,"mouseenter",e[9]),Qn(t,"mouseleave",e[6])],u=!0)},p(C,[E]){let _=r;r=m(C),r===_?h[r].p(C,E):(ti(),Jt(h[_],1,1,()=>{h[_]=null}),ri(),i=h[r],i?i.p(C,E):(i=h[r]=f[r](C),i.c()),Vt(i,1),i.m(n,null)),E&1&&Yn(n,"pe",C[0].component),C[0].dismissable?p?p.p(C,E):(p=Lo(C),p.c(),p.m(t,a)):p&&(p.d(1),p=null),(!l||E&2)&&(o.value=C[1]),E&1&&Yn(t,"pe",C[0].pausable)},i(C){l||(Vt(i),l=!0)},o(C){Jt(i),l=!1},d(C){C&&k(t),h[r].d(),p&&p.d(),u=!1,Ot(c)}}}function vh(e,t,n){let r,{item:i}=t;const s=hh(i.initial,{duration:i.duration,easing:Cr});qa(e,s,T=>n(1,r=T));const a=()=>As.pop(i.id),o=()=>{(r===1||r===0)&&a()};let l=i.initial,u=l,c=!1;const f=()=>{!c&&r!==l&&(s.set(r,{duration:0}),c=!0)},h=()=>{if(c){const T=i.duration,N=T-T*((r-u)/(l-u));s.set(l,{duration:N}).then(o),c=!1}};let m={};const p=(T,N="undefined")=>typeof T===N;let C;Jn((T=document)=>{if(p(T.hidden))return;const N=()=>T.hidden?f():h(),O="visibilitychange";T.addEventListener(O,N),C=()=>T.removeEventListener(O,N),N()}),io(()=>{p(i.onpop,"function")&&i.onpop(i.id),C&&C()});const _=T=>{T instanceof KeyboardEvent&&["Enter"," "].includes(T.key)&&a()},I=()=>{i.pausable&&f()};return e.$$set=T=>{"item"in T&&n(0,i=T.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(p(i.progress)||n(0,i.next=i.progress,i)),e.$$.dirty&131&&l!==i.next&&(n(7,l=i.next),u=r,c=!1,s.set(l).then(o)),e.$$.dirty&1&&i.component){const{props:T={},sendIdTo:N}=i.component;n(2,m=Ke(Ke({},T),N&&{[N]:i.id}))}},[i,r,m,s,a,f,h,l,_,I]}class yh extends _e{constructor(t){super();xe(this,t,vh,gh,Ce,{item:0})}}function Do(e,t,n){const r=e.slice();return r[5]=t[n],r}function Uo(e,t){let n,r,i,s,a,o,l,u,c=W,f;return r=new yh({props:{item:t[5]}}),{key:e,first:null,c(){n=Yt("li"),ls(r.$$.fragment),i=Zi(),this.h()},l(h){n=qr(h,"LI",{class:!0,style:!0});var m=P(n);uo(r.$$.fragment,m),i=$i(m),m.forEach(k),this.h()},h(){d(n,"class",s=""+(Qa(t[5].classes.join(" "))+" svelte-yh90az")),d(n,"style",a=t[1](t[5].theme)),this.first=n},m(h,m){pe(h,n,m),ii(r,n,null),X(n,i),f=!0},p(h,m){t=h;const p={};m&1&&(p.item=t[5]),r.$set(p),(!f||m&1&&s!==(s=""+(Qa(t[5].classes.join(" "))+" svelte-yh90az")))&&d(n,"class",s),(!f||m&1&&a!==(a=t[1](t[5].theme)))&&d(n,"style",a)},r(){u=n.getBoundingClientRect()},f(){ec(n),c(),no(n,u)},a(){c(),c=$u(n,u,uh,{duration:200})},i(h){f||(Vt(r.$$.fragment,h),_r(()=>{l&&l.end(1),o=ic(n,ff,t[5].intro),o.start()}),f=!0)},o(h){Jt(r.$$.fragment,h),o&&o.invalidate(),l=sc(n,cf,{}),f=!1},d(h){h&&k(n),si(r),h&&l&&l.end()}}}function mh(e){let t,n=[],r=new Map,i,s=e[0];const a=o=>o[5].id;for(let o=0;o<s.length;o+=1){let l=Do(e,s,o),u=a(l);r.set(u,n[o]=Uo(u,l))}return{c(){t=Yt("ul");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){t=qr(o,"UL",{class:!0});var l=P(t);for(let u=0;u<n.length;u+=1)n[u].l(l);l.forEach(k),this.h()},h(){d(t,"class","_toastContainer svelte-yh90az")},m(o,l){pe(o,t,l);for(let u=0;u<n.length;u+=1)n[u].m(t,null);i=!0},p(o,[l]){if(l&3){s=o[0],ti();for(let u=0;u<n.length;u+=1)n[u].r();n=lc(n,l,a,1,o,s,r,t,oc,Uo,null,Do);for(let u=0;u<n.length;u+=1)n[u].a();ri()}},i(o){if(!i){for(let l=0;l<s.length;l+=1)Vt(n[l]);i=!0}},o(o){for(let l=0;l<n.length;l+=1)Jt(n[l]);i=!1},d(o){o&&k(t);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Ch(e,t,n){let r;qa(e,As,l=>n(4,r=l));let{options:i={}}=t,{target:s="default"}=t,a;const o=l=>Object.keys(l).reduce((u,c)=>`${u}${c}:${l[c]};`,"");return e.$$set=l=>{"options"in l&&n(2,i=l.options),"target"in l&&n(3,s=l.target)},e.$$.update=()=>{e.$$.dirty&12&&As._init(s,i),e.$$.dirty&24&&n(0,a=r.filter(l=>l.target===s))},[a,o,i,s,r]}class f1 extends _e{constructor(t){super();xe(this,t,Ch,mh,Ce,{options:2,target:3})}}/*!js-cookie v3.0.1 | MIT*/function vi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Eh={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ks(e,t){function n(i,s,a){if(typeof document!="undefined"){a=vi({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var l in a)!a[l]||(o+="; "+l,a[l]!==!0&&(o+="="+a[l].split(";")[0]));return document.cookie=i+"="+e.write(s,i)+o}}function r(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],a={},o=0;o<s.length;o++){var l=s[o].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(a[c]=e.read(u,c),i===c)break}catch{}}return i?a[i]:a}}return Object.create({set:n,get:r,remove:function(i,s){n(i,"",vi({},s,{expires:-1}))},withAttributes:function(i){return ks(this.converter,vi({},this.attributes,i))},withConverter:function(i){return ks(vi({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var h1=ks(Eh,{path:"/"});const In=/^[a-z0-9]+(-[a-z0-9]+)*$/,Mt=Object.freeze({left:0,top:0,width:16,height:16,rotate:0,vFlip:!1,hFlip:!1});function Rs(e){return Ke(Ke({},Mt),e)}const yi=(e,t,n,r="")=>{const i=e.split(":");if(e.slice(0,1)==="@"){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const o=i.pop(),l=i.pop(),u={provider:i.length>0?i[0]:r,prefix:l,name:o};return t&&!An(u)?null:u}const s=i[0],a=s.split("-");if(a.length>1){const o={provider:r,prefix:a.shift(),name:a.join("-")};return t&&!An(o)?null:o}if(n&&r===""){const o={provider:r,prefix:"",name:s};return t&&!An(o,n)?null:o}return null},An=(e,t)=>e?!!((e.provider===""||e.provider.match(In))&&(t&&e.prefix===""||e.prefix.match(In))&&e.name.match(In)):!1;function xh(e,t){const n=Ke({},e);for(const r in Mt){const i=r;if(t[i]!==void 0){const s=t[i];if(n[i]===void 0){n[i]=s;continue}switch(i){case"rotate":n[i]=(n[i]+s)%4;break;case"hFlip":case"vFlip":n[i]=s!==n[i];break;default:n[i]=s}}}return n}function Oo(e,t,n=!1){function r(s,a){if(e.icons[s]!==void 0)return Object.assign({},e.icons[s]);if(a>5)return null;const o=e.aliases;if(o&&o[s]!==void 0){const u=o[s],c=r(u.parent,a+1);return c&&xh(c,u)}const l=e.chars;return!a&&l&&l[s]!==void 0?r(l[s],a+1):null}const i=r(t,0);if(i)for(const s in Mt)i[s]===void 0&&e[s]!==void 0&&(i[s]=e[s]);return i&&n?Rs(i):i}function _h(e){for(const t in Mt)if(e[t]!==void 0)return!0;return!1}function Po(e,t,n){n=n||{};const r=[];if(typeof e!="object"||typeof e.icons!="object")return r;e.not_found instanceof Array&&e.not_found.forEach(a=>{t(a,null),r.push(a)});const i=e.icons;Object.keys(i).forEach(a=>{const o=Oo(e,a,!0);o&&(t(a,o),r.push(a))});const s=n.aliases||"all";if(s!=="none"&&typeof e.aliases=="object"){const a=e.aliases;Object.keys(a).forEach(o=>{if(s==="variations"&&_h(a[o]))return;const l=Oo(e,o,!0);l&&(t(o,l),r.push(o))})}return r}const Ns={provider:"string",aliases:"object",not_found:"object"};for(const e in Mt)Ns[e]=typeof Mt[e];function Vo(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object")return null;for(const i in Ns)if(e[i]!==void 0&&typeof e[i]!==Ns[i])return null;const n=t.icons;for(const i in n){const s=n[i];if(!i.match(In)||typeof s.body!="string")return null;for(const a in Mt)if(s[a]!==void 0&&typeof s[a]!=typeof Mt[a])return null}const r=t.aliases;if(r)for(const i in r){const s=r[i],a=s.parent;if(!i.match(In)||typeof a!="string"||!n[a]&&!r[a])return null;for(const o in Mt)if(s[o]!==void 0&&typeof s[o]!=typeof Mt[o])return null}return t}const bh=1;let mi=Object.create(null);try{const e=window||self;e&&e._iconifyStorage.version===bh&&(mi=e._iconifyStorage.storage)}catch{}function Sh(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:Object.create(null)}}function Br(e,t){mi[e]===void 0&&(mi[e]=Object.create(null));const n=mi[e];return n[t]===void 0&&(n[t]=Sh(e,t)),n[t]}function Ls(e,t){if(!Vo(t))return[];const n=Date.now();return Po(t,(r,i)=>{i?e.icons[r]=i:e.missing[r]=n})}function Th(e,t,n){try{if(typeof n.body=="string")return e.icons[t]=Object.freeze(Rs(n)),!0}catch{}return!1}function wh(e,t){const n=e.icons[t];return n===void 0?null:n}let Bn=!1;function Fo(e){return typeof e=="boolean"&&(Bn=e),Bn}function Ih(e){const t=typeof e=="string"?yi(e,!0,Bn):e;return t?wh(Br(t.provider,t.prefix),t.name):null}function Ah(e,t){const n=yi(e,!0,Bn);if(!n)return!1;const r=Br(n.provider,n.prefix);return Th(r,n.name,t)}function Bh(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=typeof e.provider=="string"?e.provider:""),Bn&&t===""&&(typeof e.prefix!="string"||e.prefix==="")){let r=!1;return Vo(e)&&(e.prefix="",Po(e,(i,s)=>{s&&Ah(i,s)&&(r=!0)})),r}if(typeof e.prefix!="string"||!An({provider:t,prefix:e.prefix,name:"a"}))return!1;const n=Br(t,e.prefix);return!!Ls(n,e)}const Mo=Object.freeze({inline:!1,width:null,height:null,hAlign:"center",vAlign:"middle",slice:!1,hFlip:!1,vFlip:!1,rotate:0});function kh(e,t){const n={};for(const r in e){const i=r;if(n[i]=e[i],t[i]===void 0)continue;const s=t[i];switch(i){case"inline":case"slice":typeof s=="boolean"&&(n[i]=s);break;case"hFlip":case"vFlip":s===!0&&(n[i]=!n[i]);break;case"hAlign":case"vAlign":typeof s=="string"&&s!==""&&(n[i]=s);break;case"width":case"height":(typeof s=="string"&&s!==""||typeof s=="number"&&s||s===null)&&(n[i]=s);break;case"rotate":typeof s=="number"&&(n[i]+=s);break}}return n}const Rh=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Nh=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ds(e,t,n){if(t===1)return e;if(n=n===void 0?100:n,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(Rh);if(r===null||!r.length)return e;const i=[];let s=r.shift(),a=Nh.test(s);for(;;){if(a){const o=parseFloat(s);isNaN(o)?i.push(s):i.push(Math.ceil(o*t*n)/n)}else i.push(s);if(s=r.shift(),s===void 0)return i.join("");a=!a}}function Lh(e){let t="";switch(e.hAlign){case"left":t+="xMin";break;case"right":t+="xMax";break;default:t+="xMid"}switch(e.vAlign){case"top":t+="YMin";break;case"bottom":t+="YMax";break;default:t+="YMid"}return t+=e.slice?" slice":" meet",t}function Dh(e,t){const n={left:e.left,top:e.top,width:e.width,height:e.height};let r=e.body;[e,t].forEach(o=>{const l=[],u=o.hFlip,c=o.vFlip;let f=o.rotate;u?c?f+=2:(l.push("translate("+(n.width+n.left).toString()+" "+(0-n.top).toString()+")"),l.push("scale(-1 1)"),n.top=n.left=0):c&&(l.push("translate("+(0-n.left).toString()+" "+(n.height+n.top).toString()+")"),l.push("scale(1 -1)"),n.top=n.left=0);let h;switch(f<0&&(f-=Math.floor(f/4)*4),f=f%4,f){case 1:h=n.height/2+n.top,l.unshift("rotate(90 "+h.toString()+" "+h.toString()+")");break;case 2:l.unshift("rotate(180 "+(n.width/2+n.left).toString()+" "+(n.height/2+n.top).toString()+")");break;case 3:h=n.width/2+n.left,l.unshift("rotate(-90 "+h.toString()+" "+h.toString()+")");break}f%2==1&&((n.left!==0||n.top!==0)&&(h=n.left,n.left=n.top,n.top=h),n.width!==n.height&&(h=n.width,n.width=n.height,n.height=h)),l.length&&(r='<g transform="'+l.join(" ")+'">'+r+"</g>")});let i,s;t.width===null&&t.height===null?(s="1em",i=Ds(s,n.width/n.height)):t.width!==null&&t.height!==null?(i=t.width,s=t.height):t.height!==null?(s=t.height,i=Ds(s,n.width/n.height)):(i=t.width,s=Ds(i,n.height/n.width)),i==="auto"&&(i=n.width),s==="auto"&&(s=n.height),i=typeof i=="string"?i:i.toString()+"",s=typeof s=="string"?s:s.toString()+"";const a={attributes:{width:i,height:s,preserveAspectRatio:Lh(t),viewBox:n.left.toString()+" "+n.top.toString()+" "+n.width.toString()+" "+n.height.toString()},body:r};return t.inline&&(a.inline=!0),a}const Uh=/\sid="(\S+)"/g,Oh="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Ph=0;function Vh(e,t=Oh){const n=[];let r;for(;r=Uh.exec(e);)n.push(r[1]);return n.length&&n.forEach(i=>{const s=typeof t=="function"?t(i):t+(Ph++).toString(),a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+s+"$3")}),e}const Us=Object.create(null);function Fh(e,t){Us[e]=t}function Os(e){return Us[e]||Us[""]}function Ps(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path===void 0?"/":e.path,maxURL:e.maxURL?e.maxURL:500,rotate:e.rotate?e.rotate:750,timeout:e.timeout?e.timeout:5e3,random:e.random===!0,index:e.index?e.index:0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const Vs=Object.create(null),kn=["https://api.simplesvg.com","https://api.unisvg.com"],Ci=[];for(;kn.length>0;)kn.length===1||Math.random()>.5?Ci.push(kn.shift()):Ci.push(kn.pop());Vs[""]=Ps({resources:["https://api.iconify.design"].concat(Ci)});function Mh(e,t){const n=Ps(t);return n===null?!1:(Vs[e]=n,!0)}function Fs(e){return Vs[e]}const Ko=(e,t)=>{let n=e,r=n.indexOf("?")!==-1;function i(s){switch(typeof s){case"boolean":return s?"true":"false";case"number":return encodeURIComponent(s);case"string":return encodeURIComponent(s);default:throw new Error("Invalid parameter")}}return Object.keys(t).forEach(s=>{let a;try{a=i(t[s])}catch{return}n+=(r?"&":"?")+encodeURIComponent(s)+"="+a,r=!0}),n},jo={},Ei={},Kh=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}return null};let zo=Kh();function jh(e,t){const n=Fs(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let s=0;n.resources.forEach(o=>{s=Math.max(s,o.length)});const a=Ko(t+".json",{icons:""});r=n.maxURL-s-n.path.length-a.length}const i=e+":"+t;return Ei[e]=n.path,jo[i]=r,r}function zh(e){return e===404}const Hh=(e,t,n)=>{const r=[];let i=jo[t];i===void 0&&(i=jh(e,t));const s="icons";let a={type:s,provider:e,prefix:t,icons:[]},o=0;return n.forEach((l,u)=>{o+=l.length+1,o>=i&&u>0&&(r.push(a),a={type:s,provider:e,prefix:t,icons:[]},o=l.length),a.icons.push(l)}),r.push(a),r};function qh(e){if(typeof e=="string"){if(Ei[e]===void 0){const t=Fs(e);if(!t)return"/";Ei[e]=t.path}return Ei[e]}return"/"}const Gh=(e,t,n)=>{if(!zo){n("abort",424);return}let r=qh(t.provider);switch(t.type){case"icons":{const s=t.prefix,o=t.icons.join(",");r+=Ko(s+".json",{icons:o});break}case"custom":{const s=t.uri;r+=s.slice(0,1)==="/"?s.slice(1):s;break}default:n("abort",400);return}let i=503;zo(e+r).then(s=>{const a=s.status;if(a!==200){setTimeout(()=>{n(zh(a)?"abort":"next",a)});return}return i=501,s.json()}).then(s=>{if(typeof s!="object"||s===null){setTimeout(()=>{n("next",i)});return}setTimeout(()=>{n("success",s)})}).catch(()=>{n("next",i)})},Wh={prepare:Hh,send:Gh};function Qh(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((i,s)=>i.provider!==s.provider?i.provider.localeCompare(s.provider):i.prefix!==s.prefix?i.prefix.localeCompare(s.prefix):i.name.localeCompare(s.name));let r={provider:"",prefix:"",name:""};return e.forEach(i=>{if(r.name===i.name&&r.prefix===i.prefix&&r.provider===i.provider)return;r=i;const s=i.provider,a=i.prefix,o=i.name;n[s]===void 0&&(n[s]=Object.create(null));const l=n[s];l[a]===void 0&&(l[a]=Br(s,a));const u=l[a];let c;u.icons[o]!==void 0?c=t.loaded:a===""||u.missing[o]!==void 0?c=t.missing:c=t.pending;const f={provider:s,prefix:a,name:o};c.push(f)}),t}const ar=Object.create(null),Ms=Object.create(null);function Ho(e,t){e.forEach(n=>{const r=n.provider;if(ar[r]===void 0)return;const i=ar[r],s=n.prefix,a=i[s];a&&(i[s]=a.filter(o=>o.id!==t))})}function Yh(e,t){Ms[e]===void 0&&(Ms[e]=Object.create(null));const n=Ms[e];n[t]||(n[t]=!0,setTimeout(()=>{if(n[t]=!1,ar[e]===void 0||ar[e][t]===void 0)return;const r=ar[e][t].slice(0);if(!r.length)return;const i=Br(e,t);let s=!1;r.forEach(a=>{const o=a.icons,l=o.pending.length;o.pending=o.pending.filter(u=>{if(u.prefix!==t)return!0;const c=u.name;if(i.icons[c]!==void 0)o.loaded.push({provider:e,prefix:t,name:c});else if(i.missing[c]!==void 0)o.missing.push({provider:e,prefix:t,name:c});else return s=!0,!0;return!1}),o.pending.length!==l&&(s||Ho([{provider:e,prefix:t}],a.id),a.callback(o.loaded.slice(0),o.missing.slice(0),o.pending.slice(0),a.abort))})}))}let Xh=0;function Jh(e,t,n){const r=Xh++,i=Ho.bind(null,n,r);if(!t.pending.length)return i;const s={id:r,icons:t,callback:e,abort:i};return n.forEach(a=>{const o=a.provider,l=a.prefix;ar[o]===void 0&&(ar[o]=Object.create(null));const u=ar[o];u[l]===void 0&&(u[l]=[]),u[l].push(s)}),i}function Zh(e,t=!0,n=!1){const r=[];return e.forEach(i=>{const s=typeof i=="string"?yi(i,!1,n):i;(!t||An(s,n))&&r.push({provider:s.provider,prefix:s.prefix,name:s.name})}),r}var qo={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function $h(e,t,n,r){const i=e.resources.length,s=e.random?Math.floor(Math.random()*i):e.index;let a;if(e.random){let B=e.resources.slice(0);for(a=[];B.length>1;){const Y=Math.floor(Math.random()*B.length);a.push(B[Y]),B=B.slice(0,Y).concat(B.slice(Y+1))}a=a.concat(B)}else a=e.resources.slice(s).concat(e.resources.slice(0,s));const o=Date.now();let l="pending",u=0,c,f=null,h=[],m=[];typeof r=="function"&&m.push(r);function p(){f&&(clearTimeout(f),f=null)}function C(){l==="pending"&&(l="aborted"),p(),h.forEach(B=>{B.status==="pending"&&(B.status="aborted")}),h=[]}function E(B,Y){Y&&(m=[]),typeof B=="function"&&m.push(B)}function _(){return{startTime:o,payload:t,status:l,queriesSent:u,queriesPending:h.length,subscribe:E,abort:C}}function I(){l="failed",m.forEach(B=>{B(void 0,c)})}function T(){h.forEach(B=>{B.status==="pending"&&(B.status="aborted")}),h=[]}function N(B,Y,J){const se=Y!=="success";switch(h=h.filter(ue=>ue!==B),l){case"pending":break;case"failed":if(se||!e.dataAfterTimeout)return;break;default:return}if(Y==="abort"){c=J,I();return}if(se){c=J,h.length||(a.length?O():I());return}if(p(),T(),!e.random){const ue=e.resources.indexOf(B.resource);ue!==-1&&ue!==e.index&&(e.index=ue)}l="completed",m.forEach(ue=>{ue(J)})}function O(){if(l!=="pending")return;p();const B=a.shift();if(B===void 0){if(h.length){f=setTimeout(()=>{p(),l==="pending"&&(T(),I())},e.timeout);return}I();return}const Y={status:"pending",resource:B,callback:(J,se)=>{N(Y,J,se)}};h.push(Y),u++,f=setTimeout(O,e.rotate),n(B,t,Y.callback)}return setTimeout(O),_}function ed(e){if(typeof e!="object"||typeof e.resources!="object"||!(e.resources instanceof Array)||!e.resources.length)throw new Error("Invalid Reduncancy configuration");const t=Object.create(null);let n;for(n in qo)e[n]!==void 0?t[n]=e[n]:t[n]=qo[n];return t}function Go(e){const t=ed(e);let n=[];function r(){n=n.filter(o=>o().status==="pending")}function i(o,l,u){const c=$h(t,o,l,(f,h)=>{r(),u&&u(f,h)});return n.push(c),c}function s(o){const l=n.find(u=>o(u));return l!==void 0?l:null}return{query:i,find:s,setIndex:o=>{t.index=o},getIndex:()=>t.index,cleanup:r}}function Wo(){}const Ks=Object.create(null);function td(e){if(Ks[e]===void 0){const t=Fs(e);if(!t)return;const n=Go(t),r={config:t,redundancy:n};Ks[e]=r}return Ks[e]}function rd(e,t,n){let r,i;if(typeof e=="string"){const s=Os(e);if(!s)return n(void 0,424),Wo;i=s.send;const a=td(e);a&&(r=a.redundancy)}else{const s=Ps(e);if(s){r=Go(s);const a=e.resources?e.resources[0]:"",o=Os(a);o&&(i=o.send)}}return!r||!i?(n(void 0,424),Wo):r.query(t,i,n)().abort}const js={};function Qo(){}const kr=Object.create(null),zs=Object.create(null),Hs=Object.create(null),qs=Object.create(null);function nd(e,t){Hs[e]===void 0&&(Hs[e]=Object.create(null));const n=Hs[e];n[t]||(n[t]=!0,setTimeout(()=>{n[t]=!1,Yh(e,t)}))}const Yo=Object.create(null);function id(e,t,n){function r(){const o=(e===""?"":"@"+e+":")+t,l=Math.floor(Date.now()/6e4);Yo[o]<l&&(Yo[o]=l,console.error('Unable to retrieve icons for "'+o+'" because API is not configured properly.'))}zs[e]===void 0&&(zs[e]=Object.create(null));const i=zs[e];qs[e]===void 0&&(qs[e]=Object.create(null));const s=qs[e];kr[e]===void 0&&(kr[e]=Object.create(null));const a=kr[e];i[t]===void 0?i[t]=n:i[t]=i[t].concat(n).sort(),s[t]||(s[t]=!0,setTimeout(()=>{s[t]=!1;const o=i[t];delete i[t];const l=Os(e);if(!l){r();return}l.prepare(e,t,o).forEach(c=>{rd(e,c,(f,h)=>{const m=Br(e,t);if(typeof f!="object"){if(h!==404)return;const p=Date.now();c.icons.forEach(C=>{m.missing[C]=p})}else try{const p=Ls(m,f);if(!p.length)return;const C=a[t];p.forEach(E=>{delete C[E]}),js.store&&js.store(e,f)}catch(p){console.error(p)}nd(e,t)})})}))}const sd=(e,t)=>{const n=Zh(e,!0,Fo()),r=Qh(n);if(!r.pending.length){let u=!0;return t&&setTimeout(()=>{u&&t(r.loaded,r.missing,r.pending,Qo)}),()=>{u=!1}}const i=Object.create(null),s=[];let a,o;r.pending.forEach(u=>{const c=u.provider,f=u.prefix;if(f===o&&c===a)return;a=c,o=f,s.push({provider:c,prefix:f}),kr[c]===void 0&&(kr[c]=Object.create(null));const h=kr[c];h[f]===void 0&&(h[f]=Object.create(null)),i[c]===void 0&&(i[c]=Object.create(null));const m=i[c];m[f]===void 0&&(m[f]=[])});const l=Date.now();return r.pending.forEach(u=>{const c=u.provider,f=u.prefix,h=u.name,m=kr[c][f];m[h]===void 0&&(m[h]=l,i[c][f].push(h))}),s.forEach(u=>{const c=u.provider,f=u.prefix;i[c][f].length&&id(c,f,i[c][f])}),t?Jh(t,r,s):Qo},Xo="iconify2",Rn="iconify",Jo=Rn+"-count",Zo=Rn+"-version",$o=36e5,ad=168,Gs={local:!0,session:!0};let Ws=!1;const el={local:0,session:0},tl={local:[],session:[]};let xi=typeof window=="undefined"?{}:window;function rl(e){const t=e+"Storage";try{if(xi&&xi[t]&&typeof xi[t].length=="number")return xi[t]}catch{}return Gs[e]=!1,null}function Qs(e,t,n){try{return e.setItem(Jo,n.toString()),el[t]=n,!0}catch{return!1}}function nl(e){const t=e.getItem(Jo);if(t){const n=parseInt(t);return n||0}return 0}function od(e,t){try{e.setItem(Zo,Xo)}catch{}Qs(e,t,0)}function ld(e){try{const t=nl(e);for(let n=0;n<t;n++)e.removeItem(Rn+n.toString())}catch{}}const il=()=>{if(Ws)return;Ws=!0;const e=Math.floor(Date.now()/$o)-ad;function t(n){const r=rl(n);if(!r)return;const i=s=>{const a=Rn+s.toString(),o=r.getItem(a);if(typeof o!="string")return!1;let l=!0;try{const u=JSON.parse(o);if(typeof u!="object"||typeof u.cached!="number"||u.cached<e||typeof u.provider!="string"||typeof u.data!="object"||typeof u.data.prefix!="string")l=!1;else{const c=u.provider,f=u.data.prefix,h=Br(c,f);l=Ls(h,u.data).length>0}}catch{l=!1}return l||r.removeItem(a),l};try{const s=r.getItem(Zo);if(s!==Xo){s&&ld(r),od(r,n);return}let a=nl(r);for(let o=a-1;o>=0;o--)i(o)||(o===a-1?a--:tl[n].push(o));Qs(r,n,a)}catch{}}for(const n in Gs)t(n)},ud=(e,t)=>{Ws||il();function n(r){if(!Gs[r])return!1;const i=rl(r);if(!i)return!1;let s=tl[r].shift();if(s===void 0&&(s=el[r],!Qs(i,r,s+1)))return!1;try{const a={cached:Math.floor(Date.now()/$o),provider:e,data:t};i.setItem(Rn+s.toString(),JSON.stringify(a))}catch{return!1}return!0}!Object.keys(t.icons).length||(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"))},sl=/[\s,]+/;function cd(e,t){t.split(sl).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function fd(e,t){t.split(sl).forEach(n=>{const r=n.trim();switch(r){case"left":case"center":case"right":e.hAlign=r;break;case"top":case"middle":case"bottom":e.vAlign=r;break;case"slice":case"crop":e.slice=!0;break;case"meet":e.slice=!1}})}function hd(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function r(i){for(;i<0;)i+=4;return i%4}if(n===""){const i=parseInt(e);return isNaN(i)?0:r(i)}else if(n!==e){let i=0;switch(n){case"%":i=25;break;case"deg":i=90}if(i){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s=s/i,s%1==0?r(s):0)}}return t}const dd={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"};function pd(e,t){const n=kh(Mo,t),r=Ke({},dd);let i=typeof t.style=="string"?t.style:"";for(let l in t){const u=t[l];if(u!==void 0)switch(l){case"icon":case"style":case"onLoad":break;case"inline":case"hFlip":case"vFlip":n[l]=u===!0||u==="true"||u===1;break;case"flip":typeof u=="string"&&cd(n,u);break;case"align":typeof u=="string"&&fd(n,u);break;case"color":i=i+(i.length>0&&i.trim().slice(-1)!==";"?";":"")+"color: "+u+"; ";break;case"rotate":typeof u=="string"?n[l]=hd(u):typeof u=="number"&&(n[l]=u);break;case"ariaHidden":case"aria-hidden":u!==!0&&u!=="true"&&delete r["aria-hidden"];break;default:if(l.slice(0,3)==="on:")break;Mo[l]===void 0&&(r[l]=u)}}const s=Dh(e,n);for(let l in s.attributes)r[l]=s.attributes[l];s.inline&&(i="vertical-align: -0.125em; "+i),i!==""&&(r.style=i);let a=0,o=t.id;return typeof o=="string"&&(o=o.replace(/-/g,"_")),{attributes:r,body:Vh(s.body,o?()=>o+"ID"+a++:"iconifySvelte")}}Fo(!0);Fh("",Wh);if(typeof document!="undefined"&&typeof window!="undefined"){js.store=ud,il();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!Bh(r))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const r="IconifyProviders["+n+"] is invalid.";try{const i=t[n];if(typeof i!="object"||!i||i.resources===void 0)continue;Mh(n,i)||console.error(r)}catch{console.error(r)}}}}function gd(e,t,n,r,i){function s(){t.loading&&(t.loading.abort(),t.loading=null)}if(typeof e=="object"&&e!==null&&typeof e.body=="string")return t.name="",s(),{data:Rs(e)};let a;if(typeof e!="string"||(a=yi(e,!1,!0))===null)return s(),null;const o=Ih(a);if(o===null)return n&&(!t.loading||t.loading.name!==e)&&(s(),t.name="",t.loading={name:e,abort:sd([a],r)}),null;s(),t.name!==e&&(t.name=e,i&&!t.destroyed&&i(e));const l=["iconify"];return a.prefix!==""&&l.push("iconify--"+a.prefix),a.provider!==""&&l.push("iconify--"+a.provider),{data:o,classes:l}}function vd(e,t){return e?pd(e,t):null}function al(e){let t,n=e[0].body+"",r=[e[0].attributes],i={};for(let s=0;s<r.length;s+=1)i=Nt(i,r[s]);return{c(){t=F("svg"),this.h()},l(s){t=M(s,"svg",{});var a=P(t);a.forEach(k),this.h()},h(){Hr(t,i)},m(s,a){pe(s,t,a),t.innerHTML=n},p(s,a){a&1&&n!==(n=s[0].body+"")&&(t.innerHTML=n),Hr(t,i=ni(r,[a&1&&s[0].attributes]))},d(s){s&&k(t)}}}function yd(e){let t,n=e[0]!==null&&al(e);return{c(){n&&n.c(),t=zr()},l(r){n&&n.l(r),t=zr()},m(r,i){n&&n.m(r,i),pe(r,t,i)},p(r,[i]){r[0]!==null?n?n.p(r,i):(n=al(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:W,o:W,d(r){n&&n.d(r),r&&k(t)}}}function md(e,t,n){const r={name:"",loading:null,destroyed:!1};let i=!1,s=0,a;const o=u=>{typeof t.onLoad=="function"&&t.onLoad(u),so()("load",{icon:u})};function l(){n(3,s++,s)}return Jn(()=>{n(2,i=!0)}),io(()=>{n(1,r.destroyed=!0,r),r.loading&&(r.loading.abort(),n(1,r.loading=null,r))}),e.$$set=u=>{n(6,t=Nt(Nt({},t),Yi(u)))},e.$$.update=()=>{{const u=gd(t.icon,r,i,l,o);n(0,a=u?vd(u.data,t):null),a&&u.classes&&n(0,a.attributes.class=(typeof t.class=="string"?t.class+" ":"")+u.classes.join(" "),a)}},t=Yi(t),[a,r,i,s]}class d1 extends _e{constructor(t){super();xe(this,t,md,yd,Ce,{})}}const p1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"}]}},g1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"}]}},v1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-.464 5.535a1 1 0 10-1.415-1.414 3 3 0 01-4.242 0 1 1 0 00-1.415 1.414 5 5 0 007.072 0z","clip-rule":"evenodd"}]}},y1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 100-2 1 1 0 000 2zm7-1a1 1 0 11-2 0 1 1 0 012 0zm-7.536 5.879a1 1 0 001.415 0 3 3 0 014.242 0 1 1 0 001.415-1.415 5 5 0 00-7.072 0 1 1 0 000 1.415z","clip-rule":"evenodd"}]}},m1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"}]}},C1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"}]}},E1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"}]}},x1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"}]}},_1={default:{a:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}]},solid:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"}]}};function ol(e,t,n){const r=e.slice();return r[5]=t[n],r}function ll(e){let t,n=[e[5]],r={};for(let i=0;i<n.length;i+=1)r=Nt(r,n[i]);return{c(){t=F("path"),this.h()},l(i){t=M(i,"path",{}),P(t).forEach(k),this.h()},h(){Hr(t,r)},m(i,s){pe(i,t,s)},p(i,s){Hr(t,r=ni(n,[s&2&&i[5]]))},d(i){i&&k(t)}}}function Cd(e){var a,o,l;let t,n=(o=(a=e[1])==null?void 0:a.path)!=null?o:[],r=[];for(let u=0;u<n.length;u+=1)r[u]=ll(ol(e,n,u));let i=[(l=e[1])==null?void 0:l.a,{xmlns:"http://www.w3.org/2000/svg"},{width:e[0]},{height:e[0]},{"aria-hidden":"true"},e[2]],s={};for(let u=0;u<i.length;u+=1)s=Nt(s,i[u]);return{c(){t=F("svg");for(let u=0;u<r.length;u+=1)r[u].c();this.h()},l(u){t=M(u,"svg",{xmlns:!0,width:!0,height:!0,"aria-hidden":!0});var c=P(t);for(let f=0;f<r.length;f+=1)r[f].l(c);c.forEach(k),this.h()},h(){Hr(t,s)},m(u,c){pe(u,t,c);for(let f=0;f<r.length;f+=1)r[f].m(t,null)},p(u,[c]){var f,h,m;if(c&2){n=(h=(f=u[1])==null?void 0:f.path)!=null?h:[];let p;for(p=0;p<n.length;p+=1){const C=ol(u,n,p);r[p]?r[p].p(C,c):(r[p]=ll(C),r[p].c(),r[p].m(t,null))}for(;p<r.length;p+=1)r[p].d(1);r.length=n.length}Hr(t,s=ni(i,[c&2&&((m=u[1])==null?void 0:m.a),{xmlns:"http://www.w3.org/2000/svg"},c&1&&{width:u[0]},c&1&&{height:u[0]},{"aria-hidden":"true"},c&4&&u[2]]))},i:W,o:W,d(u){u&&k(t),Wu(r,u)}}}function Ed(e,t,n){let r;const i=["src","size","solid"];let s=Wa(t,i),{src:a}=t,{size:o="100%"}=t,{solid:l=!1}=t;if(o!=="100%"&&o.slice(-1)!="x"&&o.slice(-1)!="m"&&o.slice(-1)!="%")try{o=parseInt(o)+"px"}catch{o="100%"}return e.$$set=u=>{t=Nt(Nt({},t),Yi(u)),n(2,s=Wa(t,i)),"src"in u&&n(3,a=u.src),"size"in u&&n(0,o=u.size),"solid"in u&&n(4,l=u.solid)},e.$$.update=()=>{e.$$.dirty&24&&n(1,r=a==null?void 0:a[l?"solid":"default"])},[o,r,s,a,l]}class b1 extends _e{constructor(t){super();xe(this,t,Ed,Cd,Ce,{src:3,size:0,solid:4})}}const xd=e=>({intersecting:e&1,entry:e&2,observer:e&4}),ul=e=>({intersecting:e[0],entry:e[1],observer:e[2]});function _d(e){let t;const n=e[9].default,r=Uu(n,e,e[8],ul);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,s){r&&r.m(i,s),t=!0},p(i,[s]){r&&r.p&&(!t||s&263)&&Pu(r,n,i,i[8],t?Ou(n,i[8],s,xd):Vu(i[8]),ul)},i(i){t||(Vt(r,i),t=!0)},o(i){Jt(r,i),t=!1},d(i){r&&r.d(i)}}}function bd(e,t,n){let{$$slots:r={},$$scope:i}=t,{element:s=null}=t,{once:a=!1}=t,{intersecting:o=!1}=t,{root:l=null}=t,{rootMargin:u="0px"}=t,{threshold:c=0}=t,{entry:f=null}=t,{observer:h=null}=t;const m=so();let p=null,C=null;const E=()=>{n(2,h=new IntersectionObserver(_=>{_.forEach(I=>{n(1,f=I),n(0,o=I.isIntersecting)})},{root:l,rootMargin:u,threshold:c}))};return Jn(()=>(E(),()=>{h&&(h.disconnect(),n(2,h=null))})),tc(async()=>{f!==null&&(m("observe",f),f.isIntersecting&&(m("intersect",f),a&&h.unobserve(s))),await rc(),s!==null&&s!==C&&(h.observe(s),C!==null&&h.unobserve(C),C=s),p&&u!==p&&(h.disconnect(),C=null,E()),p=u}),e.$$set=_=>{"element"in _&&n(3,s=_.element),"once"in _&&n(4,a=_.once),"intersecting"in _&&n(0,o=_.intersecting),"root"in _&&n(5,l=_.root),"rootMargin"in _&&n(6,u=_.rootMargin),"threshold"in _&&n(7,c=_.threshold),"entry"in _&&n(1,f=_.entry),"observer"in _&&n(2,h=_.observer),"$$scope"in _&&n(8,i=_.$$scope)},[o,f,h,s,a,l,u,c,i,r]}class S1 extends _e{constructor(t){super();xe(this,t,bd,_d,Ce,{element:3,once:4,intersecting:0,root:5,rootMargin:6,threshold:7,entry:1,observer:2})}}var ae={options:{usePureJavaScript:!1}},Ys={},Sd=Ys,cl={};Ys.encode=function(e,t,n){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(e instanceof Uint8Array))r=Td(e,t);else{var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var l=0,u=e[i];l<o.length;++l)u+=o[l]<<8,o[l]=u%s,u=u/s|0;for(;u>0;)o.push(u%s),u=u/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)r+=a;for(i=o.length-1;i>=0;--i)r+=t[o[i]]}if(n){var c=new RegExp(".{1,"+n+"}","g");r=r.match(c).join(`\r
`)}return r};Ys.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var n=cl[t];if(!n){n=cl[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),a=[0],r=0;r<e.length;r++){var o=n[e.charCodeAt(r)];if(o===void 0)return;for(var l=0,u=o;l<a.length;++l)u+=a[l]*i,a[l]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var c=0;e[c]===s&&c<e.length-1;++c)a.push(0);return typeof Buffer!="undefined"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function Td(e,t){var n=0,r=t.length,i=t.charAt(0),s=[0];for(n=0;n<e.length();++n){for(var a=0,o=e.at(n);a<s.length;++a)o+=s[a]<<8,s[a]=o%r,o=o/r|0;for(;o>0;)s.push(o%r),o=o/r|0}var l="";for(n=0;e.at(n)===0&&n<e.length()-1;++n)l+=i;for(n=s.length-1;n>=0;--n)l+=t[s[n]];return l}var fl=ae,hl=Sd,S=fl.util=fl.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){S.nextTick=process.nextTick,typeof setImmediate=="function"?S.setImmediate=setImmediate:S.setImmediate=S.nextTick;return}if(typeof setImmediate=="function"){S.setImmediate=function(){return setImmediate.apply(void 0,arguments)},S.nextTick=function(a){return setImmediate(a)};return}if(S.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(o){if(o.source===window&&o.data===e){o.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(u){u()})}};var e="forge.setImmediate",t=[];S.setImmediate=function(o){t.push(o),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var n=Date.now(),r=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var o=t.slice();t.length=0,o.forEach(function(l){l()})}).observe(i,{attributes:!0});var s=S.setImmediate;S.setImmediate=function(o){Date.now()-n>15?(n=Date.now(),s(o)):(t.push(o),t.length===1&&i.setAttribute("a",r=!r))}}S.nextTick=S.setImmediate})();S.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;S.globalScope=function(){return S.isNodejs?fo:typeof self=="undefined"?window:self}();S.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};S.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};S.isArrayBufferView=function(e){return e&&S.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Nn(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}S.ByteBuffer=Xs;function Xs(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(S.isArrayBuffer(e)||S.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof Xs||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}S.ByteStringBuffer=Xs;var wd=4096;S.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>wd&&(this.data.substr(0,1),this._constructedStringLength=0)};S.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};S.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};S.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};S.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this};S.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};S.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(S.encodeUtf8(e))};S.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};S.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};S.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};S.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};S.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};S.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};S.ByteStringBuffer.prototype.putInt=function(e,t){Nn(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)};S.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};S.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};S.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};S.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};S.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};S.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};S.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};S.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};S.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};S.ByteStringBuffer.prototype.getInt=function(e){Nn(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};S.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};S.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};S.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};S.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};S.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};S.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};S.ByteStringBuffer.prototype.copy=function(){var e=S.createBuffer(this.data);return e.read=this.read,e};S.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};S.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};S.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};S.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};S.ByteStringBuffer.prototype.toString=function(){return S.decodeUtf8(this.bytes())};function Id(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=S.isArrayBuffer(e),r=S.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}S.DataBuffer=Id;S.DataBuffer.prototype.length=function(){return this.write-this.read};S.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};S.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this};S.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};S.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this};S.DataBuffer.prototype.putBytes=function(e,t){if(S.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(S.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof S.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&S.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(e instanceof S.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=S.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=S.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=S.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=S.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=S.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};S.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};S.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};S.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};S.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};S.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};S.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};S.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};S.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};S.DataBuffer.prototype.putInt=function(e,t){Nn(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};S.DataBuffer.prototype.putSignedInt=function(e,t){return Nn(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};S.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};S.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};S.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};S.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};S.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};S.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};S.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};S.DataBuffer.prototype.getInt=function(e){Nn(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};S.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};S.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};S.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};S.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};S.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};S.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};S.DataBuffer.prototype.copy=function(){return new S.DataBuffer(this)};S.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};S.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};S.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};S.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e};S.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return S.binary.raw.encode(t);if(e==="hex")return S.binary.hex.encode(t);if(e==="base64")return S.binary.base64.encode(t);if(e==="utf8")return S.text.utf8.decode(t);if(e==="utf16")return S.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};S.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=S.encodeUtf8(e)),new S.ByteBuffer(e)};S.fillString=function(e,t){for(var n="";t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n};S.xorBytes=function(e,t,n){for(var r="",i="",s="",a=0,o=0;n>0;--n,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(r+=s,s="",o=0),s+=String.fromCharCode(i),++o;return r+=s,r};S.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t};S.bytesToHex=function(e){return S.createBuffer(e).toHex()};S.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],dl="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";S.encode64=function(e,t){for(var n="",r="",i,s,a,o=0;o<e.length;)i=e.charCodeAt(o++),s=e.charCodeAt(o++),a=e.charCodeAt(o++),n+=or.charAt(i>>2),n+=or.charAt((i&3)<<4|s>>4),isNaN(s)?n+="==":(n+=or.charAt((s&15)<<2|a>>6),n+=isNaN(a)?"=":or.charAt(a&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};S.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",n,r,i,s,a=0;a<e.length;)n=lr[e.charCodeAt(a++)-43],r=lr[e.charCodeAt(a++)-43],i=lr[e.charCodeAt(a++)-43],s=lr[e.charCodeAt(a++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};S.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};S.decodeUtf8=function(e){return decodeURIComponent(escape(e))};S.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:hl.encode,decode:hl.decode}};S.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};S.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,s=0;s<e.length;++s)r[i++]=e.charCodeAt(s);return t?i-n:r};S.binary.hex.encode=S.bytesToHex;S.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,s=n;for(e.length&1&&(i=1,r[s++]=parseInt(e[0],16));i<e.length;i+=2)r[s++]=parseInt(e.substr(i,2),16);return t?s-n:r};S.binary.base64.encode=function(e,t){for(var n="",r="",i,s,a,o=0;o<e.byteLength;)i=e[o++],s=e[o++],a=e[o++],n+=or.charAt(i>>2),n+=or.charAt((i&3)<<4|s>>4),isNaN(s)?n+="==":(n+=or.charAt((s&15)<<2|a>>6),n+=isNaN(a)?"=":or.charAt(a&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};S.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,s,a,o,l=0,u=n;l<e.length;)i=lr[e.charCodeAt(l++)-43],s=lr[e.charCodeAt(l++)-43],a=lr[e.charCodeAt(l++)-43],o=lr[e.charCodeAt(l++)-43],r[u++]=i<<2|s>>4,a!==64&&(r[u++]=(s&15)<<4|a>>2,o!==64&&(r[u++]=(a&3)<<6|o));return t?u-n:r.subarray(0,u)};S.binary.base58.encode=function(e,t){return S.binary.baseN.encode(e,dl,t)};S.binary.base58.decode=function(e,t){return S.binary.baseN.decode(e,dl,t)};S.text={utf8:{},utf16:{}};S.text.utf8.encode=function(e,t,n){e=S.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,s=0;s<e.length;++s)r[i++]=e.charCodeAt(s);return t?i-n:r};S.text.utf8.decode=function(e){return S.decodeUtf8(String.fromCharCode.apply(null,e))};S.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var s=n,a=n,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-n:r};S.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};S.deflate=function(e,t,n){if(t=S.decode64(e.deflate(S.encode64(t)).rval),n){var r=2,i=t.charCodeAt(1);i&32&&(r=6),t=t.substring(r,t.length-4)}return t};S.inflate=function(e,t,n){var r=e.inflate(S.encode64(t)).rval;return r===null?null:S.decode64(r)};var Js=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(n===null?r=e.removeItem(t):(n=S.encode64(JSON.stringify(n)),r=e.setItem(t,n)),typeof r!="undefined"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},Zs=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(S.decode64(n))),n},Ad=function(e,t,n,r){var i=Zs(e,t);i===null&&(i={}),i[n]=r,Js(e,t,i)},Bd=function(e,t,n){var r=Zs(e,t);return r!==null&&(r=n in r?r[n]:null),r},kd=function(e,t,n){var r=Zs(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var s in r){i=!1;break}i&&(r=null),Js(e,t,r)}},Rd=function(e,t){Js(e,t,null)},_i=function(e,t,n){var r=null;typeof n=="undefined"&&(n=["web","flash"]);var i,s=!1,a=null;for(var o in n){i=n[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,r=e.apply(this,t),s=!0)}catch(l){a=l}if(s)break}if(!s)throw a;return r};S.setItem=function(e,t,n,r,i){_i(Ad,arguments,i)};S.getItem=function(e,t,n,r){return _i(Bd,arguments,r)};S.removeItem=function(e,t,n,r){_i(kd,arguments,r)};S.clearItems=function(e,t,n){_i(Rd,arguments,n)};S.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=n===null?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?(r.port!==80&&r.scheme==="http"||r.port!==443&&r.scheme==="https")&&(r.fullHost+=":"+r.port):r.scheme==="http"?r.port=80:r.scheme==="https"&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var bi=null;S.getQueryVariables=function(e){var t=function(r){for(var i={},s=r.split("&"),a=0;a<s.length;a++){var o=s[a].indexOf("="),l,u;o>0?(l=s[a].substring(0,o),u=s[a].substring(o+1)):(l=s[a],u=null),l in i||(i[l]=[]),!(l in Object.prototype)&&u!==null&&i[l].push(unescape(u))}return i},n;return typeof e=="undefined"?(bi===null&&(typeof window!="undefined"&&window.location&&window.location.search?bi=t(window.location.search.substring(1)):bi={}),n=bi):n=t(e),n};S.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");r>0&&(t=e.substring(0,r),n=e.substring(r+1));var i=t.split("/");i.length>0&&i[0]===""&&i.shift();var s=n===""?{}:S.getQueryVariables(n);return{pathString:t,queryString:n,path:i,query:s}};S.makeRequest=function(e){var t=S.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(r){return typeof r=="undefined"?t.path:t.path[r]},getQuery:function(r,i){var s;return typeof r=="undefined"?s=t.query:(s=t.query[r],s&&typeof i!="undefined"&&(s=s[i])),s},getQueryLast:function(r,i){var s,a=n.getQuery(r);return a?s=a[a.length-1]:s=i,s}};return n};S.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")};S.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};S.format=function(e){for(var t=/%./g,n,r,i=0,s=[],a=0;n=t.exec(e);){r=e.substring(a,t.lastIndex-2),r.length>0&&s.push(r),a=t.lastIndex;var o=n[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(e.substring(a)),s.join("")};S.formatNumber=function(e,t,n,r){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=n===void 0?",":n,o=r===void 0?".":r,l=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",c=u.length>3?u.length%3:0;return l+(c?u.substr(0,c)+o:"")+u.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-u).toFixed(s).slice(2):"")};S.formatSize=function(e){return e>=1073741824?e=S.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=S.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=S.formatNumber(e/1024,0)+" KiB":e=S.formatNumber(e,0)+" bytes",e};S.bytesFromIP=function(e){return e.indexOf(".")!==-1?S.bytesFromIPv4(e):e.indexOf(":")!==-1?S.bytesFromIPv6(e):null};S.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=S.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()};S.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(a){return a.length===0&&++t,!0});for(var n=(8-e.length+t)*2,r=S.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){r.fillWithByte(0,n),n=0;continue}var s=S.hexToBytes(e[i]);s.length<2&&r.putByte(0),r.putBytes(s)}return r.getBytes()};S.bytesToIP=function(e){return e.length===4?S.bytesToIPv4(e):e.length===16?S.bytesToIPv6(e):null};S.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")};S.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var s=S.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var a=n[n.length-1],o=t.length;!a||o!==a.end+1?n.push({start:o,end:o}):(a.end=o,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(s)}if(n.length>0){var l=n[r];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};S.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in S&&!e.update)return t(null,S.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return S.cores=navigator.hardwareConcurrency,t(null,S.cores);if(typeof Worker=="undefined")return S.cores=1,t(null,S.cores);if(typeof Blob=="undefined")return S.cores=2,t(null,S.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){var o=Date.now(),l=o+4;self.postMessage({st:o,et:l})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(a,o,l){if(o===0){var u=Math.floor(a.reduce(function(c,f){return c+f},0)/a.length);return S.cores=Math.max(1,u),URL.revokeObjectURL(n),t(null,S.cores)}i(l,function(c,f){a.push(s(l,f)),r(a,o-1,l)})}function i(a,o){for(var l=[],u=[],c=0;c<a;++c){var f=new Worker(n);f.addEventListener("message",function(h){if(u.push(h.data),u.length===a){for(var m=0;m<a;++m)l[m].terminate();o(null,u)}}),l.push(f)}for(var c=0;c<a;++c)l[c].postMessage(c)}function s(a,o){for(var l=[],u=0;u<a;++u)for(var c=o[u],f=l[u]=[],h=0;h<a;++h)if(u!==h){var m=o[h];(c.st>m.st&&c.st<m.et||m.st>c.st&&m.st<c.et)&&f.push(h)}return l.reduce(function(p,C){return Math.max(p,C.length)},0)}};var je=ae;je.cipher=je.cipher||{};je.cipher.algorithms=je.cipher.algorithms||{};je.cipher.createCipher=function(e,t){var n=e;if(typeof n=="string"&&(n=je.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new je.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})};je.cipher.createDecipher=function(e,t){var n=e;if(typeof n=="string"&&(n=je.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new je.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})};je.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),je.cipher.algorithms[e]=t};je.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in je.cipher.algorithms?je.cipher.algorithms[e]:null};var $s=je.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};$s.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=je.util.createBuffer(),this.output=e.output||je.util.createBuffer(),this.mode.start(t)};$s.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};$s.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return e(this.blockSize,n,!1)},this.mode.unpad=function(n){return e(this.blockSize,n,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};var ze=ae;ze.cipher=ze.cipher||{};var ce=ze.cipher.modes=ze.cipher.modes||{};ce.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ce.ecb.prototype.start=function(e){};ce.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ce.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ce.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ce.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ce.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ce.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Si(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ce.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};ce.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};ce.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ce.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ce.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ze.util.createBuffer(),this._partialBytes=0};ce.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Si(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ce.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ce.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ce.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ze.util.createBuffer(),this._partialBytes=0};ce.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Si(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ce.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ce.ofb.prototype.decrypt=ce.ofb.prototype.encrypt;ce.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ze.util.createBuffer(),this._partialBytes=0};ce.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Si(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ce.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}Ti(this._inBlock)};ce.ctr.prototype.decrypt=ce.ctr.prototype.encrypt;ce.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ze.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ce.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=ze.util.createBuffer(e.iv);this._cipherLength=0;var n;if("additionalData"in e?n=ze.util.createBuffer(e.additionalData):n=ze.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=ze.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=t.length();if(r===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ea(r*8)))}this._inBlock=this._j0.slice(0),Ti(this._inBlock),this._partialBytes=0,n=ze.util.createBuffer(n),this._aDataLength=ea(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};ce.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-r)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ti(this._inBlock)};ce.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ti(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};ce.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=ze.util.createBuffer();var r=this._aDataLength.concat(ea(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};ce.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};ce.gcm.prototype.pow=function(e,t){for(var n=e[3]&1,r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)};ce.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,s=this._m[n][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};ce.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)};ce.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],l=a/r|0,u=(r-1-a%r)*t;o[l]=1<<t-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,e),t)}return s};ce.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var s=r>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<r;){for(var a=1;a<s;++a){var o=i[s],l=i[a];i[s+a]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=r+1;s<n;++s){var u=i[s^r];i[s]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function Si(e,t){if(typeof e=="string"&&(e=ze.util.createBuffer(e)),ze.util.isArray(e)&&e.length>4){var n=e;e=ze.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!ze.util.isArray(e)){for(var i=[],s=t/4,r=0;r<s;++r)i.push(e.getInt32());e=i}return e}function Ti(e){e[e.length-1]=e[e.length-1]+1&4294967295}function ea(e){return[e/4294967296|0,e&4294967295]}var Ie=ae;Ie.aes=Ie.aes||{};Ie.aes.startEncrypting=function(e,t,n,r){var i=wi({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i};Ie.aes.createEncryptionCipher=function(e,t){return wi({key:e,output:null,decrypt:!1,mode:t})};Ie.aes.startDecrypting=function(e,t,n,r){var i=wi({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i};Ie.aes.createDecryptionCipher=function(e,t){return wi({key:e,output:null,decrypt:!0,mode:t})};Ie.aes.Algorithm=function(e,t){ta||gl();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(r,i){return na(n._w,r,i,!1)},decrypt:function(r,i){return na(n._w,r,i,!0)}}}),n._init=!1};Ie.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Ie.util.createBuffer(t);else if(Ie.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=Ie.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(!Ie.util.isArray(t)){n=t,t=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)t.push(n.getInt32())}}if(!Ie.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=vl(t,e.decrypt&&!a),this._init=!0}};Ie.aes._expandKey=function(e,t){return ta||gl(),vl(e,t)};Ie.aes._updateBlock=na;Zr("AES-ECB",Ie.cipher.modes.ecb);Zr("AES-CBC",Ie.cipher.modes.cbc);Zr("AES-CFB",Ie.cipher.modes.cfb);Zr("AES-OFB",Ie.cipher.modes.ofb);Zr("AES-CTR",Ie.cipher.modes.ctr);Zr("AES-GCM",Ie.cipher.modes.gcm);function Zr(e,t){var n=function(){return new Ie.aes.Algorithm(e,t)};Ie.cipher.registerAlgorithm(e,n)}var ta=!1,$r=4,dt,ra,pl,Rr,Dt;function gl(){ta=!0,pl=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;dt=new Array(256),ra=new Array(256),Rr=new Array(4),Dt=new Array(4);for(var t=0;t<4;++t)Rr[t]=new Array(256),Dt[t]=new Array(256);for(var n=0,r=0,i,s,a,o,l,u,c,t=0;t<256;++t){o=r^r<<1^r<<2^r<<3^r<<4,o=o>>8^o&255^99,dt[n]=o,ra[o]=n,l=e[o],i=e[n],s=e[i],a=e[s],u=l<<24^o<<16^o<<8^(o^l),c=(i^s^a)<<24^(n^a)<<16^(n^s^a)<<8^(n^i^a);for(var f=0;f<4;++f)Rr[f][n]=u,Dt[f][o]=c,u=u<<24|u>>>8,c=c<<24|c>>>8;n===0?n=r=1:(n=i^e[e[e[i^a]]],r^=e[e[r]])}}function vl(e,t){for(var n=e.slice(0),r,i=1,s=n.length,a=s+6+1,o=$r*a,l=s;l<o;++l)r=n[l-1],l%s==0?(r=dt[r>>>16&255]<<24^dt[r>>>8&255]<<16^dt[r&255]<<8^dt[r>>>24]^pl[i]<<24,i++):s>6&&l%s==4&&(r=dt[r>>>24]<<24^dt[r>>>16&255]<<16^dt[r>>>8&255]<<8^dt[r&255]),n[l]=n[l-s]^r;if(t){var u,c=Dt[0],f=Dt[1],h=Dt[2],m=Dt[3],p=n.slice(0);o=n.length;for(var l=0,C=o-$r;l<o;l+=$r,C-=$r)if(l===0||l===o-$r)p[l]=n[C],p[l+1]=n[C+3],p[l+2]=n[C+2],p[l+3]=n[C+1];else for(var E=0;E<$r;++E)u=n[C+E],p[l+(3&-E)]=c[dt[u>>>24]]^f[dt[u>>>16&255]]^h[dt[u>>>8&255]]^m[dt[u&255]];n=p}return n}function na(e,t,n,r){var i=e.length/4-1,s,a,o,l,u;r?(s=Dt[0],a=Dt[1],o=Dt[2],l=Dt[3],u=ra):(s=Rr[0],a=Rr[1],o=Rr[2],l=Rr[3],u=dt);var c,f,h,m,p,C,E;c=t[0]^e[0],f=t[r?3:1]^e[1],h=t[2]^e[2],m=t[r?1:3]^e[3];for(var _=3,I=1;I<i;++I)p=s[c>>>24]^a[f>>>16&255]^o[h>>>8&255]^l[m&255]^e[++_],C=s[f>>>24]^a[h>>>16&255]^o[m>>>8&255]^l[c&255]^e[++_],E=s[h>>>24]^a[m>>>16&255]^o[c>>>8&255]^l[f&255]^e[++_],m=s[m>>>24]^a[c>>>16&255]^o[f>>>8&255]^l[h&255]^e[++_],c=p,f=C,h=E;n[0]=u[c>>>24]<<24^u[f>>>16&255]<<16^u[h>>>8&255]<<8^u[m&255]^e[++_],n[r?3:1]=u[f>>>24]<<24^u[h>>>16&255]<<16^u[m>>>8&255]<<8^u[c&255]^e[++_],n[2]=u[h>>>24]<<24^u[m>>>16&255]<<16^u[c>>>8&255]<<8^u[f&255]^e[++_],n[r?1:3]=u[m>>>24]<<24^u[c>>>16&255]<<16^u[f>>>8&255]<<8^u[h&255]^e[++_]}function wi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,r;e.decrypt?r=Ie.cipher.createDecipher(n,e.key):r=Ie.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(s,a){var o=null;a instanceof Ie.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(r,a)},r}var Ln=ae;Ln.pki=Ln.pki||{};var ia=Ln.pki.oids=Ln.oids=Ln.oids||{};function V(e,t){ia[e]=t,ia[t]=e}function be(e,t){ia[e]=t}V("1.2.840.113549.1.1.1","rsaEncryption");V("1.2.840.113549.1.1.4","md5WithRSAEncryption");V("1.2.840.113549.1.1.5","sha1WithRSAEncryption");V("1.2.840.113549.1.1.7","RSAES-OAEP");V("1.2.840.113549.1.1.8","mgf1");V("1.2.840.113549.1.1.9","pSpecified");V("1.2.840.113549.1.1.10","RSASSA-PSS");V("1.2.840.113549.1.1.11","sha256WithRSAEncryption");V("1.2.840.113549.1.1.12","sha384WithRSAEncryption");V("1.2.840.113549.1.1.13","sha512WithRSAEncryption");V("1.3.101.112","EdDSA25519");V("1.2.840.10040.4.3","dsa-with-sha1");V("1.3.14.3.2.7","desCBC");V("1.3.14.3.2.26","sha1");V("2.16.840.1.101.3.4.2.1","sha256");V("2.16.840.1.101.3.4.2.2","sha384");V("2.16.840.1.101.3.4.2.3","sha512");V("1.2.840.113549.2.5","md5");V("1.2.840.113549.1.7.1","data");V("1.2.840.113549.1.7.2","signedData");V("1.2.840.113549.1.7.3","envelopedData");V("1.2.840.113549.1.7.4","signedAndEnvelopedData");V("1.2.840.113549.1.7.5","digestedData");V("1.2.840.113549.1.7.6","encryptedData");V("1.2.840.113549.1.9.1","emailAddress");V("1.2.840.113549.1.9.2","unstructuredName");V("1.2.840.113549.1.9.3","contentType");V("1.2.840.113549.1.9.4","messageDigest");V("1.2.840.113549.1.9.5","signingTime");V("1.2.840.113549.1.9.6","counterSignature");V("1.2.840.113549.1.9.7","challengePassword");V("1.2.840.113549.1.9.8","unstructuredAddress");V("1.2.840.113549.1.9.14","extensionRequest");V("1.2.840.113549.1.9.20","friendlyName");V("1.2.840.113549.1.9.21","localKeyId");V("1.2.840.113549.1.9.22.1","x509Certificate");V("1.2.840.113549.1.12.10.1.1","keyBag");V("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");V("1.2.840.113549.1.12.10.1.3","certBag");V("1.2.840.113549.1.12.10.1.4","crlBag");V("1.2.840.113549.1.12.10.1.5","secretBag");V("1.2.840.113549.1.12.10.1.6","safeContentsBag");V("1.2.840.113549.1.5.13","pkcs5PBES2");V("1.2.840.113549.1.5.12","pkcs5PBKDF2");V("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");V("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");V("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");V("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");V("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");V("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");V("1.2.840.113549.2.7","hmacWithSHA1");V("1.2.840.113549.2.8","hmacWithSHA224");V("1.2.840.113549.2.9","hmacWithSHA256");V("1.2.840.113549.2.10","hmacWithSHA384");V("1.2.840.113549.2.11","hmacWithSHA512");V("1.2.840.113549.3.7","des-EDE3-CBC");V("2.16.840.1.101.3.4.1.2","aes128-CBC");V("2.16.840.1.101.3.4.1.22","aes192-CBC");V("2.16.840.1.101.3.4.1.42","aes256-CBC");V("2.5.4.3","commonName");V("2.5.4.5","serialName");V("2.5.4.6","countryName");V("2.5.4.7","localityName");V("2.5.4.8","stateOrProvinceName");V("2.5.4.9","streetAddress");V("2.5.4.10","organizationName");V("2.5.4.11","organizationalUnitName");V("2.5.4.13","description");V("2.5.4.15","businessCategory");V("2.5.4.17","postalCode");V("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");V("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");V("2.16.840.1.113730.1.1","nsCertType");V("2.16.840.1.113730.1.13","nsComment");be("2.5.29.1","authorityKeyIdentifier");be("2.5.29.2","keyAttributes");be("2.5.29.3","certificatePolicies");be("2.5.29.4","keyUsageRestriction");be("2.5.29.5","policyMapping");be("2.5.29.6","subtreesConstraint");be("2.5.29.7","subjectAltName");be("2.5.29.8","issuerAltName");be("2.5.29.9","subjectDirectoryAttributes");be("2.5.29.10","basicConstraints");be("2.5.29.11","nameConstraints");be("2.5.29.12","policyConstraints");be("2.5.29.13","basicConstraints");V("2.5.29.14","subjectKeyIdentifier");V("2.5.29.15","keyUsage");be("2.5.29.16","privateKeyUsagePeriod");V("2.5.29.17","subjectAltName");V("2.5.29.18","issuerAltName");V("2.5.29.19","basicConstraints");be("2.5.29.20","cRLNumber");be("2.5.29.21","cRLReason");be("2.5.29.22","expirationDate");be("2.5.29.23","instructionCode");be("2.5.29.24","invalidityDate");be("2.5.29.25","cRLDistributionPoints");be("2.5.29.26","issuingDistributionPoint");be("2.5.29.27","deltaCRLIndicator");be("2.5.29.28","issuingDistributionPoint");be("2.5.29.29","certificateIssuer");be("2.5.29.30","nameConstraints");V("2.5.29.31","cRLDistributionPoints");V("2.5.29.32","certificatePolicies");be("2.5.29.33","policyMappings");be("2.5.29.34","policyConstraints");V("2.5.29.35","authorityKeyIdentifier");be("2.5.29.36","policyConstraints");V("2.5.29.37","extKeyUsage");be("2.5.29.46","freshestCRL");be("2.5.29.54","inhibitAnyPolicy");V("1.3.6.1.4.1.11129.2.4.2","timestampList");V("1.3.6.1.5.5.7.1.1","authorityInfoAccess");V("1.3.6.1.5.5.7.3.1","serverAuth");V("1.3.6.1.5.5.7.3.2","clientAuth");V("1.3.6.1.5.5.7.3.3","codeSigning");V("1.3.6.1.5.5.7.3.4","emailProtection");V("1.3.6.1.5.5.7.3.8","timeStamping");var Le=ae,H=Le.asn1=Le.asn1||{};H.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};H.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};H.create=function(e,t,n,r,i){if(Le.util.isArray(r)){for(var s=[],a=0;a<r.length;++a)r[a]!==void 0&&s.push(r[a]);r=s}var o={tagClass:e,type:t,constructed:n,composed:n||Le.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=H.copy(o)),o};H.copy=function(e,t){var n;if(Le.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(H.copy(e[r],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:H.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)};H.equals=function(e,t,n){if(Le.util.isArray(e)){if(!Le.util.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!H.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&H.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};H.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n}};function Dn(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}var Nd=function(e,t){var n=e.getByte();if(t--,n!==128){var r,i=n&128;if(!i)r=n;else{var s=n&127;Dn(e,t,s),r=e.getInt(s<<3)}if(r<0)throw new Error("Negative length: "+r);return r}};H.fromDer=function(e,t){return t===void 0&&(t={strict:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Le.util.createBuffer(e)),Ii(e,e.length(),0,t)};function Ii(e,t,n,r){var i;Dn(e,t,2);var s=e.getByte();t--;var a=s&192,o=s&31;i=e.length();var l=Nd(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=l,u}l=t}var c,f,h=(s&32)==32;if(h)if(c=[],l===void 0)for(;;){if(Dn(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),c.push(Ii(e,t,n+1,r)),t-=i-e.length()}else for(;l>0;)i=e.length(),c.push(Ii(e,l,n+1,r)),t-=i-e.length(),l-=i-e.length();if(c===void 0&&a===H.Class.UNIVERSAL&&o===H.Type.BITSTRING&&(f=e.bytes(l)),c===void 0&&r.decodeBitStrings&&a===H.Class.UNIVERSAL&&o===H.Type.BITSTRING&&l>1){var m=e.read,p=t,C=0;if(o===H.Type.BITSTRING&&(Dn(e,t,1),C=e.getByte(),t--),C===0)try{i=e.length();var E={verbose:r.verbose,strict:!0,decodeBitStrings:!0},_=Ii(e,t,n+1,E),I=i-e.length();t-=I,o==H.Type.BITSTRING&&I++;var T=_.tagClass;I===l&&(T===H.Class.UNIVERSAL||T===H.Class.CONTEXT_SPECIFIC)&&(c=[_])}catch{}c===void 0&&(e.read=m,t=p)}if(c===void 0){if(l===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(o===H.Type.BMPSTRING)for(c="";l>0;l-=2)Dn(e,t,2),c+=String.fromCharCode(e.getInt16()),t-=2;else c=e.getBytes(l)}var N=f===void 0?null:{bitStringContents:f};return H.create(a,o,h,c,N)}H.toDer=function(e){var t=Le.util.createBuffer(),n=e.tagClass|e.type,r=Le.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=H.equals(e,e.original))),i)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&r.putBuffer(H.toDer(e.value[s]))}else if(e.type===H.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)r.putInt16(e.value.charCodeAt(s));else e.type===H.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?r.putBytes(e.value.substr(1)):r.putBytes(e.value);if(t.putByte(n),r.length()<=127)t.putByte(r.length()&127);else{var a=r.length(),o="";do o+=String.fromCharCode(a&255),a=a>>>8;while(a>0);t.putByte(o.length|128);for(var s=o.length-1;s>=0;--s)t.putByte(o.charCodeAt(s))}return t.putBuffer(r),t};H.oidToDer=function(e){var t=e.split("."),n=Le.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r,i,s,a,o=2;o<t.length;++o){r=!0,i=[],s=parseInt(t[o],10);do a=s&127,s=s>>>7,r||(a|=128),i.push(a),r=!1;while(s>0);for(var l=i.length-1;l>=0;--l)n.putByte(i[l])}return n};H.derToOid=function(e){var t;typeof e=="string"&&(e=Le.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)n=e.getByte(),r=r<<7,n&128?r+=n&127:(t+="."+(r+n),r=0);return t};H.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var l=e.charAt(10),u=10;l!=="+"&&l!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(s,a,o,0),u&&(l=e.charAt(u),l==="+"||l==="-")){var c=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),h=c*60+f;h*=6e4,l==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};H.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,u=0,c=!1;e.charAt(e.length-1)==="Z"&&(c=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var m=parseInt(e.substr(f+1,2),10),p=parseInt(e.substr(f+4,2),10);u=m*60+p,u*=6e4,h==="+"&&(u*=-1),c=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),c?(t.setUTCFullYear(n,r,i),t.setUTCHours(s,a,o,l),t.setTime(+t+u)):(t.setFullYear(n,r,i),t.setHours(s,a,o,l)),t};H.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};H.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};H.integerToDer=function(e){var t=Le.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n};H.derToInteger=function(e){typeof e=="string"&&(e=Le.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};H.validate=function(e,t,n,r){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&Le.util.isArray(t.value))for(var s=0,a=0;i&&a<t.value.length;++a)i=t.value[a].optional||!1,e.value[s]&&(i=H.validate(e.value[s],t.value[a],n,r),i?++s:t.value[a].optional&&(i=!0)),!i&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var o=e.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var yl=/[^\\u0000-\\u00ff]/;H.prettyPrint=function(e,t,n){var r="";t=t||0,n=n||2,t>0&&(r+=`
`);for(var i="",s=0;s<t*n;++s)i+=" ";switch(r+=i+"Tag: ",e.tagClass){case H.Class.UNIVERSAL:r+="Universal:";break;case H.Class.APPLICATION:r+="Application:";break;case H.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case H.Class.PRIVATE:r+="Private:";break}if(e.tagClass===H.Class.UNIVERSAL)switch(r+=e.type,e.type){case H.Type.NONE:r+=" (None)";break;case H.Type.BOOLEAN:r+=" (Boolean)";break;case H.Type.INTEGER:r+=" (Integer)";break;case H.Type.BITSTRING:r+=" (Bit string)";break;case H.Type.OCTETSTRING:r+=" (Octet string)";break;case H.Type.NULL:r+=" (Null)";break;case H.Type.OID:r+=" (Object Identifier)";break;case H.Type.ODESC:r+=" (Object Descriptor)";break;case H.Type.EXTERNAL:r+=" (External or Instance of)";break;case H.Type.REAL:r+=" (Real)";break;case H.Type.ENUMERATED:r+=" (Enumerated)";break;case H.Type.EMBEDDED:r+=" (Embedded PDV)";break;case H.Type.UTF8:r+=" (UTF8)";break;case H.Type.ROID:r+=" (Relative Object Identifier)";break;case H.Type.SEQUENCE:r+=" (Sequence)";break;case H.Type.SET:r+=" (Set)";break;case H.Type.PRINTABLESTRING:r+=" (Printable String)";break;case H.Type.IA5String:r+=" (IA5String (ASCII))";break;case H.Type.UTCTIME:r+=" (UTC time)";break;case H.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case H.Type.BMPSTRING:r+=" (BMP String)";break}else r+=e.type;if(r+=`
`,r+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var a=0,o="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(a+=1,o+=H.prettyPrint(e.value[s],t+1,n),s+1<e.value.length&&(o+=","));r+=i+"Sub values: "+a+o}else{if(r+=i+"Value: ",e.type===H.Type.OID){var l=H.derToOid(e.value);r+=l,Le.pki&&Le.pki.oids&&l in Le.pki.oids&&(r+=" ("+Le.pki.oids[l]+") ")}if(e.type===H.Type.INTEGER)try{r+=H.derToInteger(e.value)}catch{r+="0x"+Le.util.bytesToHex(e.value)}else if(e.type===H.Type.BITSTRING){if(e.value.length>1?r+="0x"+Le.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else e.type===H.Type.OCTETSTRING?(yl.test(e.value)||(r+="("+e.value+") "),r+="0x"+Le.util.bytesToHex(e.value)):e.type===H.Type.UTF8?r+=Le.util.decodeUtf8(e.value):e.type===H.Type.PRINTABLESTRING||e.type===H.Type.IA5String?r+=e.value:yl.test(e.value)?r+="0x"+Le.util.bytesToHex(e.value):e.value.length===0?r+="[null]":r+=e.value}return r};var Ai=ae;Ai.md=Ai.md||{};Ai.md.algorithms=Ai.md.algorithms||{};var $t=ae,Ld=$t.hmac=$t.hmac||{};Ld.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(s,a){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in $t.md.algorithms)t=$t.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(a===null)a=e;else{if(typeof a=="string")a=$t.util.createBuffer(a);else if($t.util.isArray(a)){var o=a;a=$t.util.createBuffer();for(var l=0;l<o.length;++l)a.putByte(o[l])}var u=a.length();u>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),n=$t.util.createBuffer(),r=$t.util.createBuffer(),u=a.length();for(var l=0;l<u;++l){var o=a.at(l);n.putByte(54^o),r.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,l=0;l<o;++l)n.putByte(54),r.putByte(92);e=a,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(r),t.update(s),t.digest()},i.digest=i.getMac,i};var Kt=ae,ml=Kt.md5=Kt.md5||{};Kt.md.md5=Kt.md.algorithms.md5=ml;ml.create=function(){Cl||Dd();var e=null,t=Kt.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,s=0;s<i;++s)r.fullMessageLength.push(0);return t=Kt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,s){s==="utf8"&&(i=Kt.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=a[1],a[1]=a[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),El(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Kt.util.createBuffer();i.putBytes(t.bytes());var s=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=s&r.blockLength-1;i.putBytes(sa.substr(0,r.blockLength-a));for(var o,l=0,u=r.fullMessageLength.length-1;u>=0;--u)o=r.fullMessageLength[u]*8+l,l=o/4294967296>>>0,i.putInt32Le(o>>>0);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};El(c,n,i);var f=Kt.util.createBuffer();return f.putInt32Le(c.h0),f.putInt32Le(c.h1),f.putInt32Le(c.h2),f.putInt32Le(c.h3),f},r};var sa=null,Bi=null,Un=null,en=null,Cl=!1;function Dd(){sa=String.fromCharCode(128),sa+=Kt.util.fillString(String.fromCharCode(0),64),Bi=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Un=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],en=new Array(64);for(var e=0;e<64;++e)en[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);Cl=!0}function El(e,t,n){for(var r,i,s,a,o,l,u,c,f=n.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,c=0;c<16;++c)t[c]=n.getInt32Le(),l=o^s&(a^o),r=i+l+en[c]+t[c],u=Un[c],i=o,o=a,a=s,s+=r<<u|r>>>32-u;for(;c<32;++c)l=a^o&(s^a),r=i+l+en[c]+t[Bi[c]],u=Un[c],i=o,o=a,a=s,s+=r<<u|r>>>32-u;for(;c<48;++c)l=s^a^o,r=i+l+en[c]+t[Bi[c]],u=Un[c],i=o,o=a,a=s,s+=r<<u|r>>>32-u;for(;c<64;++c)l=a^(s|~o),r=i+l+en[c]+t[Bi[c]],u=Un[c],i=o,o=a,a=s,s+=r<<u|r>>>32-u;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,f-=64}}var ki=ae,xl=ki.pem=ki.pem||{};xl.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+`-----\r
`,r;if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=Ri(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},n+=Ri(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=Ri(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=Ri(e.headers[i]);return e.procType&&(n+=`\r
`),n+=ki.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`,n};xl.decode=function(e){for(var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=n.exec(e),!!s;){var a={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:ki.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var o=s[2].split(i),l=0;s&&l<o.length;){for(var u=o[l].replace(/\s+$/,""),c=l+1;c<o.length;++c){var f=o[c];if(!/\s/.test(f[0]))break;u+=f,l=c}if(s=u.match(r),s){for(var h={name:s[1],values:[]},m=s[2].split(","),p=0;p<m.length;++p)h.values.push(Ud(m[p]));if(a.procType)if(!a.contentDomain&&h.name==="Content-Domain")a.contentDomain=m[0]||"";else if(!a.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:m[0],parameters:m[1]||null}}else a.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:m[0],type:m[1]}}}++l}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Ri(e){for(var t=e.name+": ",n=[],r=function(l,u){return" "+u},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+`\r
`;for(var s=0,a=-1,i=0;i<t.length;++i,++s)if(s>65&&a!==-1){var o=t[a];o===","?(++a,t=t.substr(0,a)+`\r
 `+t.substr(a)):t=t.substr(0,a)+`\r
`+o+t.substr(a+1),s=i-a-1,a=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(a=i);return t}function Ud(e){return e.replace(/^\s+/,"")}var De=ae;De.des=De.des||{};De.des.startEncrypting=function(e,t,n,r){var i=Ni({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};De.des.createEncryptionCipher=function(e,t){return Ni({key:e,output:null,decrypt:!1,mode:t})};De.des.startDecrypting=function(e,t,n,r){var i=Ni({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};De.des.createDecryptionCipher=function(e,t){return Ni({key:e,output:null,decrypt:!0,mode:t})};De.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(r,i){return _l(n._keys,r,i,!1)},decrypt:function(r,i){return _l(n._keys,r,i,!0)}}}),n._init=!1};De.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=De.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Hd(t),this._init=!0}};jt("DES-ECB",De.cipher.modes.ecb);jt("DES-CBC",De.cipher.modes.cbc);jt("DES-CFB",De.cipher.modes.cfb);jt("DES-OFB",De.cipher.modes.ofb);jt("DES-CTR",De.cipher.modes.ctr);jt("3DES-ECB",De.cipher.modes.ecb);jt("3DES-CBC",De.cipher.modes.cbc);jt("3DES-CFB",De.cipher.modes.cfb);jt("3DES-OFB",De.cipher.modes.ofb);jt("3DES-CTR",De.cipher.modes.ctr);function jt(e,t){var n=function(){return new De.des.Algorithm(e,t)};De.cipher.registerAlgorithm(e,n)}var Od=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Pd=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Vd=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Fd=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Md=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Kd=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],jd=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],zd=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Hd(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],c=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],m=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],C=e.length()>8?3:1,E=[],_=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],I=0,T,N=0;N<C;N++){var O=e.getInt32(),B=e.getInt32();T=(O>>>4^B)&252645135,B^=T,O^=T<<4,T=(B>>>-16^O)&65535,O^=T,B^=T<<-16,T=(O>>>2^B)&858993459,B^=T,O^=T<<2,T=(B>>>-16^O)&65535,O^=T,B^=T<<-16,T=(O>>>1^B)&1431655765,B^=T,O^=T<<1,T=(B>>>8^O)&16711935,O^=T,B^=T<<8,T=(O>>>1^B)&1431655765,B^=T,O^=T<<1,T=O<<8|B>>>20&240,O=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=T;for(var Y=0;Y<_.length;++Y){_[Y]?(O=O<<2|O>>>26,B=B<<2|B>>>26):(O=O<<1|O>>>27,B=B<<1|B>>>27),O&=-15,B&=-15;var J=t[O>>>28]|n[O>>>24&15]|r[O>>>20&15]|i[O>>>16&15]|s[O>>>12&15]|a[O>>>8&15]|o[O>>>4&15],se=l[B>>>28]|u[B>>>24&15]|c[B>>>20&15]|f[B>>>16&15]|h[B>>>12&15]|m[B>>>8&15]|p[B>>>4&15];T=(se>>>16^J)&65535,E[I++]=J^T,E[I++]=se^T<<16}}return E}function _l(e,t,n,r){var i=e.length===32?3:9,s;i===3?s=r?[30,-2,-2]:[0,32,2]:s=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,o=t[0],l=t[1];a=(o>>>4^l)&252645135,l^=a,o^=a<<4,a=(o>>>16^l)&65535,l^=a,o^=a<<16,a=(l>>>2^o)&858993459,o^=a,l^=a<<2,a=(l>>>8^o)&16711935,o^=a,l^=a<<8,a=(o>>>1^l)&1431655765,l^=a,o^=a<<1,o=o<<1|o>>>31,l=l<<1|l>>>31;for(var u=0;u<i;u+=3){for(var c=s[u+1],f=s[u+2],h=s[u];h!=c;h+=f){var m=l^e[h],p=(l>>>4|l<<28)^e[h+1];a=o,o=l,l=a^(Pd[m>>>24&63]|Fd[m>>>16&63]|Kd[m>>>8&63]|zd[m&63]|Od[p>>>24&63]|Vd[p>>>16&63]|Md[p>>>8&63]|jd[p&63])}a=o,o=l,l=a}o=o>>>1|o<<31,l=l>>>1|l<<31,a=(o>>>1^l)&1431655765,l^=a,o^=a<<1,a=(l>>>8^o)&16711935,o^=a,l^=a<<8,a=(l>>>2^o)&858993459,o^=a,l^=a<<2,a=(o>>>16^l)&65535,l^=a,o^=a<<16,a=(o>>>4^l)&252645135,l^=a,o^=a<<4,n[0]=o,n[1]=l}function Ni(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,r;e.decrypt?r=De.cipher.createDecipher(n,e.key):r=De.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(s,a){var o=null;a instanceof De.util.ByteBuffer&&(o=a,a={}),a=a||{},a.output=o,a.iv=s,i.call(r,a)},r}var qd={},Gd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qd}),aa=Ef(Gd),pt=ae,Wd=pt.pkcs5=pt.pkcs5||{},er;pt.util.isNodejs&&!pt.options.usePureJavaScript&&(er=aa);pt.pbkdf2=Wd.pbkdf2=function(e,t,n,r,i,s){if(typeof i=="function"&&(s=i,i=null),pt.util.isNodejs&&!pt.options.usePureJavaScript&&er.pbkdf2&&(i===null||typeof i!="object")&&(er.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?er.pbkdf2Sync.length===4?er.pbkdf2(e,t,n,r,function(T,N){if(T)return s(T);s(null,N.toString("binary"))}):er.pbkdf2(e,t,n,r,i,function(T,N){if(T)return s(T);s(null,N.toString("binary"))}):er.pbkdf2Sync.length===4?er.pbkdf2Sync(e,t,n,r).toString("binary"):er.pbkdf2Sync(e,t,n,r,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in pt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=pt.md[i].create()}var a=i.digestLength;if(r>4294967295*a){var o=new Error("Derived key is too long.");if(s)return s(o);throw o}var l=Math.ceil(r/a),u=r-(l-1)*a,c=pt.hmac.create();c.start(i,e);var f="",h,m,p;if(!s){for(var C=1;C<=l;++C){c.start(null,null),c.update(t),c.update(pt.util.int32ToBytes(C)),h=p=c.digest().getBytes();for(var E=2;E<=n;++E)c.start(null,null),c.update(p),m=c.digest().getBytes(),h=pt.util.xorBytes(h,m,a),p=m;f+=C<l?h:h.substr(0,u)}return f}var C=1,E;function _(){if(C>l)return s(null,f);c.start(null,null),c.update(t),c.update(pt.util.int32ToBytes(C)),h=p=c.digest().getBytes(),E=2,I()}function I(){if(E<=n)return c.start(null,null),c.update(p),m=c.digest().getBytes(),h=pt.util.xorBytes(h,m,a),p=m,++E,pt.util.setImmediate(I);f+=C<l?h:h.substr(0,u),++C,_()}_()};var zt=ae,bl=zt.sha256=zt.sha256||{};zt.md.sha256=zt.md.algorithms.sha256=bl;bl.create=function(){Sl||Qd();var e=null,t=zt.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,s=0;s<i;++s)r.fullMessageLength.push(0);return t=zt.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,s){s==="utf8"&&(i=zt.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=a[1],a[1]=a[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),wl(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=zt.util.createBuffer();i.putBytes(t.bytes());var s=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=s&r.blockLength-1;i.putBytes(oa.substr(0,r.blockLength-a));for(var o,l,u=r.fullMessageLength[0]*8,c=0;c<r.fullMessageLength.length-1;++c)o=r.fullMessageLength[c+1]*8,l=o/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};wl(f,n,i);var h=zt.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},r};var oa=null,Sl=!1,Tl=null;function Qd(){oa=String.fromCharCode(128),oa+=zt.util.fillString(String.fromCharCode(0),64),Tl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Sl=!0}function wl(e,t,n){for(var r,i,s,a,o,l,u,c,f,h,m,p,C,E,_,I=n.length();I>=64;){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=t[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=r+t[u-7]+i+t[u-16]|0;for(c=e.h0,f=e.h1,h=e.h2,m=e.h3,p=e.h4,C=e.h5,E=e.h6,_=e.h7,u=0;u<64;++u)a=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=E^p&(C^E),s=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),l=c&f|h&(c^f),r=_+a+o+Tl[u]+t[u],i=s+l,_=E,E=C,C=p,p=m+r>>>0,m=h,h=f,f=c,c=r+i>>>0;e.h0=e.h0+c|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+m|0,e.h4=e.h4+p|0,e.h5=e.h5+C|0,e.h6=e.h6+E|0,e.h7=e.h7+_|0,I-=64}}var Ht=ae,Li=null;Ht.util.isNodejs&&!Ht.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Li=aa);var Yd=Ht.prng=Ht.prng||{};Yd.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();t.pools=r,t.pool=0,t.generate=function(u,c){if(!c)return t.generateSync(u);var f=t.plugin.cipher,h=t.plugin.increment,m=t.plugin.formatKey,p=t.plugin.formatSeed,C=Ht.util.createBuffer();t.key=null,E();function E(_){if(_)return c(_);if(C.length()>=u)return c(null,C.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return Ht.util.nextTick(function(){s(E)});var I=f(t.key,t.seed);t.generated+=I.length,C.putBytes(I),t.key=m(f(t.key,h(t.seed))),t.seed=p(f(t.key,t.seed)),Ht.util.setImmediate(E)}},t.generateSync=function(u){var c=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,m=t.plugin.formatSeed;t.key=null;for(var p=Ht.util.createBuffer();p.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&a();var C=c(t.key,t.seed);t.generated+=C.length,p.putBytes(C),t.key=h(c(t.key,f(t.seed))),t.seed=m(c(t.key,t.seed))}return p.getBytes(u)};function s(u){if(t.pools[0].messageLength>=32)return o(),u();var c=32-t.pools[0].messageLength<<5;t.seedFile(c,function(f,h){if(f)return u(f);t.collect(h),o(),u()})}function a(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var c=1,f=0;f<32;++f)t.reseeds%c==0&&(u.update(t.pools[f].digest().getBytes()),t.pools[f].start()),c=c<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var h=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function l(u){var c=null,f=Ht.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(c=function(O){return h.getRandomValues(O)});var m=Ht.util.createBuffer();if(c)for(;m.length()<u;){var p=Math.max(1,Math.min(u-m.length(),65536)/4),C=new Uint32Array(Math.floor(p));try{c(C);for(var E=0;E<C.length;++E)m.putInt32(C[E])}catch(O){if(!(typeof QuotaExceededError!="undefined"&&O instanceof QuotaExceededError))throw O}}if(m.length()<u)for(var _,I,T,N=Math.floor(Math.random()*65536);m.length()<u;){I=16807*(N&65535),_=16807*(N>>16),I+=(_&32767)<<16,I+=_>>15,I=(I&2147483647)+(I>>31),N=I&4294967295;for(var E=0;E<3;++E)T=N>>>(E<<3),T^=Math.floor(Math.random()*256),m.putByte(String.fromCharCode(T&255))}return m.getBytes(u)}return Li?(t.seedFile=function(u,c){Li.randomBytes(u,function(f,h){if(f)return c(f);c(null,h.toString())})},t.seedFileSync=function(u){return Li.randomBytes(u).toString()}):(t.seedFile=function(u,c){try{c(null,l(u))}catch(f){c(f)}},t.seedFileSync=l),t.collect=function(u){for(var c=u.length,f=0;f<c;++f)t.pools[t.pool].update(u.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,c){for(var f="",h=0;h<c;h+=8)f+=String.fromCharCode(u>>h&255);t.collect(f)},t.registerWorker=function(u){if(u===self)t.seedFile=function(f,h){function m(p){var C=p.data;C.forge&&C.forge.prng&&(self.removeEventListener("message",m),h(C.forge.prng.err,C.forge.prng.bytes))}self.addEventListener("message",m),self.postMessage({forge:{prng:{needed:f}}})};else{var c=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(m,p){u.postMessage({forge:{prng:{err:m,bytes:p}}})})};u.addEventListener("message",c)}},t};var ft=ae;(function(){ft.random&&ft.random.getBytes||function(e){var t={},n=new Array(4),r=ft.util.createBuffer();t.formatKey=function(f){var h=ft.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),ft.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=ft.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return ft.aes._updateBlock(f,h,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},t.increment=function(f){return++f[3],f},t.md=ft.md.sha256;function i(){var f=ft.prng.create(t);return f.getBytes=function(h,m){return f.generate(h,m)},f.getBytesSync=function(h){return f.generate(h)},f}var s=i(),a=null,o=ft.util.globalScope,l=o.crypto||o.msCrypto;if(l&&l.getRandomValues&&(a=function(f){return l.getRandomValues(f)}),ft.options.usePureJavaScript||!ft.util.isNodejs&&!a){if(s.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var c in navigator)try{typeof navigator[c]=="string"&&(u+=navigator[c])}catch{}s.collect(u),u=null}e&&(e().mousemove(function(f){s.collectInt(f.clientX,16),s.collectInt(f.clientY,16)}),e().keypress(function(f){s.collectInt(f.charCode,8)}))}if(!ft.random)ft.random=s;else for(var c in s)ft.random[c]=s[c];ft.random.createInstance=i}(typeof jQuery!="undefined"?jQuery:null)})();var Ct=ae,la=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Il=[1,2,3,5],Xd=function(e,t){return e<<t&65535|(e&65535)>>16-t},Jd=function(e,t){return(e&65535)>>t|e<<16-t&65535};Ct.rc2=Ct.rc2||{};Ct.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ct.util.createBuffer(e)),t=t||128;var n=e,r=e.length(),i=t,s=Math.ceil(i/8),a=255>>(i&7),o;for(o=r;o<128;o++)n.putByte(la[n.at(o-1)+n.at(o-r)&255]);for(n.setAt(128-s,la[n.at(128-s)&a]),o=127-s;o>=0;o--)n.setAt(o,la[n.at(o+1)^n.at(o+s)]);return n};var Al=function(e,t,n){var r=!1,i=null,s=null,a=null,o,l,u,c,f=[];for(e=Ct.rc2.expandKey(e,t),u=0;u<64;u++)f.push(e.getInt16Le());n?(o=function(p){for(u=0;u<4;u++)p[u]+=f[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),p[u]=Xd(p[u],Il[u]),c++},l=function(p){for(u=0;u<4;u++)p[u]+=f[p[(u+3)%4]&63]}):(o=function(p){for(u=3;u>=0;u--)p[u]=Jd(p[u],Il[u]),p[u]-=f[c]+(p[(u+3)%4]&p[(u+2)%4])+(~p[(u+3)%4]&p[(u+1)%4]),c--},l=function(p){for(u=3;u>=0;u--)p[u]-=f[p[(u+3)%4]&63]});var h=function(p){var C=[];for(u=0;u<4;u++){var E=i.getInt16Le();a!==null&&(n?E^=a.getInt16Le():a.putInt16Le(E)),C.push(E&65535)}c=n?0:63;for(var _=0;_<p.length;_++)for(var I=0;I<p[_][0];I++)p[_][1](C);for(u=0;u<4;u++)a!==null&&(n?a.putInt16Le(C[u]):C[u]^=a.getInt16Le()),s.putInt16Le(C[u])},m=null;return m={start:function(p,C){p&&typeof p=="string"&&(p=Ct.util.createBuffer(p)),r=!1,i=Ct.util.createBuffer(),s=C||new Ct.util.createBuffer,a=p,m.output=s},update:function(p){for(r||i.putBuffer(p);i.length()>=8;)h([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(p){var C=!0;if(n)if(p)C=p(8,i,!n);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(C&&(r=!0,m.update()),!n&&(C=i.length()===0,C))if(p)C=p(8,s,!n);else{var _=s.length(),I=s.at(_-1);I>_?C=!1:s.truncate(I)}return C}},m};Ct.rc2.startEncrypting=function(e,t,n){var r=Ct.rc2.createEncryptionCipher(e,128);return r.start(t,n),r};Ct.rc2.createEncryptionCipher=function(e,t){return Al(e,t,!0)};Ct.rc2.startDecrypting=function(e,t,n){var r=Ct.rc2.createDecryptionCipher(e,128);return r.start(t,n),r};Ct.rc2.createDecryptionCipher=function(e,t){return Al(e,t,!1)};var ua=ae;ua.jsbn=ua.jsbn||{};var tr;function D(e,t,n){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}ua.jsbn.BigInteger=D;function ve(){return new D(null)}function Zd(e,t,n,r,i,s){for(;--s>=0;){var a=t*this.data[e++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=a&67108863}return i}function $d(e,t,n,r,i,s){for(var a=t&32767,o=t>>15;--s>=0;){var l=this.data[e]&32767,u=this.data[e++]>>15,c=o*l+u*a;l=a*l+((c&32767)<<15)+n.data[r]+(i&1073741823),i=(l>>>30)+(c>>>15)+o*u+(i>>>30),n.data[r++]=l&1073741823}return i}function Bl(e,t,n,r,i,s){for(var a=t&16383,o=t>>14;--s>=0;){var l=this.data[e]&16383,u=this.data[e++]>>14,c=o*l+u*a;l=a*l+((c&16383)<<14)+n.data[r]+i,i=(l>>28)+(c>>14)+o*u,n.data[r++]=l&268435455}return i}typeof navigator=="undefined"?(D.prototype.am=Bl,tr=28):navigator.appName=="Microsoft Internet Explorer"?(D.prototype.am=$d,tr=30):navigator.appName!="Netscape"?(D.prototype.am=Zd,tr=26):(D.prototype.am=Bl,tr=28);D.prototype.DB=tr;D.prototype.DM=(1<<tr)-1;D.prototype.DV=1<<tr;var ca=52;D.prototype.FV=Math.pow(2,ca);D.prototype.F1=ca-tr;D.prototype.F2=2*tr-ca;var ep="0123456789abcdefghijklmnopqrstuvwxyz",Di=new Array,tn,It;tn="0".charCodeAt(0);for(It=0;It<=9;++It)Di[tn++]=It;tn="a".charCodeAt(0);for(It=10;It<36;++It)Di[tn++]=It;tn="A".charCodeAt(0);for(It=10;It<36;++It)Di[tn++]=It;function kl(e){return ep.charAt(e)}function Rl(e,t){var n=Di[e.charCodeAt(t)];return n==null?-1:n}function tp(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function rp(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function ur(e){var t=ve();return t.fromInt(e),t}function np(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,s=0;--r>=0;){var a=n==8?e[r]&255:Rl(e,r);if(a<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=a:s+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&D.ZERO.subTo(this,this)}function ip(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function sp(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-->0)for(o<this.DB&&(r=this.data[a]>>o)>0&&(i=!0,s=kl(r));a>=0;)o<t?(r=(this.data[a]&(1<<o)-1)<<t-o,r|=this.data[--a]>>(o+=this.DB-t)):(r=this.data[a]>>(o-=t)&n,o<=0&&(o+=this.DB,--a)),r>0&&(i=!0),i&&(s+=kl(r));return i?s:"0"}function ap(){var e=ve();return D.ZERO.subTo(this,e),e}function op(){return this.s<0?this.negate():this}function lp(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function Ui(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function up(){return this.t<=0?0:this.DB*(this.t-1)+Ui(this.data[this.t-1]^this.s&this.DM)}function cp(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function fp(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function hp(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+s+1]=this.data[o]>>r|a,a=(this.data[o]&i)<<n;for(o=s-1;o>=0;--o)t.data[o]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()}function dp(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)t.data[a-n-1]|=(this.data[a]&s)<<i,t.data[a-n]=this.data[a]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function pp(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function gp(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&D.ZERO.subTo(t,t)}function vp(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function yp(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=ve());var s=ve(),a=this.s,o=e.s,l=this.DB-Ui(r.data[r.t-1]);l>0?(r.lShiftTo(l,s),i.lShiftTo(l,n)):(r.copyTo(s),i.copyTo(n));var u=s.t,c=s.data[u-1];if(c!=0){var f=c*(1<<this.F1)+(u>1?s.data[u-2]>>this.F2:0),h=this.FV/f,m=(1<<this.F1)/f,p=1<<this.F2,C=n.t,E=C-u,_=t==null?ve():t;for(s.dlShiftTo(E,_),n.compareTo(_)>=0&&(n.data[n.t++]=1,n.subTo(_,n)),D.ONE.dlShiftTo(u,_),_.subTo(s,s);s.t<u;)s.data[s.t++]=0;for(;--E>=0;){var I=n.data[--C]==c?this.DM:Math.floor(n.data[C]*h+(n.data[C-1]+p)*m);if((n.data[C]+=s.am(0,I,n,E,0,u))<I)for(s.dlShiftTo(E,_),n.subTo(_,n);n.data[C]<--I;)n.subTo(_,n)}t!=null&&(n.drShiftTo(u,t),a!=o&&D.ZERO.subTo(t,t)),n.t=u,n.clamp(),l>0&&n.rShiftTo(l,n),a<0&&D.ZERO.subTo(n,n)}}}function mp(e){var t=ve();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(D.ZERO)>0&&e.subTo(t,t),t}function Nr(e){this.m=e}function Cp(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Ep(e){return e}function xp(e){e.divRemTo(this.m,null,e)}function _p(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bp(e,t){e.squareTo(t),this.reduce(t)}Nr.prototype.convert=Cp;Nr.prototype.revert=Ep;Nr.prototype.reduce=xp;Nr.prototype.mulTo=_p;Nr.prototype.sqrTo=bp;function Sp(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Lr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Tp(e){var t=ve();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(D.ZERO)>0&&this.m.subTo(t,t),t}function wp(e){var t=ve();return e.copyTo(t),this.reduce(t),t}function Ip(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Ap(e,t){e.squareTo(t),this.reduce(t)}function Bp(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Lr.prototype.convert=Tp;Lr.prototype.revert=wp;Lr.prototype.reduce=Ip;Lr.prototype.mulTo=Bp;Lr.prototype.sqrTo=Ap;function kp(){return(this.t>0?this.data[0]&1:this.s)==0}function Rp(e,t){if(e>4294967295||e<1)return D.ONE;var n=ve(),r=ve(),i=t.convert(this),s=Ui(e)-1;for(i.copyTo(n);--s>=0;)if(t.sqrTo(n,r),(e&1<<s)>0)t.mulTo(r,i,n);else{var a=n;n=r,r=a}return t.revert(n)}function Np(e,t){var n;return e<256||t.isEven()?n=new Nr(t):n=new Lr(t),this.exp(e,n)}D.prototype.copyTo=tp;D.prototype.fromInt=rp;D.prototype.fromString=np;D.prototype.clamp=ip;D.prototype.dlShiftTo=cp;D.prototype.drShiftTo=fp;D.prototype.lShiftTo=hp;D.prototype.rShiftTo=dp;D.prototype.subTo=pp;D.prototype.multiplyTo=gp;D.prototype.squareTo=vp;D.prototype.divRemTo=yp;D.prototype.invDigit=Sp;D.prototype.isEven=kp;D.prototype.exp=Rp;D.prototype.toString=sp;D.prototype.negate=ap;D.prototype.abs=op;D.prototype.compareTo=lp;D.prototype.bitLength=up;D.prototype.mod=mp;D.prototype.modPowInt=Np;D.ZERO=ur(0);D.ONE=ur(1);function Lp(){var e=ve();return this.copyTo(e),e}function Dp(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Up(){return this.t==0?this.s:this.data[0]<<24>>24}function Op(){return this.t==0?this.s:this.data[0]<<16>>16}function Pp(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Vp(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Fp(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=ur(n),i=ve(),s=ve(),a="";for(this.divRemTo(r,i,s);i.signum()>0;)a=(n+s.intValue()).toString(e).substr(1)+a,i.divRemTo(r,i,s);return s.intValue().toString(e)+a}function Mp(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,s=0,a=0,o=0;o<e.length;++o){var l=Rl(e,o);if(l<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}a=t*a+l,++s>=n&&(this.dMultiply(r),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&D.ZERO.subTo(this,this)}function Kp(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(D.ONE.shiftLeft(e-1),fa,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(D.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function jp(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-->0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function zp(e){return this.compareTo(e)==0}function Hp(e){return this.compareTo(e)<0?this:e}function qp(e){return this.compareTo(e)>0?this:e}function Gp(e,t,n){var r,i,s=Math.min(e.t,this.t);for(r=0;r<s;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=s;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=s;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function Wp(e,t){return e&t}function Qp(e){var t=ve();return this.bitwiseTo(e,Wp,t),t}function fa(e,t){return e|t}function Yp(e){var t=ve();return this.bitwiseTo(e,fa,t),t}function Nl(e,t){return e^t}function Xp(e){var t=ve();return this.bitwiseTo(e,Nl,t),t}function Ll(e,t){return e&~t}function Jp(e){var t=ve();return this.bitwiseTo(e,Ll,t),t}function Zp(){for(var e=ve(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function $p(e){var t=ve();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function eg(e){var t=ve();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function tg(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function rg(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+tg(this.data[e]);return this.s<0?this.t*this.DB:-1}function ng(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function ig(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=ng(this.data[n]^t);return e}function sg(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function ag(e,t){var n=D.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function og(e){return this.changeBit(e,fa)}function lg(e){return this.changeBit(e,Ll)}function ug(e){return this.changeBit(e,Nl)}function cg(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function fg(e){var t=ve();return this.addTo(e,t),t}function hg(e){var t=ve();return this.subTo(e,t),t}function dg(e){var t=ve();return this.multiplyTo(e,t),t}function pg(e){var t=ve();return this.divRemTo(e,t,null),t}function gg(e){var t=ve();return this.divRemTo(e,null,t),t}function vg(e){var t=ve(),n=ve();return this.divRemTo(e,t,n),new Array(t,n)}function yg(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function mg(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function On(){}function Dl(e){return e}function Cg(e,t,n){e.multiplyTo(t,n)}function Eg(e,t){e.squareTo(t)}On.prototype.convert=Dl;On.prototype.revert=Dl;On.prototype.mulTo=Cg;On.prototype.sqrTo=Eg;function xg(e){return this.exp(e,new On)}function _g(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function bg(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function rn(e){this.r2=ve(),this.q3=ve(),D.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Sg(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=ve();return e.copyTo(t),this.reduce(t),t}function Tg(e){return e}function wg(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ig(e,t){e.squareTo(t),this.reduce(t)}function Ag(e,t,n){e.multiplyTo(t,n),this.reduce(n)}rn.prototype.convert=Sg;rn.prototype.revert=Tg;rn.prototype.reduce=wg;rn.prototype.mulTo=Ag;rn.prototype.sqrTo=Ig;function Bg(e,t){var n=e.bitLength(),r,i=ur(1),s;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?s=new Nr(t):t.isEven()?s=new rn(t):s=new Lr(t);var a=new Array,o=3,l=r-1,u=(1<<r)-1;if(a[1]=s.convert(this),r>1){var c=ve();for(s.sqrTo(a[1],c);o<=u;)a[o]=ve(),s.mulTo(c,a[o-2],a[o]),o+=2}var f=e.t-1,h,m=!0,p=ve(),C;for(n=Ui(e.data[f])-1;f>=0;){for(n>=l?h=e.data[f]>>n-l&u:(h=(e.data[f]&(1<<n+1)-1)<<l-n,f>0&&(h|=e.data[f-1]>>this.DB+n-l)),o=r;(h&1)==0;)h>>=1,--o;if((n-=o)<0&&(n+=this.DB,--f),m)a[h].copyTo(i),m=!1;else{for(;o>1;)s.sqrTo(i,p),s.sqrTo(p,i),o-=2;o>0?s.sqrTo(i,p):(C=i,i=p,p=C),s.mulTo(p,a[h],i)}for(;f>=0&&(e.data[f]&1<<n)==0;)s.sqrTo(i,p),C=i,i=p,p=C,--n<0&&(n=this.DB-1,--f)}return s.revert(i)}function kg(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),s=n.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),n.rShiftTo(s,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return s>0&&n.lShiftTo(s,n),n}function Rg(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function Ng(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return D.ZERO;for(var n=e.clone(),r=this.clone(),i=ur(1),s=ur(0),a=ur(0),o=ur(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),t?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(a,i),s.subTo(o,s)):(r.subTo(n,r),t&&a.subTo(i,a),o.subTo(s,o))}if(r.compareTo(D.ONE)!=0)return D.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var Ut=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Lg=(1<<26)/Ut[Ut.length-1];function Dg(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=Ut[Ut.length-1]){for(t=0;t<Ut.length;++t)if(n.data[0]==Ut[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<Ut.length;){for(var r=Ut[t],i=t+1;i<Ut.length&&r<Lg;)r*=Ut[i++];for(r=n.modInt(r);t<i;)if(r%Ut[t++]==0)return!1}return n.millerRabin(e)}function Ug(e){var t=this.subtract(D.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r=t.shiftRight(n),i=Og(),s,a=0;a<e;++a){do s=new D(this.bitLength(),i);while(s.compareTo(D.ONE)<=0||s.compareTo(t)>=0);var o=s.modPow(r,this);if(o.compareTo(D.ONE)!=0&&o.compareTo(t)!=0){for(var l=1;l++<n&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(D.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function Og(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}D.prototype.chunkSize=Pp;D.prototype.toRadix=Fp;D.prototype.fromRadix=Mp;D.prototype.fromNumber=Kp;D.prototype.bitwiseTo=Gp;D.prototype.changeBit=ag;D.prototype.addTo=cg;D.prototype.dMultiply=yg;D.prototype.dAddOffset=mg;D.prototype.multiplyLowerTo=_g;D.prototype.multiplyUpperTo=bg;D.prototype.modInt=Rg;D.prototype.millerRabin=Ug;D.prototype.clone=Lp;D.prototype.intValue=Dp;D.prototype.byteValue=Up;D.prototype.shortValue=Op;D.prototype.signum=Vp;D.prototype.toByteArray=jp;D.prototype.equals=zp;D.prototype.min=Hp;D.prototype.max=qp;D.prototype.and=Qp;D.prototype.or=Yp;D.prototype.xor=Xp;D.prototype.andNot=Jp;D.prototype.not=Zp;D.prototype.shiftLeft=$p;D.prototype.shiftRight=eg;D.prototype.getLowestSetBit=rg;D.prototype.bitCount=ig;D.prototype.testBit=sg;D.prototype.setBit=og;D.prototype.clearBit=lg;D.prototype.flipBit=ug;D.prototype.add=fg;D.prototype.subtract=hg;D.prototype.multiply=dg;D.prototype.divide=pg;D.prototype.remainder=gg;D.prototype.divideAndRemainder=vg;D.prototype.modPow=Bg;D.prototype.modInverse=Ng;D.prototype.pow=xg;D.prototype.gcd=kg;D.prototype.isProbablePrime=Dg;var qt=ae,Ul=qt.sha1=qt.sha1||{};qt.md.sha1=qt.md.algorithms.sha1=Ul;Ul.create=function(){Ol||Pg();var e=null,t=qt.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,s=0;s<i;++s)r.fullMessageLength.push(0);return t=qt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,s){s==="utf8"&&(i=qt.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=a[1],a[1]=a[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),Pl(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=qt.util.createBuffer();i.putBytes(t.bytes());var s=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=s&r.blockLength-1;i.putBytes(ha.substr(0,r.blockLength-a));for(var o,l,u=r.fullMessageLength[0]*8,c=0;c<r.fullMessageLength.length-1;++c)o=r.fullMessageLength[c+1]*8,l=o/4294967296>>>0,u+=l,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};Pl(f,n,i);var h=qt.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},r};var ha=null,Ol=!1;function Pg(){ha=String.fromCharCode(128),ha+=qt.util.fillString(String.fromCharCode(0),64),Ol=!0}function Pl(e,t,n){for(var r,i,s,a,o,l,u,c,f=n.length();f>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,l=e.h4,c=0;c<16;++c)r=n.getInt32(),t[c]=r,u=o^s&(a^o),r=(i<<5|i>>>27)+u+l+1518500249+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<20;++c)r=t[c-3]^t[c-8]^t[c-14]^t[c-16],r=r<<1|r>>>31,t[c]=r,u=o^s&(a^o),r=(i<<5|i>>>27)+u+l+1518500249+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<32;++c)r=t[c-3]^t[c-8]^t[c-14]^t[c-16],r=r<<1|r>>>31,t[c]=r,u=s^a^o,r=(i<<5|i>>>27)+u+l+1859775393+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<40;++c)r=t[c-6]^t[c-16]^t[c-28]^t[c-32],r=r<<2|r>>>30,t[c]=r,u=s^a^o,r=(i<<5|i>>>27)+u+l+1859775393+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<60;++c)r=t[c-6]^t[c-16]^t[c-28]^t[c-32],r=r<<2|r>>>30,t[c]=r,u=s&a|o&(s^a),r=(i<<5|i>>>27)+u+l+2400959708+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;for(;c<80;++c)r=t[c-6]^t[c-16]^t[c-28]^t[c-32],r=r<<2|r>>>30,t[c]=r,u=s^a^o,r=(i<<5|i>>>27)+u+l+3395469782+r,l=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+l|0,f-=64}}var Gt=ae,Vl=Gt.pkcs1=Gt.pkcs1||{};Vl.encode_rsa_oaep=function(e,t,n){var r,i,s,a;typeof n=="string"?(r=n,i=arguments[3]||void 0,s=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,s=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),s?s.start():s=Gt.md.sha1.create(),a||(a=s);var o=Math.ceil(e.n.bitLength()/8),l=o-2*s.digestLength-2;if(t.length>l){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=l,u}r||(r=""),s.update(r,"raw");for(var c=s.digest(),f="",h=l-t.length,m=0;m<h;m++)f+="\0";var p=c.getBytes()+f+""+t;if(!i)i=Gt.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=s.digestLength,u}var C=Oi(i,o-s.digestLength-1,a),E=Gt.util.xorBytes(p,C,p.length),_=Oi(E,s.digestLength,a),I=Gt.util.xorBytes(i,_,i.length);return"\0"+I+E};Vl.decode_rsa_oaep=function(e,t,n){var r,i,s;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md));var a=Math.ceil(e.n.bitLength()/8);if(t.length!==a){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=a,E}if(i===void 0?i=Gt.md.sha1.create():i.start(),s||(s=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var o=i.digest().getBytes(),l=t.charAt(0),u=t.substring(1,i.digestLength+1),c=t.substring(1+i.digestLength),f=Oi(c,i.digestLength,s),h=Gt.util.xorBytes(u,f,u.length),m=Oi(h,a-i.digestLength-1,s),p=Gt.util.xorBytes(c,m,c.length),C=p.substring(0,i.digestLength),E=l!=="\0",_=0;_<i.digestLength;++_)E|=o.charAt(_)!==C.charAt(_);for(var I=1,T=i.digestLength,N=i.digestLength;N<p.length;N++){var O=p.charCodeAt(N),B=O&1^1,Y=I?65534:0;E|=O&Y,I=I&B,T+=I}if(E||p.charCodeAt(T)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(T+1)};function Oi(e,t,n){n||(n=Gt.md.sha1.create());for(var r="",i=Math.ceil(t/n.digestLength),s=0;s<i;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);n.start(),n.update(e+a),r+=n.digest().getBytes()}return r.substring(0,t)}var Dr=ae;(function(){if(Dr.prime)return;var e=Dr.prime=Dr.prime||{},t=Dr.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new t(null);r.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,m){typeof h=="function"&&(m=h,h={}),h=h||{};var p=h.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var C=h.prng||Dr.random,E={nextBytes:function(_){for(var I=C.getBytesSync(_.length),T=0;T<_.length;++T)_[T]=I.charCodeAt(T)}};if(p.name==="PRIMEINC")return s(f,E,p.options,m);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(f,h,m,p){return"workers"in m?l(f,h,m,p):a(f,h,m,p)}function a(f,h,m,p){var C=u(f,h),E=0,_=c(C.bitLength());"millerRabinTests"in m&&(_=m.millerRabinTests);var I=10;"maxBlockTime"in m&&(I=m.maxBlockTime),o(C,f,h,E,_,I,p)}function o(f,h,m,p,C,E,_){var I=+new Date;do{if(f.bitLength()>h&&(f=u(h,m)),f.isProbablePrime(C))return _(null,f);f.dAddOffset(n[p++%8],0)}while(E<0||+new Date-I<E);Dr.util.setImmediate(function(){o(f,h,m,p,C,E,_)})}function l(f,h,m,p){if(typeof Worker=="undefined")return a(f,h,m,p);var C=u(f,h),E=m.workers,_=m.workLoad||100,I=_*30/8,T=m.workerScript||"forge/prime.worker.js";if(E===-1)return Dr.util.estimateCores(function(O,B){O&&(B=2),E=B-1,N()});N();function N(){E=Math.max(1,E);for(var O=[],B=0;B<E;++B)O[B]=new Worker(T);for(var B=0;B<E;++B)O[B].addEventListener("message",J);var Y=!1;function J(se){if(!Y){var ue=se.data;if(ue.found){for(var le=0;le<O.length;++le)O[le].terminate();return Y=!0,p(null,new t(ue.prime,16))}C.bitLength()>f&&(C=u(f,h));var Be=C.toString(16);se.target.postMessage({hex:Be,workLoad:_}),C.dAddOffset(I,0)}}}}function u(f,h){var m=new t(f,h),p=f-1;return m.testBit(p)||m.bitwiseTo(t.ONE.shiftLeft(p),i,m),m.dAddOffset(31-m.mod(r).byteValue(),0),m}function c(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})();var ne=ae;if(typeof ye=="undefined")var ye=ne.jsbn.BigInteger;var da=ne.util.isNodejs?aa:null,w=ne.asn1,At=ne.util;ne.pki=ne.pki||{};ne.pki.rsa=ne.rsa=ne.rsa||{};var ie=ne.pki,Vg=[6,4,2,4,2,4,6,2],Fg={name:"PrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Mg={name:"RSAPrivateKey",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Kg={name:"RSAPublicKey",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},jg=ne.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},zg=function(e){var t;if(e.algorithm in ie.oids)t=ie.oids[e.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}var r=w.oidToDer(t).getBytes(),i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),s=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);s.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,r)),s.value.push(w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,""));var a=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(a),w.toDer(i).getBytes()},Fl=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(ye.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(ye.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var r;do r=new ye(ne.util.bytesToHex(ne.random.getBytes(t.n.bitLength()/8)),16);while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(ye.ONE));e=e.multiply(r.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var a=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return a=a.multiply(r.modInverse(t.n)).mod(t.n),a};ie.rsa.encrypt=function(e,t,n){var r=n,i,s=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=Ml(e,t,n)):(i=ne.util.createBuffer(),i.putBytes(e));for(var a=new ye(i.toHex(),16),o=Fl(a,t,r),l=o.toString(16),u=ne.util.createBuffer(),c=s-Math.ceil(l.length/2);c>0;)u.putByte(0),--c;return u.putBytes(ne.util.hexToBytes(l)),u.getBytes()};ie.rsa.decrypt=function(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var a=new ye(ne.util.createBuffer(e).toHex(),16);if(a.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=Fl(a,t,n),l=o.toString(16),u=ne.util.createBuffer(),c=i-Math.ceil(l.length/2);c>0;)u.putByte(0),--c;return u.putBytes(ne.util.hexToBytes(l)),r!==!1?Pi(u.getBytes(),t,n):u.getBytes()};ie.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var r=n.prng||ne.random,i={nextBytes:function(o){for(var l=r.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=l.charCodeAt(u)}},s=n.algorithm||"PRIMEINC",a;if(s==="PRIMEINC")a={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new ye(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+s);return a};ie.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new ye(null);n.fromInt(30);for(var r=0,i=function(f,h){return f|h},s=+new Date,a,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,u=l-1;e.pqState===0?(e.num=new ye(l,e.rng),e.num.testBit(u)||e.num.bitwiseTo(ye.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(qg(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Vg[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(ye.ONE).gcd(e.e).compareTo(ye.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(ye.ONE),e.q1=e.q.subtract(ye.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(ye.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var c=e.e.modInverse(e.phi);e.keys={privateKey:ie.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:ie.rsa.setPublicKey(e.n,e.e)}}a=+new Date,o+=a-s,s=a}return e.keys!==null};ie.rsa.generateKeyPair=function(e,t,n,r){if(arguments.length===1?typeof e=="object"?(n=e,e=void 0):typeof e=="function"&&(r=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(r=t,t=void 0):typeof t!="number"&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},e===void 0&&(e=n.bits||2048),t===void 0&&(t=n.e||65537),!ne.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(r){if(Kl("generateKeyPair"))return da.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,l,u){if(o)return r(o);r(null,{privateKey:ie.privateKeyFromPem(u),publicKey:ie.publicKeyFromPem(l)})});if(jl("generateKey")&&jl("exportKey"))return At.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Hl(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return At.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){r(o)}).then(function(o){if(o){var l=ie.privateKeyFromAsn1(w.fromDer(ne.util.createBuffer(o)));r(null,{privateKey:l,publicKey:ie.setRsaPublicKey(l.n,l.e)})}});if(zl("generateKey")&&zl("exportKey")){var i=At.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Hl(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var l=o.target.result,u=At.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);u.oncomplete=function(c){var f=c.target.result,h=ie.privateKeyFromAsn1(w.fromDer(ne.util.createBuffer(f)));r(null,{privateKey:h,publicKey:ie.setRsaPublicKey(h.n,h.e)})},u.onerror=function(c){r(c)}},i.onerror=function(o){r(o)};return}}else if(Kl("generateKeyPairSync")){var s=da.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:ie.privateKeyFromPem(s.privateKey),publicKey:ie.publicKeyFromPem(s.publicKey)}}}var a=ie.rsa.createKeyPairGenerationState(e,t,n);if(!r)return ie.rsa.stepKeyPairGenerationState(a,0),a.keys;Hg(a,n,r)};ie.setRsaPublicKey=ie.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(r,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,l,u){return Ml(o,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,l){return ne.pkcs1.encode_rsa_oaep(l,o,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,n,!0);return ie.rsa.encrypt(a,n,!0)},n.verify=function(r,i,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(o,l){l=Pi(l,n,!0);var u=w.fromDer(l);return o===u.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(o,l){return l=Pi(l,n,!0),o===l}});var a=ie.rsa.decrypt(i,n,!0,!1);return s.verify(r,a,n.n.bitLength())},n};ie.setRsaPrivateKey=ie.rsa.setPrivateKey=function(e,t,n,r,i,s,a,o){var l={n:e,e:t,d:n,p:r,q:i,dP:s,dQ:a,qInv:o};return l.decrypt=function(u,c,f){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSAES-PKCS1-V1_5");var h=ie.rsa.decrypt(u,l,!1,!1);if(c==="RSAES-PKCS1-V1_5")c={decode:Pi};else if(c==="RSA-OAEP"||c==="RSAES-OAEP")c={decode:function(m,p){return ne.pkcs1.decode_rsa_oaep(p,m,f)}};else if(["RAW","NONE","NULL",null].indexOf(c)!==-1)c={decode:function(m){return m}};else throw new Error('Unsupported encryption scheme: "'+c+'".');return c.decode(h,l,!1)},l.sign=function(u,c){var f=!1;typeof c=="string"&&(c=c.toUpperCase()),c===void 0||c==="RSASSA-PKCS1-V1_5"?(c={encode:zg},f=1):(c==="NONE"||c==="NULL"||c===null)&&(c={encode:function(){return u}},f=1);var h=c.encode(u,l.n.bitLength());return ie.rsa.encrypt(h,l,f)},l};ie.wrapRsaPrivateKey=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(0).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(ie.oids.rsaEncryption).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")]),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,w.toDer(e).getBytes())])};ie.privateKeyFromAsn1=function(e){var t={},n=[];if(w.validate(e,Fg,t,n)&&(e=w.fromDer(ne.util.createBuffer(t.privateKey))),t={},n=[],!w.validate(e,Mg,t,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,s,a,o,l,u,c,f;return i=ne.util.createBuffer(t.privateKeyModulus).toHex(),s=ne.util.createBuffer(t.privateKeyPublicExponent).toHex(),a=ne.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=ne.util.createBuffer(t.privateKeyPrime1).toHex(),l=ne.util.createBuffer(t.privateKeyPrime2).toHex(),u=ne.util.createBuffer(t.privateKeyExponent1).toHex(),c=ne.util.createBuffer(t.privateKeyExponent2).toHex(),f=ne.util.createBuffer(t.privateKeyCoefficient).toHex(),ie.setRsaPrivateKey(new ye(i,16),new ye(s,16),new ye(a,16),new ye(o,16),new ye(l,16),new ye(u,16),new ye(c,16),new ye(f,16))};ie.privateKeyToAsn1=ie.privateKeyToRSAPrivateKey=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(0).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.n)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.e)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.d)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.p)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.q)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.dP)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.dQ)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.qInv))])};ie.publicKeyFromAsn1=function(e){var t={},n=[];if(w.validate(e,jg,t,n)){var r=w.derToOid(t.publicKeyOid);if(r!==ie.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}e=t.rsaPublicKey}if(n=[],!w.validate(e,Kg,t,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var s=ne.util.createBuffer(t.publicKeyModulus).toHex(),a=ne.util.createBuffer(t.publicKeyExponent).toHex();return ie.setRsaPublicKey(new ye(s,16),new ye(a,16))};ie.publicKeyToAsn1=ie.publicKeyToSubjectPublicKeyInfo=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(ie.oids.rsaEncryption).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,[ie.publicKeyToRSAPublicKey(e)])])};ie.publicKeyToRSAPublicKey=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.n)),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Wt(e.e))])};function Ml(e,t,n){var r=ne.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}r.putByte(0),r.putByte(n);var a=i-3-e.length,o;if(n===0||n===1){o=n===0?0:255;for(var l=0;l<a;++l)r.putByte(o)}else for(;a>0;){for(var u=0,c=ne.random.getBytes(a),l=0;l<a;++l)o=c.charCodeAt(l),o===0?++u:r.putByte(o);a=u}return r.putByte(0),r.putBytes(e),r}function Pi(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8),s=ne.util.createBuffer(e),a=s.getByte(),o=s.getByte();if(a!==0||n&&o!==0&&o!==1||!n&&o!=2||n&&o===0&&typeof r=="undefined")throw new Error("Encryption block is invalid.");var l=0;if(o===0){l=i-3-r;for(var u=0;u<l;++u)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(o===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}var c=s.getByte();if(c!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Hg(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var r={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(r.prng=t.prng),i();function i(){s(e.pBits,function(o,l){if(o)return n(o);if(e.p=l,e.q!==null)return a(o,e.q);s(e.qBits,a)})}function s(o,l){ne.prime.generateProbablePrime(o,r,l)}function a(o,l){if(o)return n(o);if(e.q=l,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(ye.ONE).gcd(e.e).compareTo(ye.ONE)!==0){e.p=null,i();return}if(e.q.subtract(ye.ONE).gcd(e.e).compareTo(ye.ONE)!==0){e.q=null,s(e.qBits,a);return}if(e.p1=e.p.subtract(ye.ONE),e.q1=e.q.subtract(ye.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(ye.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,a);return}var c=e.e.modInverse(e.phi);e.keys={privateKey:ie.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:ie.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}}function Wt(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=ne.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)==0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)==128)?n.substr(1):n}function qg(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Kl(e){return ne.util.isNodejs&&typeof da[e]=="function"}function jl(e){return typeof At.globalScope!="undefined"&&typeof At.globalScope.crypto=="object"&&typeof At.globalScope.crypto.subtle=="object"&&typeof At.globalScope.crypto.subtle[e]=="function"}function zl(e){return typeof At.globalScope!="undefined"&&typeof At.globalScope.msCrypto=="object"&&typeof At.globalScope.msCrypto.subtle=="object"&&typeof At.globalScope.msCrypto.subtle[e]=="function"}function Hl(e){for(var t=ne.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}var Q=ae;if(typeof Gg=="undefined")var Gg=Q.jsbn.BigInteger;var R=Q.asn1,oe=Q.pki=Q.pki||{};oe.pbe=Q.pbe=Q.pbe||{};var Ur=oe.oids,Wg={name:"EncryptedPrivateKeyInfo",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Qg={name:"PBES2Algorithms",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:R.Class.UNIVERSAL,type:R.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Yg={name:"pkcs-12PbeParams",tagClass:R.Class.UNIVERSAL,type:R.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:R.Class.UNIVERSAL,type:R.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:R.Class.UNIVERSAL,type:R.Type.INTEGER,constructed:!1,capture:"iterations"}]};oe.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=Q.random.getBytesSync(n.saltSize),i=n.count,s=R.integerToDer(i),a,o,l;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,c,f;switch(n.algorithm){case"aes128":a=16,u=16,c=Ur["aes128-CBC"],f=Q.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,c=Ur["aes192-CBC"],f=Q.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,c=Ur["aes256-CBC"],f=Q.aes.createEncryptionCipher;break;case"des":a=8,u=8,c=Ur.desCBC,f=Q.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=n.algorithm,h}var m="hmacWith"+n.prfAlgorithm.toUpperCase(),p=Wl(m),C=Q.pkcs5.pbkdf2(t,r,i,a,p),E=Q.random.getBytesSync(u),_=f(C);_.start(E),_.update(R.toDer(e)),_.finish(),l=_.output.getBytes();var I=Xg(r,s,a,m);o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(Ur.pkcs5PBES2).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(Ur.pkcs5PBKDF2).getBytes()),I]),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(c).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,E)])])])}else if(n.algorithm==="3des"){a=24;var T=new Q.util.ByteBuffer(r),C=oe.pbe.generatePkcs12Key(t,T,1,i,a),E=oe.pbe.generatePkcs12Key(t,T,2,i,a),_=Q.des.createEncryptionCipher(C);_.start(E),_.update(R.toDer(e)),_.finish(),l=_.output.getBytes(),o=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(Ur["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,r),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=n.algorithm,h}var N=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[o,R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,l)]);return N};oe.decryptPrivateKeyInfo=function(e,t){var n=null,r={},i=[];if(!R.validate(e,Wg,r,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=R.derToOid(r.encryptionOid),o=oe.pbe.getCipher(a,r.encryptionParams,t),l=Q.util.createBuffer(r.encryptedData);return o.update(l),o.finish()&&(n=R.fromDer(o.output)),n};oe.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:R.toDer(e).getBytes()};return Q.pem.encode(n,{maxline:t})};oe.encryptedPrivateKeyFromPem=function(e){var t=Q.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return R.fromDer(t.body)};oe.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var r=oe.wrapRsaPrivateKey(oe.privateKeyToAsn1(e));return r=oe.encryptPrivateKeyInfo(r,t,n),oe.encryptedPrivateKeyToPem(r)}var i,s,a,o;switch(n.algorithm){case"aes128":i="AES-128-CBC",a=16,s=Q.random.getBytesSync(16),o=Q.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,s=Q.random.getBytesSync(16),o=Q.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,s=Q.random.getBytesSync(16),o=Q.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,s=Q.random.getBytesSync(8),o=Q.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,s=Q.random.getBytesSync(8),o=Q.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw l.algorithm=n.algorithm,l}var u=Q.pbe.opensslDeriveBytes(t,s.substr(0,8),a),c=o(u);c.start(s),c.update(R.toDer(oe.privateKeyToAsn1(e))),c.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Q.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return Q.pem.encode(f)};oe.decryptRsaPrivateKey=function(e,t){var n=null,r=Q.pem.decode(e)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var s,a;switch(r.dekInfo.algorithm){case"DES-CBC":s=8,a=Q.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,a=Q.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,a=Q.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,a=Q.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,a=Q.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,a=function(f){return Q.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":s=8,a=function(f){return Q.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":s=16,a=function(f){return Q.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var o=Q.util.hexToBytes(r.dekInfo.parameters),l=Q.pbe.opensslDeriveBytes(t,o.substr(0,8),s),u=a(l);if(u.start(o),u.update(Q.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=oe.decryptPrivateKeyInfo(R.fromDer(n),t):n=R.fromDer(n),n!==null&&(n=oe.privateKeyFromAsn1(n)),n};oe.pbe.generatePkcs12Key=function(e,t,n,r,i,s){var a,o;if(typeof s=="undefined"||s===null){if(!("sha1"in Q.md))throw new Error('"sha1" hash algorithm unavailable.');s=Q.md.sha1.create()}var l=s.digestLength,u=s.blockLength,c=new Q.util.ByteBuffer,f=new Q.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var h=f.length(),m=t.length(),p=new Q.util.ByteBuffer;p.fillWithByte(n,u);var C=u*Math.ceil(m/u),E=new Q.util.ByteBuffer;for(o=0;o<C;o++)E.putByte(t.at(o%m));var _=u*Math.ceil(h/u),I=new Q.util.ByteBuffer;for(o=0;o<_;o++)I.putByte(f.at(o%h));var T=E;T.putBuffer(I);for(var N=Math.ceil(i/l),O=1;O<=N;O++){var B=new Q.util.ByteBuffer;B.putBytes(p.bytes()),B.putBytes(T.bytes());for(var Y=0;Y<r;Y++)s.start(),s.update(B.getBytes()),B=s.digest();var J=new Q.util.ByteBuffer;for(o=0;o<u;o++)J.putByte(B.at(o%l));var se=Math.ceil(m/u)+Math.ceil(h/u),ue=new Q.util.ByteBuffer;for(a=0;a<se;a++){var le=new Q.util.ByteBuffer(T.getBytes(u)),Be=511;for(o=J.length()-1;o>=0;o--)Be=Be>>8,Be+=J.at(o)+le.at(o),le.setAt(o,Be&255);ue.putBuffer(le)}T=ue,c.putBuffer(B)}return c.truncate(c.length()-i),c};oe.pbe.getCipher=function(e,t,n){switch(e){case oe.oids.pkcs5PBES2:return oe.pbe.getCipherForPBES2(e,t,n);case oe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case oe.oids["pbewithSHAAnd40BitRC2-CBC"]:return oe.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};oe.pbe.getCipherForPBES2=function(e,t,n){var r={},i=[];if(!R.validate(t,Qg,r,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=R.derToOid(r.kdfOid),e!==oe.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=R.derToOid(r.encOid),e!==oe.oids["aes128-CBC"]&&e!==oe.oids["aes192-CBC"]&&e!==oe.oids["aes256-CBC"]&&e!==oe.oids["des-EDE3-CBC"]&&e!==oe.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var a=r.kdfSalt,o=Q.util.createBuffer(r.kdfIterationCount);o=o.getInt(o.length()<<3);var l,u;switch(oe.oids[e]){case"aes128-CBC":l=16,u=Q.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,u=Q.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,u=Q.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,u=Q.des.createDecryptionCipher;break;case"desCBC":l=8,u=Q.des.createDecryptionCipher;break}var c=Gl(r.prfOid),f=Q.pkcs5.pbkdf2(n,a,o,l,c),h=r.encIv,m=u(f);return m.start(h),m};oe.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},i=[];if(!R.validate(t,Yg,r,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var a=Q.util.createBuffer(r.salt),o=Q.util.createBuffer(r.iterations);o=o.getInt(o.length()<<3);var l,u,c;switch(e){case oe.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,u=8,c=Q.des.startDecrypting;break;case oe.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,u=8,c=function(C,E){var _=Q.rc2.createDecryptionCipher(C,40);return _.start(E,null),_};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var f=Gl(r.prfOid),h=oe.pbe.generatePkcs12Key(n,a,1,o,l,f);f.start();var m=oe.pbe.generatePkcs12Key(n,a,2,o,u,f);return c(h,m)};oe.pbe.opensslDeriveBytes=function(e,t,n,r){if(typeof r=="undefined"||r===null){if(!("md5"in Q.md))throw new Error('"md5" hash algorithm unavailable.');r=Q.md.md5.create()}t===null&&(t="");for(var i=[ql(r,e+t)],s=16,a=1;s<n;++a,s+=16)i.push(ql(r,i[a-1]+e+t));return i.join("").substr(0,n)};function ql(e,t){return e.start().update(t).digest().getBytes()}function Gl(e){var t;if(!e)t="hmacWithSHA1";else if(t=oe.oids[R.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return Wl(t)}function Wl(e){var t=Q.md;switch(e){case"hmacWithSHA224":t=Q.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function Xg(e,t,n,r){var i=R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OCTETSTRING,!1,e),R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,t.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(R.create(R.Class.UNIVERSAL,R.Type.INTEGER,!1,Q.util.hexToBytes(n.toString(16))),R.create(R.Class.UNIVERSAL,R.Type.SEQUENCE,!0,[R.create(R.Class.UNIVERSAL,R.Type.OID,!1,R.oidToDer(oe.oids[r]).getBytes()),R.create(R.Class.UNIVERSAL,R.Type.NULL,!1,"")])),i}var nn=ae,G=nn.asn1,sn=nn.pkcs7asn1=nn.pkcs7asn1||{};nn.pkcs7=nn.pkcs7||{};nn.pkcs7.asn1=sn;var Ql={name:"ContentInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:G.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};sn.contentInfoValidator=Ql;var Yl={name:"EncryptedContentInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:G.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:G.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};sn.envelopedDataValidator={name:"EnvelopedData",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:G.Class.UNIVERSAL,type:G.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(Yl)};sn.encryptedDataValidator={name:"EncryptedData",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"version"}].concat(Yl)};var Jg={name:"SignerInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:G.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:G.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:G.Class.UNIVERSAL,type:G.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:G.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};sn.signedDataValidator={name:"SignedData",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:G.Class.UNIVERSAL,type:G.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Ql,{name:"SignedData.Certificates",tagClass:G.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:G.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:G.Class.UNIVERSAL,type:G.Type.SET,capture:"signerInfos",optional:!0,value:[Jg]}]};sn.recipientInfoValidator={name:"RecipientInfo",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:G.Class.UNIVERSAL,type:G.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:G.Class.UNIVERSAL,type:G.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:G.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:G.Class.UNIVERSAL,type:G.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Or=ae;Or.mgf=Or.mgf||{};var Zg=Or.mgf.mgf1=Or.mgf1=Or.mgf1||{};Zg.create=function(e){var t={generate:function(n,r){for(var i=new Or.util.ByteBuffer,s=Math.ceil(r/e.digestLength),a=0;a<s;a++){var o=new Or.util.ByteBuffer;o.putInt32(a),e.start(),e.update(n+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t};var Vi=ae;Vi.mgf=Vi.mgf||{};Vi.mgf.mgf1=Vi.mgf1;var Pr=ae,$g=Pr.pss=Pr.pss||{};$g.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=Pr.util.createBuffer(i));var s;if("saltLength"in e)s=e.saltLength;else if(i!==null)s=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==s)throw new Error("Given salt length does not match length of given salt.");var a=e.prng||Pr.random,o={};return o.encode=function(l,u){var c,f=u-1,h=Math.ceil(f/8),m=l.digest().getBytes();if(h<r+s+2)throw new Error("Message is too long to encrypt.");var p;i===null?p=a.getBytesSync(s):p=i.bytes();var C=new Pr.util.ByteBuffer;C.fillWithByte(0,8),C.putBytes(m),C.putBytes(p),t.start(),t.update(C.getBytes());var E=t.digest().getBytes(),_=new Pr.util.ByteBuffer;_.fillWithByte(0,h-s-r-2),_.putByte(1),_.putBytes(p);var I=_.getBytes(),T=h-r-1,N=n.generate(E,T),O="";for(c=0;c<T;c++)O+=String.fromCharCode(I.charCodeAt(c)^N.charCodeAt(c));var B=65280>>8*h-f&255;return O=String.fromCharCode(O.charCodeAt(0)&~B)+O.substr(1),O+E+String.fromCharCode(188)},o.verify=function(l,u,c){var f,h=c-1,m=Math.ceil(h/8);if(u=u.substr(-m),m<r+s+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(m-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var p=m-r-1,C=u.substr(0,p),E=u.substr(p,r),_=65280>>8*m-h&255;if((C.charCodeAt(0)&_)!=0)throw new Error("Bits beyond keysize not zero as expected.");var I=n.generate(E,p),T="";for(f=0;f<p;f++)T+=String.fromCharCode(C.charCodeAt(f)^I.charCodeAt(f));T=String.fromCharCode(T.charCodeAt(0)&~_)+T.substr(1);var N=m-r-s-2;for(f=0;f<N;f++)if(T.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(T.charCodeAt(N)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var O=T.substr(-s),B=new Pr.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(l),B.putBytes(O),t.start(),t.update(B.getBytes());var Y=t.digest().getBytes();return E===Y},o};var j=ae,g=j.asn1,K=j.pki=j.pki||{},te=K.oids,Oe={};Oe.CN=te.commonName;Oe.commonName="CN";Oe.C=te.countryName;Oe.countryName="C";Oe.L=te.localityName;Oe.localityName="L";Oe.ST=te.stateOrProvinceName;Oe.stateOrProvinceName="ST";Oe.O=te.organizationName;Oe.organizationName="O";Oe.OU=te.organizationalUnitName;Oe.organizationalUnitName="OU";Oe.E=te.emailAddress;Oe.emailAddress="E";var Xl=j.pki.rsa.publicKeyValidator,ev={name:"Certificate",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:g.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:g.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:g.Class.UNIVERSAL,type:g.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:g.Class.UNIVERSAL,type:g.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:g.Class.UNIVERSAL,type:g.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:g.Class.UNIVERSAL,type:g.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Xl,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:g.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:g.Class.UNIVERSAL,type:g.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:g.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:g.Class.UNIVERSAL,type:g.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:g.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:g.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:g.Class.UNIVERSAL,type:g.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},tv={name:"rsapss",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:g.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:g.Class.UNIVERSAL,type:g.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:g.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:g.Class.UNIVERSAL,type:g.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:g.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:g.Class.UNIVERSAL,type:g.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:g.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:g.Class.UNIVERSAL,type:g.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},rv={name:"CertificationRequestInfo",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:g.Class.UNIVERSAL,type:g.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Xl,{name:"CertificationRequestInfo.attributes",tagClass:g.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:g.Class.UNIVERSAL,type:g.Type.SET,constructed:!0}]}]}]},nv={name:"CertificationRequest",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[rv,{name:"CertificationRequest.signatureAlgorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:g.Class.UNIVERSAL,type:g.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:g.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:g.Class.UNIVERSAL,type:g.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};K.RDNAttributesAsArray=function(e,t){for(var n=[],r,i,s,a=0;a<e.value.length;++a){r=e.value[a];for(var o=0;o<r.value.length;++o)s={},i=r.value[o],s.type=g.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in te&&(s.name=te[s.type],s.name in Oe&&(s.shortName=Oe[s.name])),t&&(t.update(s.type),t.update(s.value)),n.push(s)}return n};K.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=g.derToOid(r.value[0].value),s=r.value[1].value,a=0;a<s.length;++a){var o={};if(o.type=i,o.value=s[a].value,o.valueTagClass=s[a].type,o.type in te&&(o.name=te[o.type],o.name in Oe&&(o.shortName=Oe[o.name])),o.type===te.extensionRequest){o.extensions=[];for(var l=0;l<o.value.length;++l)o.extensions.push(K.certificateExtensionFromAsn1(o.value[l]))}t.push(o)}return t};function cr(e,t){typeof t=="string"&&(t={shortName:t});for(var n=null,r,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}var Fi=function(e,t,n){var r={};if(e!==te["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:te.sha1},mgf:{algorithmOid:te.mgf1,hash:{algorithmOid:te.sha1}},saltLength:20});var i={},s=[];if(!g.validate(t,tv,i,s)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=s,a}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=g.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=g.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=g.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r};K.certificateFromPem=function(e,t,n){var r=j.pem.decode(e)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=g.fromDer(r.body,n);return K.certificateFromAsn1(s,t)};K.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:g.toDer(K.certificateToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};K.publicKeyFromPem=function(e){var t=j.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=g.fromDer(t.body);return K.publicKeyFromAsn1(r)};K.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:g.toDer(K.publicKeyToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};K.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:g.toDer(K.publicKeyToRSAPublicKey(e)).getBytes()};return j.pem.encode(n,{maxline:t})};K.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||j.md.sha1.create(),r=t.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=g.toDer(K.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=g.toDer(K.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(i);var s=n.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};K.certificationRequestFromPem=function(e,t,n){var r=j.pem.decode(e)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=g.fromDer(r.body,n);return K.certificationRequestFromAsn1(s,t)};K.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:g.toDer(K.certificationRequestToAsn1(e)).getBytes()};return j.pem.encode(n,{maxline:t})};K.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return cr(e.issuer,t)},e.issuer.addField=function(t){Bt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return cr(e.subject,t)},e.subject.addField=function(t){Bt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){Bt(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){Bt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)Jl(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var n=null,r,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,n){e.md=n||j.md.sha1.create();var r=te[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.tbsCertificate=K.getTBSCertificate(e);var s=g.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=r.attributes,s.actualIssuer=i.attributes,s}var a=t.md;if(a===null){if(t.signatureOid in te){var o=te[t.signatureOid];switch(o){case"sha1WithRSAEncryption":a=j.md.sha1.create();break;case"md5WithRSAEncryption":a=j.md.md5.create();break;case"sha256WithRSAEncryption":a=j.md.sha256.create();break;case"sha384WithRSAEncryption":a=j.md.sha384.create();break;case"sha512WithRSAEncryption":a=j.md.sha512.create();break;case"RSASSA-PSS":a=j.md.sha256.create();break}}if(a===null){var s=new Error("Could not compute certificate digest. Unknown signature OID.");throw s.signatureOid=t.signatureOid,s}var l=t.tbsCertificate||K.getTBSCertificate(t),u=g.toDer(l);a.update(u.getBytes())}if(a!==null){var c;switch(t.signatureOid){case te.sha1WithRSAEncryption:c=void 0;break;case te["RSASSA-PSS"]:var f,h;if(f=te[t.signatureParameters.mgf.hash.algorithmOid],f===void 0||j.md[f]===void 0){var s=new Error("Unsupported MGF hash function.");throw s.oid=t.signatureParameters.mgf.hash.algorithmOid,s.name=f,s}if(h=te[t.signatureParameters.mgf.algorithmOid],h===void 0||j.mgf[h]===void 0){var s=new Error("Unsupported MGF function.");throw s.oid=t.signatureParameters.mgf.algorithmOid,s.name=h,s}if(h=j.mgf[h].create(j.md[f].create()),f=te[t.signatureParameters.hash.algorithmOid],f===void 0||j.md[f]===void 0)throw{message:"Unsupported RSASSA-PSS hash function.",oid:t.signatureParameters.hash.algorithmOid,name:f};c=j.pss.create(j.md[f].create(),h,t.signatureParameters.saltLength);break}n=e.publicKey.verify(a.digest().getBytes(),t.signature,c)}return n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var s,a,o=0;n&&o<r.attributes.length;++o)s=r.attributes[o],a=i.attributes[o],(s.type!==a.type||s.value!==a.value)&&(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return K.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=te.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var r=e.extensions[n];if(r.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return j.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},e};K.certificateFromAsn1=function(e,t){var n={},r=[];if(!g.validate(e,ev,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var s=g.derToOid(n.publicKeyOid);if(s!==K.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=K.createCertificate();a.version=n.certVersion?n.certVersion.charCodeAt(0):0;var o=j.util.createBuffer(n.certSerialNumber);a.serialNumber=o.toHex(),a.signatureOid=j.asn1.derToOid(n.certSignatureOid),a.signatureParameters=Fi(a.signatureOid,n.certSignatureParams,!0),a.siginfo.algorithmOid=j.asn1.derToOid(n.certinfoSignatureOid),a.siginfo.parameters=Fi(a.siginfo.algorithmOid,n.certinfoSignatureParams,!1),a.signature=n.certSignature;var l=[];if(n.certValidity1UTCTime!==void 0&&l.push(g.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&l.push(g.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&l.push(g.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&l.push(g.generalizedTimeToDate(n.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=l[0],a.validity.notAfter=l[1],a.tbsCertificate=n.tbsCertificate,t){if(a.md=null,a.signatureOid in te){var s=te[a.signatureOid];switch(s){case"sha1WithRSAEncryption":a.md=j.md.sha1.create();break;case"md5WithRSAEncryption":a.md=j.md.md5.create();break;case"sha256WithRSAEncryption":a.md=j.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=j.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=j.md.sha512.create();break;case"RSASSA-PSS":a.md=j.md.sha256.create();break}}if(a.md===null){var i=new Error("Could not compute certificate digest. Unknown signature OID.");throw i.signatureOid=a.signatureOid,i}var u=g.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var c=j.md.sha1.create();a.issuer.getField=function(h){return cr(a.issuer,h)},a.issuer.addField=function(h){Bt([h]),a.issuer.attributes.push(h)},a.issuer.attributes=K.RDNAttributesAsArray(n.certIssuer,c),n.certIssuerUniqueId&&(a.issuer.uniqueId=n.certIssuerUniqueId),a.issuer.hash=c.digest().toHex();var f=j.md.sha1.create();return a.subject.getField=function(h){return cr(a.subject,h)},a.subject.addField=function(h){Bt([h]),a.subject.attributes.push(h)},a.subject.attributes=K.RDNAttributesAsArray(n.certSubject,f),n.certSubjectUniqueId&&(a.subject.uniqueId=n.certSubjectUniqueId),a.subject.hash=f.digest().toHex(),n.certExtensions?a.extensions=K.certificateExtensionsFromAsn1(n.certExtensions):a.extensions=[],a.publicKey=K.publicKeyFromAsn1(n.subjectPublicKeyInfo),a};K.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(K.certificateExtensionFromAsn1(r.value[i]));return t};K.certificateExtensionFromAsn1=function(e){var t={};if(t.id=g.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===g.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in te){if(t.name=te[t.id],t.name==="keyUsage"){var n=g.fromDer(t.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(r&128)==128,t.nonRepudiation=(r&64)==64,t.keyEncipherment=(r&32)==32,t.dataEncipherment=(r&16)==16,t.keyAgreement=(r&8)==8,t.keyCertSign=(r&4)==4,t.cRLSign=(r&2)==2,t.encipherOnly=(r&1)==1,t.decipherOnly=(i&128)==128}else if(t.name==="basicConstraints"){var n=g.fromDer(t.value);n.value.length>0&&n.value[0].type===g.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var s=null;n.value.length>0&&n.value[0].type===g.Type.INTEGER?s=n.value[0].value:n.value.length>1&&(s=n.value[1].value),s!==null&&(t.pathLenConstraint=g.derToInteger(s))}else if(t.name==="extKeyUsage")for(var n=g.fromDer(t.value),a=0;a<n.value.length;++a){var o=g.derToOid(n.value[a].value);o in te?t[te[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var n=g.fromDer(t.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),t.client=(r&128)==128,t.server=(r&64)==64,t.email=(r&32)==32,t.objsign=(r&16)==16,t.reserved=(r&8)==8,t.sslCA=(r&4)==4,t.emailCA=(r&2)==2,t.objCA=(r&1)==1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,n=g.fromDer(t.value),u=0;u<n.value.length;++u){l=n.value[u];var c={type:l.type,value:l.value};switch(t.altNames.push(c),l.type){case 1:case 2:case 6:break;case 7:c.ip=j.util.bytesToIP(l.value);break;case 8:c.oid=g.derToOid(l.value);break}}}else if(t.name==="subjectKeyIdentifier"){var n=g.fromDer(t.value);t.subjectKeyIdentifier=j.util.bytesToHex(n.value)}}return t};K.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!g.validate(e,nv,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var s=g.derToOid(n.publicKeyOid);if(s!==K.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=K.createCertificationRequest();if(a.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,a.signatureOid=j.asn1.derToOid(n.csrSignatureOid),a.signatureParameters=Fi(a.signatureOid,n.csrSignatureParams,!0),a.siginfo.algorithmOid=j.asn1.derToOid(n.csrSignatureOid),a.siginfo.parameters=Fi(a.siginfo.algorithmOid,n.csrSignatureParams,!1),a.signature=n.csrSignature,a.certificationRequestInfo=n.certificationRequestInfo,t){if(a.md=null,a.signatureOid in te){var s=te[a.signatureOid];switch(s){case"sha1WithRSAEncryption":a.md=j.md.sha1.create();break;case"md5WithRSAEncryption":a.md=j.md.md5.create();break;case"sha256WithRSAEncryption":a.md=j.md.sha256.create();break;case"sha384WithRSAEncryption":a.md=j.md.sha384.create();break;case"sha512WithRSAEncryption":a.md=j.md.sha512.create();break;case"RSASSA-PSS":a.md=j.md.sha256.create();break}}if(a.md===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=a.signatureOid,i}var o=g.toDer(a.certificationRequestInfo);a.md.update(o.getBytes())}var l=j.md.sha1.create();return a.subject.getField=function(u){return cr(a.subject,u)},a.subject.addField=function(u){Bt([u]),a.subject.attributes.push(u)},a.subject.attributes=K.RDNAttributesAsArray(n.certificationRequestInfoSubject,l),a.subject.hash=l.digest().toHex(),a.publicKey=K.publicKeyFromAsn1(n.subjectPublicKeyInfo),a.getAttribute=function(u){return cr(a,u)},a.addAttribute=function(u){Bt([u]),a.attributes.push(u)},a.attributes=K.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),a};K.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return cr(e.subject,t)},e.subject.addField=function(t){Bt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return cr(e,t)},e.addAttribute=function(t){Bt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){Bt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){Bt(t),e.attributes=t},e.sign=function(t,n){e.md=n||j.md.sha1.create();var r=te[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.certificationRequestInfo=K.getCertificationRequestInfo(e);var s=g.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){if(e.signatureOid in te){var r=te[e.signatureOid];switch(r){case"sha1WithRSAEncryption":n=j.md.sha1.create();break;case"md5WithRSAEncryption":n=j.md.md5.create();break;case"sha256WithRSAEncryption":n=j.md.sha256.create();break;case"sha384WithRSAEncryption":n=j.md.sha384.create();break;case"sha512WithRSAEncryption":n=j.md.sha512.create();break;case"RSASSA-PSS":n=j.md.sha256.create();break}}if(n===null){var i=new Error("Could not compute certification request digest. Unknown signature OID.");throw i.signatureOid=e.signatureOid,i}var s=e.certificationRequestInfo||K.getCertificationRequestInfo(e),a=g.toDer(s);n.update(a.getBytes())}if(n!==null){var o;switch(e.signatureOid){case te.sha1WithRSAEncryption:break;case te["RSASSA-PSS"]:var l,u;if(l=te[e.signatureParameters.mgf.hash.algorithmOid],l===void 0||j.md[l]===void 0){var i=new Error("Unsupported MGF hash function.");throw i.oid=e.signatureParameters.mgf.hash.algorithmOid,i.name=l,i}if(u=te[e.signatureParameters.mgf.algorithmOid],u===void 0||j.mgf[u]===void 0){var i=new Error("Unsupported MGF function.");throw i.oid=e.signatureParameters.mgf.algorithmOid,i.name=u,i}if(u=j.mgf[u].create(j.md[l].create()),l=te[e.signatureParameters.hash.algorithmOid],l===void 0||j.md[l]===void 0){var i=new Error("Unsupported RSASSA-PSS hash function.");throw i.oid=e.signatureParameters.hash.algorithmOid,i.name=l,i}o=j.pss.create(j.md[l].create(),u,e.signatureParameters.saltLength);break}t=e.publicKey.verify(n.digest().getBytes(),e.signature,o)}return t},e};function an(e){for(var t=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]),n,r,i=e.attributes,s=0;s<i.length;++s){n=i[s];var a=n.value,o=g.Type.PRINTABLESTRING;"valueTagClass"in n&&(o=n.valueTagClass,o===g.Type.UTF8&&(a=j.util.encodeUtf8(a))),r=g.create(g.Class.UNIVERSAL,g.Type.SET,!0,[g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(n.type).getBytes()),g.create(g.Class.UNIVERSAL,o,!1,a)])]),t.value.push(r)}return t}function Bt(e){for(var t,n=0;n<e.length;++n){if(t=e[n],typeof t.name=="undefined"&&(t.type&&t.type in K.oids?t.name=K.oids[t.type]:t.shortName&&t.shortName in Oe&&(t.name=K.oids[Oe[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in K.oids)t.type=K.oids[t.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=t,r}if(typeof t.shortName=="undefined"&&t.name&&t.name in Oe&&(t.shortName=Oe[t.name]),t.type===te.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=g.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(K.certificateExtensionToAsn1(Jl(t.extensions[i])))}if(typeof t.value=="undefined"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function Jl(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in K.oids&&(e.name=K.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in K.oids)e.id=K.oids[e.name];else{var n=new Error("Extension ID not specified.");throw n.extension=e,n}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var r=0,i=0,s=0;e.digitalSignature&&(i|=128,r=7),e.nonRepudiation&&(i|=64,r=6),e.keyEncipherment&&(i|=32,r=5),e.dataEncipherment&&(i|=16,r=4),e.keyAgreement&&(i|=8,r=3),e.keyCertSign&&(i|=4,r=2),e.cRLSign&&(i|=2,r=1),e.encipherOnly&&(i|=1,r=0),e.decipherOnly&&(s|=128,r=7);var a=String.fromCharCode(r);s!==0?a+=String.fromCharCode(i)+String.fromCharCode(s):i!==0&&(a+=String.fromCharCode(i)),e.value=g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,a)}else if(e.name==="basicConstraints")e.value=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(g.create(g.Class.UNIVERSAL,g.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var l in e)e[l]===!0&&(l in te?o.push(g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(te[l]).getBytes())):l.indexOf(".")!==-1&&o.push(g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var r=0,i=0;e.client&&(i|=128,r=7),e.server&&(i|=64,r=6),e.email&&(i|=32,r=5),e.objsign&&(i|=16,r=4),e.reserved&&(i|=8,r=3),e.sslCA&&(i|=4,r=2),e.emailCA&&(i|=2,r=1),e.objCA&&(i|=1,r=0);var a=String.fromCharCode(r);i!==0&&(a+=String.fromCharCode(i)),e.value=g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,a)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);for(var u,c=0;c<e.altNames.length;++c){u=e.altNames[c];var a=u.value;if(u.type===7&&u.ip){if(a=j.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else u.type===8&&(u.oid?a=g.oidToDer(g.oidToDer(u.oid)):a=g.oidToDer(a));e.value.value.push(g.create(g.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=g.create(g.Class.UNIVERSAL,g.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=g.create(g.Class.UNIVERSAL,g.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(g.create(g.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var m=[g.create(g.Class.CONTEXT_SPECIFIC,4,!0,[an(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(g.create(g.Class.CONTEXT_SPECIFIC,1,!0,m))}if(e.serialNumber){var p=j.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(g.create(g.Class.CONTEXT_SPECIFIC,2,!1,p))}}else if(e.name==="cRLDistributionPoints"){e.value=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);for(var o=e.value.value,C=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]),E=g.create(g.Class.CONTEXT_SPECIFIC,0,!0,[]),u,c=0;c<e.altNames.length;++c){u=e.altNames[c];var a=u.value;if(u.type===7&&u.ip){if(a=j.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else u.type===8&&(u.oid?a=g.oidToDer(g.oidToDer(u.oid)):a=g.oidToDer(a));E.value.push(g.create(g.Class.CONTEXT_SPECIFIC,u.type,!1,a))}C.value.push(g.create(g.Class.CONTEXT_SPECIFIC,0,!0,[E])),o.push(C)}if(typeof e.value=="undefined"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function pa(e,t){switch(e){case te["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==void 0&&n.push(g.create(g.Class.CONTEXT_SPECIFIC,0,!0,[g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(t.hash.algorithmOid).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&n.push(g.create(g.Class.CONTEXT_SPECIFIC,1,!0,[g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(t.mgf.algorithmOid).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(t.mgf.hash.algorithmOid).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&n.push(g.create(g.Class.CONTEXT_SPECIFIC,2,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(t.saltLength).getBytes())])),g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,n);default:return g.create(g.Class.UNIVERSAL,g.Type.NULL,!1,"")}}function iv(e){var t=g.create(g.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var n=e.attributes,r=0;r<n.length;++r){var i=n[r],s=i.value,a=g.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===g.Type.UTF8&&(s=j.util.encodeUtf8(s));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var l=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(i.type).getBytes()),g.create(g.Class.UNIVERSAL,g.Type.SET,!0,[g.create(g.Class.UNIVERSAL,a,o,s)])]);t.value.push(l)}return t}var sv=new Date("1950-01-01T00:00:00Z"),av=new Date("2050-01-01T00:00:00Z");function Zl(e){return e>=sv&&e<av?g.create(g.Class.UNIVERSAL,g.Type.UTCTIME,!1,g.dateToUtcTime(e)):g.create(g.Class.UNIVERSAL,g.Type.GENERALIZEDTIME,!1,g.dateToGeneralizedTime(e))}K.getTBSCertificate=function(e){var t=Zl(e.validity.notBefore),n=Zl(e.validity.notAfter),r=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.CONTEXT_SPECIFIC,0,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(e.version).getBytes())]),g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,j.util.hexToBytes(e.serialNumber)),g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(e.siginfo.algorithmOid).getBytes()),pa(e.siginfo.algorithmOid,e.siginfo.parameters)]),an(e.issuer),g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[t,n]),an(e.subject),K.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(g.create(g.Class.CONTEXT_SPECIFIC,1,!0,[g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(g.create(g.Class.CONTEXT_SPECIFIC,2,!0,[g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&r.value.push(K.certificateExtensionsToAsn1(e.extensions)),r};K.getCertificationRequestInfo=function(e){var t=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.INTEGER,!1,g.integerToDer(e.version).getBytes()),an(e.subject),K.publicKeyToAsn1(e.publicKey),iv(e)]);return t};K.distinguishedNameToAsn1=function(e){return an(e)};K.certificateToAsn1=function(e){var t=e.tbsCertificate||K.getTBSCertificate(e);return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[t,g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(e.signatureOid).getBytes()),pa(e.signatureOid,e.signatureParameters)]),g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};K.certificateExtensionsToAsn1=function(e){var t=g.create(g.Class.CONTEXT_SPECIFIC,3,!0,[]),n=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(K.certificateExtensionToAsn1(e[r]));return t};K.certificateExtensionToAsn1=function(e){var t=g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[]);t.value.push(g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(e.id).getBytes())),e.critical&&t.value.push(g.create(g.Class.UNIVERSAL,g.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return typeof e.value!="string"&&(n=g.toDer(n).getBytes()),t.value.push(g.create(g.Class.UNIVERSAL,g.Type.OCTETSTRING,!1,n)),t};K.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||K.getCertificationRequestInfo(e);return g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[t,g.create(g.Class.UNIVERSAL,g.Type.SEQUENCE,!0,[g.create(g.Class.UNIVERSAL,g.Type.OID,!1,g.oidToDer(e.signatureOid).getBytes()),pa(e.signatureOid,e.signatureParameters)]),g.create(g.Class.UNIVERSAL,g.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])};K.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(a){var o=n(a.issuer);return o},t.addCertificate=function(a){if(typeof a=="string"&&(a=j.pki.certificateFromPem(a)),r(a.subject),!t.hasCertificate(a))if(a.subject.hash in t.certs){var o=t.certs[a.subject.hash];j.util.isArray(o)||(o=[o]),o.push(a),t.certs[a.subject.hash]=o}else t.certs[a.subject.hash]=a},t.hasCertificate=function(a){typeof a=="string"&&(a=j.pki.certificateFromPem(a));var o=n(a.subject);if(!o)return!1;j.util.isArray(o)||(o=[o]);for(var l=g.toDer(K.certificateToAsn1(a)).getBytes(),u=0;u<o.length;++u){var c=g.toDer(K.certificateToAsn1(o[u])).getBytes();if(l===c)return!0}return!1},t.listAllCertificates=function(){var a=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var l=t.certs[o];if(!j.util.isArray(l))a.push(l);else for(var u=0;u<l.length;++u)a.push(l[u])}return a},t.removeCertificate=function(a){var o;if(typeof a=="string"&&(a=j.pki.certificateFromPem(a)),r(a.subject),!t.hasCertificate(a))return null;var l=n(a.subject);if(!j.util.isArray(l))return o=t.certs[a.subject.hash],delete t.certs[a.subject.hash],o;for(var u=g.toDer(K.certificateToAsn1(a)).getBytes(),c=0;c<l.length;++c){var f=g.toDer(K.certificateToAsn1(l[c])).getBytes();u===f&&(o=l[c],l.splice(c,1))}return l.length===0&&delete t.certs[a.subject.hash],o};function n(a){return r(a),t.certs[a.hash]||null}function r(a){if(!a.hash){var o=j.md.sha1.create();a.attributes=K.RDNAttributesAsArray(an(a),o),a.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t};K.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};K.verifyCertificateChain=function(e,t,n){typeof n=="function"&&(n={verify:n}),n=n||{},t=t.slice(0);var r=t.slice(0),i=n.validityCheckDate;typeof i=="undefined"&&(i=new Date);var s=!0,a=null,o=0;do{var l=t.shift(),u=null,c=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:K.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),a===null){if(u=t[0]||e.getIssuer(l),u===null&&l.isIssuer(l)&&(c=!0,u=l),u){var f=u;j.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){u=f.shift();try{h=u.verify(l)}catch{}}h||(a={message:"Certificate signature is invalid.",error:K.certificateError.bad_certificate})}a===null&&(!u||c)&&!e.hasCertificate(l)&&(a={message:"Certificate is not trusted.",error:K.certificateError.unknown_ca})}if(a===null&&u&&!l.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:K.certificateError.bad_certificate}),a===null)for(var m={keyUsage:!0,basicConstraints:!0},p=0;a===null&&p<l.extensions.length;++p){var C=l.extensions[p];C.critical&&!(C.name in m)&&(a={message:"Certificate has an unsupported critical extension.",error:K.certificateError.unsupported_certificate})}if(a===null&&(!s||t.length===0&&(!u||c))){var E=l.getExtension("basicConstraints"),_=l.getExtension("keyUsage");if(_!==null&&(!_.keyCertSign||E===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:K.certificateError.bad_certificate}),a===null&&E!==null&&!E.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:K.certificateError.bad_certificate}),a===null&&_!==null&&"pathLenConstraint"in E){var I=o-1;I>E.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:K.certificateError.bad_certificate})}}var T=a===null?!0:a.error,N=n.verify?n.verify(T,o,r):T;if(N===!0)a=null;else throw T===!0&&(a={message:"The application rejected the certificate.",error:K.certificateError.bad_certificate}),(N||N===0)&&(typeof N=="object"&&!j.util.isArray(N)?(N.message&&(a.message=N.message),N.error&&(a.error=N.error)):typeof N=="string"&&(a.error=N)),a;s=!1,++o}while(t.length>0);return!0};var Ae=ae,x=Ae.asn1,fe=Ae.pki,Pn=Ae.pkcs12=Ae.pkcs12||{},$l={name:"ContentInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:x.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},ov={name:"PFX",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"version"},$l,{name:"PFX.macData",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},lv={name:"SafeBag",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:x.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:x.Class.UNIVERSAL,type:x.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},uv={name:"Attribute",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:x.Class.UNIVERSAL,type:x.Type.SET,constructed:!0,capture:"values"}]},cv={name:"CertBag",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:x.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:x.Class.UNIVERSAL,type:x.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Vn(e,t,n,r){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];if(!(r!==void 0&&o.type!==r)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(n)>=0&&i.push(o)}}return i}Pn.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===void 0&&(t=!0);var r={},i=[];if(!x.validate(e,ov,r,i)){var s=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw s.errors=s,s}var a={version:r.version.charCodeAt(0),safeContents:[],getBags:function(E){var _={},I;return"localKeyId"in E?I=E.localKeyId:"localKeyIdHex"in E&&(I=Ae.util.hexToBytes(E.localKeyIdHex)),I===void 0&&!("friendlyName"in E)&&"bagType"in E&&(_[E.bagType]=Vn(a.safeContents,null,null,E.bagType)),I!==void 0&&(_.localKeyId=Vn(a.safeContents,"localKeyId",I,E.bagType)),"friendlyName"in E&&(_.friendlyName=Vn(a.safeContents,"friendlyName",E.friendlyName,E.bagType)),_},getBagsByFriendlyName:function(E,_){return Vn(a.safeContents,"friendlyName",E,_)},getBagsByLocalKeyId:function(E,_){return Vn(a.safeContents,"localKeyId",E,_)}};if(r.version.charCodeAt(0)!==3){var s=new Error("PKCS#12 PFX of version other than 3 not supported.");throw s.version=r.version.charCodeAt(0),s}if(x.derToOid(r.contentType)!==fe.oids.data){var s=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw s.oid=x.derToOid(r.contentType),s}var o=r.content.value[0];if(o.tagClass!==x.Class.UNIVERSAL||o.type!==x.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=ga(o),r.mac){var l=null,u=0,c=x.derToOid(r.macAlgorithm);switch(c){case fe.oids.sha1:l=Ae.md.sha1.create(),u=20;break;case fe.oids.sha256:l=Ae.md.sha256.create(),u=32;break;case fe.oids.sha384:l=Ae.md.sha384.create(),u=48;break;case fe.oids.sha512:l=Ae.md.sha512.create(),u=64;break;case fe.oids.md5:l=Ae.md.md5.create(),u=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+c);var f=new Ae.util.ByteBuffer(r.macSalt),h="macIterations"in r?parseInt(Ae.util.bytesToHex(r.macIterations),16):1,m=Pn.generateKey(n,f,3,h,u,l),p=Ae.hmac.create();p.start(l,m),p.update(o.value);var C=p.getMac();if(C.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return fv(a,o.value,t,n),a};function ga(e){if(e.composed||e.constructed){for(var t=Ae.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function fv(e,t,n,r){if(t=x.fromDer(t,n),t.tagClass!==x.Class.UNIVERSAL||t.type!==x.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var s=t.value[i],a={},o=[];if(!x.validate(s,$l,a,o)){var l=new Error("Cannot read ContentInfo.");throw l.errors=o,l}var u={encrypted:!1},c=null,f=a.content.value[0];switch(x.derToOid(a.contentType)){case fe.oids.data:if(f.tagClass!==x.Class.UNIVERSAL||f.type!==x.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");c=ga(f).value;break;case fe.oids.encryptedData:c=hv(f,r),u.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=x.derToOid(a.contentType),l}u.safeBags=dv(c,n,r),e.safeContents.push(u)}}function hv(e,t){var n={},r=[];if(!x.validate(e,Ae.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var s=x.derToOid(n.contentType);if(s!==fe.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=s,i}s=x.derToOid(n.encAlgorithm);var a=fe.pbe.getCipher(s,n.encParameter,t),o=ga(n.encryptedContentAsn1),l=Ae.util.createBuffer(o.value);if(a.update(l),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}function dv(e,t,n){if(!t&&e.length===0)return[];if(e=x.fromDer(e,t),e.tagClass!==x.Class.UNIVERSAL||e.type!==x.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var s=e.value[i],a={},o=[];if(!x.validate(s,lv,a,o)){var l=new Error("Cannot read SafeBag.");throw l.errors=o,l}var u={type:x.derToOid(a.bagId),attributes:pv(a.bagAttributes)};r.push(u);var c,f,h=a.bagValue.value[0];switch(u.type){case fe.oids.pkcs8ShroudedKeyBag:if(h=fe.decryptPrivateKeyInfo(h,n),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case fe.oids.keyBag:try{u.key=fe.privateKeyFromAsn1(h)}catch{u.key=null,u.asn1=h}continue;case fe.oids.certBag:c=cv,f=function(){if(x.derToOid(a.certId)!==fe.oids.x509Certificate){var p=new Error("Unsupported certificate type, only X.509 supported.");throw p.oid=x.derToOid(a.certId),p}var C=x.fromDer(a.cert,t);try{u.cert=fe.certificateFromAsn1(C,!0)}catch{u.cert=null,u.asn1=C}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=u.type,l}if(c!==void 0&&!x.validate(h,c,a,o)){var l=new Error("Cannot read PKCS#12 "+c.name);throw l.errors=o,l}f()}return r}function pv(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var r={},i=[];if(!x.validate(e[n],uv,r,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var a=x.derToOid(r.oid);if(fe.oids[a]!==void 0){t[fe.oids[a]]=[];for(var o=0;o<r.values.length;++o)t[fe.oids[a]].push(r.values[o].value)}}return t}Pn.toPkcs12Asn1=function(e,t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,s;if(i!==null)i=Ae.util.hexToBytes(i);else if(r.generateLocalKeyId)if(t){var a=Ae.util.isArray(t)?t[0]:t;typeof a=="string"&&(a=fe.certificateFromPem(a));var o=Ae.md.sha1.create();o.update(x.toDer(fe.certificateToAsn1(a)).getBytes()),i=o.digest().getBytes()}else i=Ae.random.getBytes(20);var l=[];i!==null&&l.push(x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.localKeyId).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&l.push(x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.friendlyName).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,x.Type.BMPSTRING,!1,r.friendlyName)])])),l.length>0&&(s=x.create(x.Class.UNIVERSAL,x.Type.SET,!0,l));var u=[],c=[];t!==null&&(Ae.util.isArray(t)?c=t:c=[t]);for(var f=[],h=0;h<c.length;++h){t=c[h],typeof t=="string"&&(t=fe.certificateFromPem(t));var m=h===0?s:void 0,p=fe.certificateToAsn1(t),C=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.certBag).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.x509Certificate).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(p).getBytes())])])]),m]);f.push(C)}if(f.length>0){var E=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,f),_=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.data).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(E).getBytes())])]);u.push(_)}var I=null;if(e!==null){var T=fe.wrapRsaPrivateKey(fe.privateKeyToAsn1(e));n===null?I=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.keyBag).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[T]),s]):I=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.pkcs8ShroudedKeyBag).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[fe.encryptPrivateKeyInfo(T,n,r)]),s]);var N=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[I]),O=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.data).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(N).getBytes())])]);u.push(O)}var B=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,u),Y;if(r.useMac){var o=Ae.md.sha1.create(),J=new Ae.util.ByteBuffer(Ae.random.getBytes(r.saltSize)),se=r.count,e=Pn.generateKey(n,J,3,se,20),ue=Ae.hmac.create();ue.start(o,e),ue.update(x.toDer(B).getBytes());var le=ue.getMac();Y=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.sha1).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,le.getBytes())]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,J.getBytes()),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(se).getBytes())])}return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(3).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(fe.oids.data).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(B).getBytes())])]),Y])};Pn.generateKey=Ae.pbe.generatePkcs12Key;var fr=ae,va=fr.asn1,on=fr.pki=fr.pki||{};on.pemToDer=function(e){var t=fr.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return fr.util.createBuffer(t.body)};on.privateKeyFromPem=function(e){var t=fr.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=va.fromDer(t.body);return on.privateKeyFromAsn1(r)};on.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:va.toDer(on.privateKeyToAsn1(e)).getBytes()};return fr.pem.encode(n,{maxline:t})};on.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:va.toDer(e).getBytes()};return fr.pem.encode(n,{maxline:t})};var U=ae,Mi=function(e,t,n,r){var i=U.util.createBuffer(),s=e.length>>1,a=s+(e.length&1),o=e.substr(0,a),l=e.substr(s,a),u=U.util.createBuffer(),c=U.hmac.create();n=t+n;var f=Math.ceil(r/16),h=Math.ceil(r/20);c.start("MD5",o);var m=U.util.createBuffer();u.putBytes(n);for(var p=0;p<f;++p)c.start(null,null),c.update(u.getBytes()),u.putBuffer(c.digest()),c.start(null,null),c.update(u.bytes()+n),m.putBuffer(c.digest());c.start("SHA1",l);var C=U.util.createBuffer();u.clear(),u.putBytes(n);for(var p=0;p<h;++p)c.start(null,null),c.update(u.getBytes()),u.putBuffer(c.digest()),c.start(null,null),c.update(u.bytes()+n),C.putBuffer(c.digest());return i.putBytes(U.util.xorBytes(m.getBytes(),C.getBytes(),r)),i},gv=function(e,t,n){var r=U.hmac.create();r.start("SHA1",e);var i=U.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},vv=function(e,t,n){var r=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=U.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},yv=function(e,t,n){var r=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=U.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},bt=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32();break}return U.util.createBuffer(e.getBytes(n))},kt=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},y={};y.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};y.SupportedVersions=[y.Versions.TLS_1_1,y.Versions.TLS_1_0];y.Version=y.SupportedVersions[0];y.MaxFragment=16384-1024;y.ConnectionEnd={server:0,client:1};y.PRFAlgorithm={tls_prf_sha256:0};y.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};y.CipherType={stream:0,block:1,aead:2};y.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};y.CompressionMethod={none:0,deflate:1};y.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};y.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};y.Alert={};y.Alert.Level={warning:1,fatal:2};y.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};y.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};y.CipherSuites={};y.getCipherSuite=function(e){var t=null;for(var n in y.CipherSuites){var r=y.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t};y.handleUnexpected=function(e,t){var n=!e.open&&e.entity===y.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unexpected_message}})};y.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(y.queue(e,y.createAlert(e,{level:y.Alert.Level.warning,description:y.Alert.Description.no_renegotiation})),y.flush(e)),e.process()};y.parseHelloMessage=function(e,t,n){var r=null,i=e.entity===y.ConnectionEnd.client;if(n<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});else{var s=t.fragment,a=s.length();if(r={version:{major:s.getByte(),minor:s.getByte()},random:U.util.createBuffer(s.getBytes(32)),session_id:bt(s,1),extensions:[]},i?(r.cipher_suite=s.getBytes(2),r.compression_method=s.getByte()):(r.cipher_suites=bt(s,2),r.compression_methods=bt(s,1)),a=n-(a-s.length()),a>0){for(var o=bt(s,2);o.length()>0;)r.extensions.push({type:[o.getByte(),o.getByte()],data:bt(o,2)});if(!i)for(var l=0;l<r.extensions.length;++l){var u=r.extensions[l];if(u.type[0]===0&&u.type[1]===0)for(var c=bt(u.data,2);c.length()>0;){var f=c.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(bt(c,2).getBytes())}}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=y.getCipherSuite(r.cipher_suite);else for(var h=U.util.createBuffer(r.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=y.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.handshake_failure},cipherSuite:U.util.bytesToHex(r.cipher_suite)});i?e.session.compressionMethod=r.compression_method:e.session.compressionMethod=y.CompressionMethod.none}return r};y.createSecurityParameters=function(e,t){var n=e.entity===y.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,s=n?r:y.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:y.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}};y.handleServerHello=function(e,t,n){var r=y.parseHelloMessage(e,t,n);if(!e.fail){if(r.version.minor<=e.version.minor)e.version.minor=r.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}});e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=tu,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=Cv,e.session.resuming=!1,y.createSecurityParameters(e,r)),e.session.id=i,e.process()}};y.handleClientHello=function(e,t,n){var r=y.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes(),s=null;if(e.sessionCache&&(s=e.sessionCache.getSession(i),s===null?i="":(s.version.major!==r.version.major||s.version.minor>r.version.minor)&&(s=null,i="")),i.length===0&&(i=U.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=r.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var a,o=1;o<y.SupportedVersions.length&&(a=y.SupportedVersions[o],!(a.minor<=r.version.minor));++o);e.version={major:a.major,minor:a.minor},e.session.version=e.version}s!==null?(e.expect=ma,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=e.verifyClient!==!1?wv:ya,e.session.resuming=!1,y.createSecurityParameters(e,r)),e.open=!0,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerHello(e)})),e.session.resuming?(y.queue(e,y.createRecord(e,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),e.state.pending=y.createConnectionState(e),e.state.current.write=e.state.pending.write,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createFinished(e)}))):(y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificate(e)})),e.fail||(y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerKeyExchange(e)})),e.verifyClient!==!1&&y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificateRequest(e)})),y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createServerHelloDone(e)})))),y.flush(e),e.process()}};y.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:bt(r,3)},s,a,o=[];try{for(;i.certificate_list.length()>0;)s=bt(i.certificate_list,3),a=U.asn1.fromDer(s),s=U.pki.certificateFromAsn1(a,!0),o.push(s)}catch(u){return e.error(e,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate}})}var l=e.entity===y.ConnectionEnd.client;(l||e.verifyClient===!0)&&o.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}}):o.length===0?e.expect=l?eu:ya:(l?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],y.verifyCertificateChain(e,o)&&(e.expect=l?eu:ya)),e.process()};y.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unsupported_certificate}});e.expect=Ev,e.process()};y.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:bt(r,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=U.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}});try{var a=e.session.sp;a.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==a.pre_master_secret.charCodeAt(0)||o.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=U.random.getBytes(48)}e.expect=ma,e.session.clientCertificate!==null&&(e.expect=Iv),e.process()};y.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:bt(r,1),certificate_authorities:bt(r,2)};e.session.certificateRequest=i,e.expect=xv,e.process()};y.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var s={signature:bt(r,2).getBytes()},a=U.util.createBuffer();a.putBuffer(e.session.md5.digest()),a.putBuffer(e.session.sha1.digest()),a=a.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(a,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.handshake_failure}})}e.expect=ma,e.process()};y.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.record_overflow}});if(e.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.insufficient_security}},i=0,s=e.verify(e,r.alert.description,i,[]);if(s!==!0)return(s||s===0)&&(typeof s=="object"&&!U.util.isArray(s)?(s.message&&(r.message=s.message),s.alert&&(r.alert.description=s.alert)):typeof s=="number"&&(r.alert.description=s)),e.error(e,r)}e.session.certificateRequest!==null&&(t=y.createRecord(e,{type:y.ContentType.handshake,data:y.createCertificate(e)}),y.queue(e,t)),t=y.createRecord(e,{type:y.ContentType.handshake,data:y.createClientKeyExchange(e)}),y.queue(e,t),e.expect=Sv;var a=function(o,l){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&y.queue(o,y.createRecord(o,{type:y.ContentType.handshake,data:y.createCertificateVerify(o,l)})),y.queue(o,y.createRecord(o,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),o.state.pending=y.createConnectionState(o),o.state.current.write=o.state.pending.write,y.queue(o,y.createRecord(o,{type:y.ContentType.handshake,data:y.createFinished(o)})),o.expect=tu,y.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return a(e,null);y.getClientSignature(e,a)};y.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.illegal_parameter}});var n=e.entity===y.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=y.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?_v:Av,e.process()};y.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var s=t.fragment.getBytes();r=U.util.createBuffer(),r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var a=e.entity===y.ConnectionEnd.client,o=a?"server finished":"client finished",l=e.session.sp,u=12,c=Mi;if(r=c(l.master_secret,o,r.getBytes(),u),r.getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&a||!e.session.resuming&&!a)&&(y.queue(e,y.createRecord(e,{type:y.ContentType.change_cipher_spec,data:y.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,y.queue(e,y.createRecord(e,{type:y.ContentType.handshake,data:y.createFinished(e)}))),e.expect=a?bv:Bv,e.handshaking=!1,++e.handshakes,e.peerCertificate=a?e.session.serverCertificate:e.session.clientCertificate,y.flush(e),e.isConnected=!0,e.connected(e),e.process()};y.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case y.Alert.Description.close_notify:i="Connection closed.";break;case y.Alert.Description.unexpected_message:i="Unexpected message.";break;case y.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case y.Alert.Description.decryption_failed:i="Decryption failed.";break;case y.Alert.Description.record_overflow:i="Record overflow.";break;case y.Alert.Description.decompression_failure:i="Decompression failed.";break;case y.Alert.Description.handshake_failure:i="Handshake failure.";break;case y.Alert.Description.bad_certificate:i="Bad certificate.";break;case y.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case y.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case y.Alert.Description.certificate_expired:i="Certificate expired.";break;case y.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case y.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case y.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case y.Alert.Description.access_denied:i="Access denied.";break;case y.Alert.Description.decode_error:i="Decode error.";break;case y.Alert.Description.decrypt_error:i="Decrypt error.";break;case y.Alert.Description.export_restriction:i="Export restriction.";break;case y.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case y.Alert.Description.insufficient_security:i="Insufficient security.";break;case y.Alert.Description.internal_error:i="Internal error.";break;case y.Alert.Description.user_canceled:i="User canceled.";break;case y.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===y.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===y.ConnectionEnd.client?"server":"client",alert:r}),e.process()};y.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=U.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var s=n.bytes(i+4);n.read+=4,r in ji[e.entity][e.expect]?(e.entity===y.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:U.md.md5.create(),sha1:U.md.sha1.create()}),r!==y.HandshakeType.hello_request&&r!==y.HandshakeType.certificate_verify&&r!==y.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),ji[e.entity][e.expect][r](e,t,i)):y.handleUnexpected(e,t)};y.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};y.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),s=n.getBytes(i);if(r===y.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();y.queue(e,y.createRecord(e,{type:y.ContentType.heartbeat,data:y.createHeartbeat(y.HeartbeatMessageType.heartbeat_response,s)})),y.flush(e)}else if(r===y.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,U.util.createBuffer(s))}e.process()};var mv=0,Cv=1,eu=2,Ev=3,xv=4,tu=5,_v=6,bv=7,Sv=8,Tv=0,wv=1,ya=2,Iv=3,ma=4,Av=5,Bv=6,v=y.handleUnexpected,ru=y.handleChangeCipherSpec,Ge=y.handleAlert,gt=y.handleHandshake,nu=y.handleApplicationData,We=y.handleHeartbeat,Ca=[];Ca[y.ConnectionEnd.client]=[[v,Ge,gt,v,We],[v,Ge,gt,v,We],[v,Ge,gt,v,We],[v,Ge,gt,v,We],[v,Ge,gt,v,We],[ru,Ge,v,v,We],[v,Ge,gt,v,We],[v,Ge,gt,nu,We],[v,Ge,gt,v,We]];Ca[y.ConnectionEnd.server]=[[v,Ge,gt,v,We],[v,Ge,gt,v,We],[v,Ge,gt,v,We],[v,Ge,gt,v,We],[ru,Ge,v,v,We],[v,Ge,gt,v,We],[v,Ge,gt,nu,We],[v,Ge,gt,v,We]];var hr=y.handleHelloRequest,kv=y.handleServerHello,iu=y.handleCertificate,su=y.handleServerKeyExchange,Ea=y.handleCertificateRequest,Ki=y.handleServerHelloDone,au=y.handleFinished,ji=[];ji[y.ConnectionEnd.client]=[[v,v,kv,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,iu,su,Ea,Ki,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,su,Ea,Ki,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,v,Ea,Ki,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,v,v,Ki,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,au],[hr,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[hr,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v]];var Rv=y.handleClientHello,Nv=y.handleClientKeyExchange,Lv=y.handleCertificateVerify;ji[y.ConnectionEnd.server]=[[v,Rv,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,iu,v,v,v,v,v,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,Nv,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,Lv,v,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,au],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v]];y.generateKeys=function(e,t){var n=Mi,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===y.Versions.TLS_1_0.major&&e.version.minor===y.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var a=n(t.master_secret,"key expansion",r,i),o={client_write_MAC_key:a.getBytes(t.mac_key_length),server_write_MAC_key:a.getBytes(t.mac_key_length),client_write_key:a.getBytes(t.enc_key_length),server_write_key:a.getBytes(t.enc_key_length)};return s&&(o.client_write_IV=a.getBytes(t.fixed_iv_length),o.server_write_IV=a.getBytes(t.fixed_iv_length)),o};y.createConnectionState=function(e){var t=e.entity===y.ConnectionEnd.client,n=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},r={read:n(),write:n()};if(r.read.update=function(s,a){return r.read.cipherFunction(a,r.read)?r.read.compressFunction(s,a,r.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_record_mac}}),!s.fail},r.write.update=function(s,a){return r.write.compressFunction(s,a,r.write)?r.write.cipherFunction(a,r.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=y.generateKeys(e,i),r.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,i),i.compression_algorithm){case y.CompressionMethod.none:break;case y.CompressionMethod.deflate:r.read.compressFunction=yv,r.write.compressFunction=vv;break;default:throw new Error("Unsupported compression algorithm.")}}return r};y.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,n=U.util.createBuffer();return n.putInt32(t),n.putBytes(U.random.getBytes(28)),n};y.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n};y.createAlert=function(e,t){var n=U.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),y.createRecord(e,{type:y.ContentType.alert,data:n})};y.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=U.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var i=t.length(),s=U.util.createBuffer();s.putByte(y.CompressionMethod.none);var a=s.length(),o=U.util.createBuffer();if(e.virtualHost){var l=U.util.createBuffer();l.putByte(0),l.putByte(0);var u=U.util.createBuffer();u.putByte(0),kt(u,2,U.util.createBuffer(e.virtualHost));var c=U.util.createBuffer();kt(c,2,u),kt(l,2,c),o.putBuffer(l)}var f=o.length();f>0&&(f+=2);var h=e.session.id,m=h.length+1+2+4+28+2+i+1+a+f,p=U.util.createBuffer();return p.putByte(y.HandshakeType.client_hello),p.putInt24(m),p.putByte(e.version.major),p.putByte(e.version.minor),p.putBytes(e.session.sp.client_random),kt(p,1,U.util.createBuffer(h)),kt(p,2,t),kt(p,1,s),f>0&&kt(p,2,o),p};y.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=U.util.createBuffer();return r.putByte(y.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),kt(r,1,U.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r};y.createCertificate=function(e){var t=e.entity===y.ConnectionEnd.client,n=null;if(e.getCertificate){var r;t?r=e.session.certificateRequest:r=e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var i=U.util.createBuffer();if(n!==null)try{U.util.isArray(n)||(n=[n]);for(var s=null,a=0;a<n.length;++a){var o=U.pem.decode(n[a])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=o.type,l}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=U.util.createBuffer(o.body);s===null&&(s=U.asn1.fromDer(u.bytes(),!1));var c=U.util.createBuffer();kt(c,3,u),i.putBuffer(c)}n=U.pki.certificateFromAsn1(s),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(m){return e.error(e,{message:"Could not send certificate list.",cause:m,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate}})}var f=3+i.length(),h=U.util.createBuffer();return h.putByte(y.HandshakeType.certificate),h.putInt24(f),kt(h,3,i),h};y.createClientKeyExchange=function(e){var t=U.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(U.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,s=U.util.createBuffer();return s.putByte(y.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s};y.createServerKeyExchange=function(e){var t=U.util.createBuffer();return t};y.getClientSignature=function(e,t){var n=U.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(r,i,s){var a=null;if(r.getPrivateKey)try{a=r.getPrivateKey(r,r.session.clientCertificate),a=U.pki.privateKeyFromPem(a)}catch(o){r.error(r,{message:"Could not get private key.",cause:o,send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}})}a===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.internal_error}}):i=a.sign(i,null),s(r,i)},e.getSignature(e,n,t)};y.createCertificateVerify=function(e,t){var n=t.length+2,r=U.util.createBuffer();return r.putByte(y.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r};y.createCertificateRequest=function(e){var t=U.util.createBuffer();t.putByte(1);var n=U.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],s=U.pki.distinguishedNameToAsn1(i.subject),a=U.asn1.toDer(s);n.putInt16(a.length()),n.putBuffer(a)}var o=1+t.length()+2+n.length(),l=U.util.createBuffer();return l.putByte(y.HandshakeType.certificate_request),l.putInt24(o),kt(l,1,t),kt(l,2,n),l};y.createServerHelloDone=function(e){var t=U.util.createBuffer();return t.putByte(y.HandshakeType.server_hello_done),t.putInt24(0),t};y.createChangeCipherSpec=function(){var e=U.util.createBuffer();return e.putByte(1),e};y.createFinished=function(e){var t=U.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===y.ConnectionEnd.client,r=e.session.sp,i=12,s=Mi,a=n?"client finished":"server finished";t=s(r.master_secret,a,t.getBytes(),i);var o=U.util.createBuffer();return o.putByte(y.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};y.createHeartbeat=function(e,t,n){typeof n=="undefined"&&(n=t.length);var r=U.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),s=Math.max(16,i-n-3);return r.putBytes(U.random.getBytes(s)),r};y.queue=function(e,t){if(!!t&&!(t.fragment.length()===0&&(t.type===y.ContentType.handshake||t.type===y.ContentType.alert||t.type===y.ContentType.change_cipher_spec))){if(t.type===y.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=y.MaxFragment)r=[t];else{r=[];for(var i=t.fragment.bytes();i.length>y.MaxFragment;)r.push(y.createRecord(e,{type:t.type,data:U.util.createBuffer(i.slice(0,y.MaxFragment))})),i=i.slice(y.MaxFragment);i.length>0&&r.push(y.createRecord(e,{type:t.type,data:U.util.createBuffer(i)}))}for(var s=0;s<r.length&&!e.fail;++s){var a=r[s],o=e.state.current.write;o.update(e,a)&&e.records.push(a)}}};y.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var xa=function(e){switch(e){case!0:return!0;case U.pki.certificateError.bad_certificate:return y.Alert.Description.bad_certificate;case U.pki.certificateError.unsupported_certificate:return y.Alert.Description.unsupported_certificate;case U.pki.certificateError.certificate_revoked:return y.Alert.Description.certificate_revoked;case U.pki.certificateError.certificate_expired:return y.Alert.Description.certificate_expired;case U.pki.certificateError.certificate_unknown:return y.Alert.Description.certificate_unknown;case U.pki.certificateError.unknown_ca:return y.Alert.Description.unknown_ca;default:return y.Alert.Description.bad_certificate}},Dv=function(e){switch(e){case!0:return!0;case y.Alert.Description.bad_certificate:return U.pki.certificateError.bad_certificate;case y.Alert.Description.unsupported_certificate:return U.pki.certificateError.unsupported_certificate;case y.Alert.Description.certificate_revoked:return U.pki.certificateError.certificate_revoked;case y.Alert.Description.certificate_expired:return U.pki.certificateError.certificate_expired;case y.Alert.Description.certificate_unknown:return U.pki.certificateError.certificate_unknown;case y.Alert.Description.unknown_ca:return U.pki.certificateError.unknown_ca;default:return U.pki.certificateError.bad_certificate}};y.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(s,a,o){var l=xa(s),u=e.verify(e,s,a,o);if(u!==!0){if(typeof u=="object"&&!U.util.isArray(u)){var c=new Error("The application rejected the certificate.");throw c.send=!0,c.alert={level:y.Alert.Level.fatal,description:y.Alert.Description.bad_certificate},u.message&&(c.message=u.message),u.alert&&(c.alert.description=u.alert),c}u!==s&&(u=Dv(u))}return u},U.pki.verifyCertificateChain(e.caStore,t,n)}catch(s){var i=s;(typeof i!="object"||U.util.isArray(i))&&(i={send:!0,alert:{level:y.Alert.Level.fatal,description:xa(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:y.Alert.Level.fatal,description:xa(i.error)}),e.error(e,i)}return!e.fail};y.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{n={},n.cache=e||{},n.capacity=Math.max(t||100,1),n.order=[];for(var r in e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(i){var s=null,a=null;if(i?a=U.util.bytesToHex(i):n.order.length>0&&(a=n.order[0]),a!==null&&a in n.cache){s=n.cache[a],delete n.cache[a];for(var o in n.order)if(n.order[o]===a){n.order.splice(o,1);break}}return s},n.setSession=function(i,s){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}var a=U.util.bytesToHex(i);n.order.push(a),n.cache[a]=s}}return n};y.createConnection=function(e){var t=null;e.caStore?U.util.isArray(e.caStore)?t=U.pki.createCaStore(e.caStore):t=e.caStore:t=U.pki.createCaStore();var n=e.cipherSuites||null;if(n===null){n=[];for(var r in y.CipherSuites)n.push(y.CipherSuites[r])}var i=e.server?y.ConnectionEnd.server:y.ConnectionEnd.client,s=e.sessionCache?y.createSessionCache(e.sessionCache):null,a={version:{major:y.Version.major,minor:y.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(c,f,h,m){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:U.util.createBuffer(),tlsData:U.util.createBuffer(),data:U.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(c,f){f.origin=f.origin||(c.entity===y.ConnectionEnd.client?"client":"server"),f.send&&(y.queue(c,y.createAlert(c,f.alert)),y.flush(c));var h=f.fatal!==!1;h&&(c.fail=!0),e.error(c,f),h&&c.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};a.reset=function(c){a.version={major:y.Version.major,minor:y.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===y.ConnectionEnd.client?mv:Tv,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(c||typeof c=="undefined"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=y.createConnectionState(a)},a.reset();var o=function(c,f){var h=f.type-y.ContentType.change_cipher_spec,m=Ca[c.entity][c.expect];h in m?m[h](c,f):y.handleUnexpected(c,f)},l=function(c){var f=0,h=c.input,m=h.length();if(m<5)f=5-m;else{c.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:U.util.createBuffer(),ready:!1};var p=c.record.version.major===c.version.major;p&&c.session&&c.session.version&&(p=c.record.version.minor===c.version.minor),p||c.error(c,{message:"Incompatible TLS version.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.protocol_version}})}return f},u=function(c){var f=0,h=c.input,m=h.length();if(m<c.record.length)f=c.record.length-m;else{c.record.fragment.putBytes(h.getBytes(c.record.length)),h.compact();var p=c.state.current.read;p.update(c,c.record)&&(c.fragmented!==null&&(c.fragmented.type===c.record.type?(c.fragmented.fragment.putBuffer(c.record.fragment),c.record=c.fragmented):c.error(c,{message:"Invalid fragmented record.",send:!0,alert:{level:y.Alert.Level.fatal,description:y.Alert.Description.unexpected_message}})),c.record.ready=!0)}return f};return a.handshake=function(c){if(a.entity!==y.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,c=c||"";var f=null;c.length>0&&(a.sessionCache&&(f=a.sessionCache.getSession(c)),f===null&&(c="")),c.length===0&&a.sessionCache&&(f=a.sessionCache.getSession(),f!==null&&(c=f.id)),a.session={id:c,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:U.md.md5.create(),sha1:U.md.sha1.create()},f&&(a.version=f.version,a.session.sp=f.sp),a.session.sp.client_random=y.createRandom().getBytes(),a.open=!0,y.queue(a,y.createRecord(a,{type:y.ContentType.handshake,data:y.createClientHello(a)})),y.flush(a)}},a.process=function(c){var f=0;return c&&a.input.putBytes(c),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(f=l(a)),!a.fail&&a.record!==null&&!a.record.ready&&(f=u(a)),!a.fail&&a.record!==null&&a.record.ready&&o(a,a.record)),f},a.prepare=function(c){return y.queue(a,y.createRecord(a,{type:y.ContentType.application_data,data:U.util.createBuffer(c)})),y.flush(a)},a.prepareHeartbeatRequest=function(c,f){return c instanceof U.util.ByteBuffer&&(c=c.bytes()),typeof f=="undefined"&&(f=c.length),a.expectedHeartbeatPayload=c,y.queue(a,y.createRecord(a,{type:y.ContentType.heartbeat,data:y.createHeartbeat(y.HeartbeatMessageType.heartbeat_request,c,f)})),y.flush(a)},a.close=function(c){if(!a.fail&&a.sessionCache&&a.session){var f={id:a.session.id,version:a.session.version,sp:a.session.sp};f.sp.keys=null,a.sessionCache.setSession(f.id,f)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,y.queue(a,y.createAlert(a,{level:y.Alert.Level.warning,description:y.Alert.Description.close_notify})),y.flush(a)),a.closed(a)),a.reset(c)},a};U.tls=U.tls||{};for(var _a in y)typeof y[_a]!="function"&&(U.tls[_a]=y[_a]);U.tls.prf_tls1=Mi;U.tls.hmac_sha1=gv;U.tls.createSessionCache=y.createSessionCache;U.tls.createConnection=y.createConnection;var dr=ae,Rt=dr.tls;Rt.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Rt.BulkCipherAlgorithm.aes,e.cipher_type=Rt.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Rt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:ou};Rt.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Rt.BulkCipherAlgorithm.aes,e.cipher_type=Rt.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Rt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:ou};function ou(e,t,n){var r=t.entity===dr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:dr.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:dr.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=Vv,e.write.cipherFunction=Uv,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=Rt.hmac_sha1}function Uv(e,t){var n=!1,r=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(r),t.updateSequenceNumber();var i;e.version.minor===Rt.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=dr.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:i}),e.version.minor>=Rt.Versions.TLS_1_1.minor&&s.output.putBytes(i),s.update(e.fragment),s.finish(Ov)&&(e.fragment=s.output,e.length=e.fragment.length(),n=!0),n}function Ov(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function Pv(e,t,n){var r=!0;if(n){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)r=r&&t.at(a)==s;r&&t.truncate(s+1)}return r}function Vv(e,t){var n=!1,r;e.version.minor===Rt.Versions.TLS_1_0.minor?r=t.cipherState.init?null:t.cipherState.iv:r=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(Pv);var s=t.macLength,a=dr.random.getBytesSync(s),o=i.output.length();o>=s?(e.fragment=i.output.getBytes(o-s),a=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=dr.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=Fv(t.macKey,a,l)&&n,n}function Fv(e,t,n){var r=dr.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),t===n}var Qe=ae;Qe.debug=Qe.debug||{};Qe.debug.storage={};Qe.debug.get=function(e,t){var n;return typeof e=="undefined"?n=Qe.debug.storage:e in Qe.debug.storage&&(typeof t=="undefined"?n=Qe.debug.storage[e]:n=Qe.debug.storage[e][t]),n};Qe.debug.set=function(e,t,n){e in Qe.debug.storage||(Qe.debug.storage[e]={}),Qe.debug.storage[e][t]=n};Qe.debug.clear=function(e,t){typeof e=="undefined"?Qe.debug.storage={}:e in Qe.debug.storage&&(typeof t=="undefined"?delete Qe.debug.storage[e]:delete Qe.debug.storage[e][t])};var Ne=ae,Fn=Ne.sha512=Ne.sha512||{};Ne.md.sha512=Ne.md.algorithms.sha512=Fn;var lu=Ne.sha384=Ne.sha512.sha384=Ne.sha512.sha384||{};lu.create=function(){return Fn.create("SHA-384")};Ne.md.sha384=Ne.md.algorithms.sha384=lu;Ne.sha512.sha256=Ne.sha512.sha256||{create:function(){return Fn.create("SHA-512/256")}};Ne.md["sha512/256"]=Ne.md.algorithms["sha512/256"]=Ne.sha512.sha256;Ne.sha512.sha224=Ne.sha512.sha224||{create:function(){return Fn.create("SHA-512/224")}};Ne.md["sha512/224"]=Ne.md.algorithms["sha512/224"]=Ne.sha512.sha224;Fn.create=function(e){if(uu||Mv(),typeof e=="undefined"&&(e="SHA-512"),!(e in Vr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Vr[e],n=null,r=Ne.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var a=64;switch(e){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var l=o.messageLengthSize/4,u=0;u<l;++u)o.fullMessageLength.push(0);r=Ne.util.createBuffer(),n=new Array(t.length);for(var u=0;u<t.length;++u)n[u]=t[u].slice(0);return o},o.start(),o.update=function(l,u){u==="utf8"&&(l=Ne.util.encodeUtf8(l));var c=l.length;o.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=c[1],c[1]=c[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,c[0]=c[1]/4294967296>>>0;return r.putBytes(l),cu(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),o},o.digest=function(){var l=Ne.util.createBuffer();l.putBytes(r.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,c=u&o.blockLength-1;l.putBytes(ba.substr(0,o.blockLength-c));for(var f,h,m=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)f=o.fullMessageLength[p+1]*8,h=f/4294967296>>>0,m+=h,l.putInt32(m>>>0),m=f>>>0;l.putInt32(m);for(var C=new Array(n.length),p=0;p<n.length;++p)C[p]=n[p].slice(0);cu(C,i,l);var E=Ne.util.createBuffer(),_;e==="SHA-512"?_=C.length:e==="SHA-384"?_=C.length-2:_=C.length-4;for(var p=0;p<_;++p)E.putInt32(C[p][0]),(p!==_-1||e!=="SHA-512/224")&&E.putInt32(C[p][1]);return E},o};var ba=null,uu=!1,Sa=null,Vr=null;function Mv(){ba=String.fromCharCode(128),ba+=Ne.util.fillString(String.fromCharCode(0),128),Sa=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Vr={},Vr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Vr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Vr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Vr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],uu=!0}function cu(e,t,n){for(var r,i,s,a,o,l,u,c,f,h,m,p,C,E,_,I,T,N,O,B,Y,J,se,ue,le,Be,qe,A,L,Z,q,ke,ge,Re,Te,Ue=n.length();Ue>=128;){for(L=0;L<16;++L)t[L][0]=n.getInt32()>>>0,t[L][1]=n.getInt32()>>>0;for(;L<80;++L)ke=t[L-2],Z=ke[0],q=ke[1],r=((Z>>>19|q<<13)^(q>>>29|Z<<3)^Z>>>6)>>>0,i=((Z<<13|q>>>19)^(q<<3|Z>>>29)^(Z<<26|q>>>6))>>>0,Re=t[L-15],Z=Re[0],q=Re[1],s=((Z>>>1|q<<31)^(Z>>>8|q<<24)^Z>>>7)>>>0,a=((Z<<31|q>>>1)^(Z<<24|q>>>8)^(Z<<25|q>>>7))>>>0,ge=t[L-7],Te=t[L-16],q=i+ge[1]+a+Te[1],t[L][0]=r+ge[0]+s+Te[0]+(q/4294967296>>>0)>>>0,t[L][1]=q>>>0;for(C=e[0][0],E=e[0][1],_=e[1][0],I=e[1][1],T=e[2][0],N=e[2][1],O=e[3][0],B=e[3][1],Y=e[4][0],J=e[4][1],se=e[5][0],ue=e[5][1],le=e[6][0],Be=e[6][1],qe=e[7][0],A=e[7][1],L=0;L<80;++L)u=((Y>>>14|J<<18)^(Y>>>18|J<<14)^(J>>>9|Y<<23))>>>0,c=((Y<<18|J>>>14)^(Y<<14|J>>>18)^(J<<23|Y>>>9))>>>0,f=(le^Y&(se^le))>>>0,h=(Be^J&(ue^Be))>>>0,o=((C>>>28|E<<4)^(E>>>2|C<<30)^(E>>>7|C<<25))>>>0,l=((C<<4|E>>>28)^(E<<30|C>>>2)^(E<<25|C>>>7))>>>0,m=(C&_|T&(C^_))>>>0,p=(E&I|N&(E^I))>>>0,q=A+c+h+Sa[L][1]+t[L][1],r=qe+u+f+Sa[L][0]+t[L][0]+(q/4294967296>>>0)>>>0,i=q>>>0,q=l+p,s=o+m+(q/4294967296>>>0)>>>0,a=q>>>0,qe=le,A=Be,le=se,Be=ue,se=Y,ue=J,q=B+i,Y=O+r+(q/4294967296>>>0)>>>0,J=q>>>0,O=T,B=N,T=_,N=I,_=C,I=E,q=i+a,C=r+s+(q/4294967296>>>0)>>>0,E=q>>>0;q=e[0][1]+E,e[0][0]=e[0][0]+C+(q/4294967296>>>0)>>>0,e[0][1]=q>>>0,q=e[1][1]+I,e[1][0]=e[1][0]+_+(q/4294967296>>>0)>>>0,e[1][1]=q>>>0,q=e[2][1]+N,e[2][0]=e[2][0]+T+(q/4294967296>>>0)>>>0,e[2][1]=q>>>0,q=e[3][1]+B,e[3][0]=e[3][0]+O+(q/4294967296>>>0)>>>0,e[3][1]=q>>>0,q=e[4][1]+J,e[4][0]=e[4][0]+Y+(q/4294967296>>>0)>>>0,e[4][1]=q>>>0,q=e[5][1]+ue,e[5][0]=e[5][0]+se+(q/4294967296>>>0)>>>0,e[5][1]=q>>>0,q=e[6][1]+Be,e[6][0]=e[6][0]+le+(q/4294967296>>>0)>>>0,e[6][1]=q>>>0,q=e[7][1]+A,e[7][0]=e[7][0]+qe+(q/4294967296>>>0)>>>0,e[7][1]=q>>>0,Ue-=128}}var Ta={},Kv=ae,He=Kv.asn1;Ta.privateKeyValidator={name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:He.Class.UNIVERSAL,type:He.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Ta.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:He.Class.UNIVERSAL,type:He.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:He.Class.UNIVERSAL,type:He.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:He.Class.UNIVERSAL,type:He.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var Ye=ae,fu=Ta,jv=fu.publicKeyValidator,zv=fu.privateKeyValidator;if(typeof Hv=="undefined")var Hv=Ye.jsbn.BigInteger;var wa=Ye.util.ByteBuffer,Et=typeof Buffer=="undefined"?Uint8Array:Buffer;Ye.pki=Ye.pki||{};Ye.pki.ed25519=Ye.ed25519=Ye.ed25519||{};var he=Ye.ed25519;he.constants={};he.constants.PUBLIC_KEY_BYTE_LENGTH=32;he.constants.PRIVATE_KEY_BYTE_LENGTH=64;he.constants.SEED_BYTE_LENGTH=32;he.constants.SIGN_BYTE_LENGTH=64;he.constants.HASH_BYTE_LENGTH=64;he.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Ye.random.getBytesSync(he.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==he.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+he.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=rr({message:t,encoding:"binary"});for(var n=new Et(he.constants.PUBLIC_KEY_BYTE_LENGTH),r=new Et(he.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=t[i];return Qv(n,r),{publicKey:n,privateKey:r}};he.privateKeyFromAsn1=function(e){var t={},n=[],r=Ye.asn1.validate(e,zv,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var s=Ye.asn1.derToOid(t.privateKeyOid),a=Ye.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.privateKey,l=rr({message:Ye.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:l}};he.publicKeyFromAsn1=function(e){var t={},n=[],r=Ye.asn1.validate(e,jv,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var s=Ye.asn1.derToOid(t.publicKeyOid),a=Ye.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var o=t.ed25519PublicKey;if(o.length!==he.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return rr({message:o,encoding:"binary"})};he.publicKeyFromPrivateKey=function(e){e=e||{};var t=rr({message:e.privateKey,encoding:"binary"});if(t.length!==he.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+he.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new Et(he.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n};he.sign=function(e){e=e||{};var t=rr(e),n=rr({message:e.privateKey,encoding:"binary"});if(n.length===he.constants.SEED_BYTE_LENGTH){var r=he.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==he.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+he.constants.SEED_BYTE_LENGTH+" or "+he.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Et(he.constants.SIGN_BYTE_LENGTH+t.length);Yv(i,t,t.length,n);for(var s=new Et(he.constants.SIGN_BYTE_LENGTH),a=0;a<s.length;++a)s[a]=i[a];return s};he.verify=function(e){e=e||{};var t=rr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=rr({message:e.signature,encoding:"binary"});if(n.length!==he.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+he.constants.SIGN_BYTE_LENGTH);var r=rr({message:e.publicKey,encoding:"binary"});if(r.length!==he.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+he.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Et(he.constants.SIGN_BYTE_LENGTH+t.length),s=new Et(he.constants.SIGN_BYTE_LENGTH+t.length),a;for(a=0;a<he.constants.SIGN_BYTE_LENGTH;++a)i[a]=n[a];for(a=0;a<t.length;++a)i[a+he.constants.SIGN_BYTE_LENGTH]=t[a];return Xv(s,i,i.length,r)>=0};function rr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Et)return t;var n=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,n);t=new wa(t,n)}else if(!(t instanceof wa))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new Et(t.length()),i=0;i<r.length;++i)r[i]=t.at(i);return r}var Ia=ee(),zi=ee([1]),qv=ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Gv=ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),hu=ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),du=ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Aa=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Wv=ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Mn(e,t){var n=Ye.md.sha512.create(),r=new wa(e);n.update(r.getBytes(t),"binary");var i=n.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var s=new Et(he.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)s[a]=i.charCodeAt(a);return s}function Qv(e,t){var n=[ee(),ee(),ee(),ee()],r,i=Mn(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Na(n,i),Ra(e,n),r=0;r<32;++r)t[r+32]=e[r];return 0}function Yv(e,t,n,r){var i,s,a=new Float64Array(64),o=[ee(),ee(),ee(),ee()],l=Mn(r,32);l[0]&=248,l[31]&=127,l[31]|=64;var u=n+64;for(i=0;i<n;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var c=Mn(e.subarray(32),n+32);for(Ba(c),Na(o,c),Ra(e,o),i=32;i<64;++i)e[i]=r[i];var f=Mn(e,n+64);for(Ba(f),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=c[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=f[i]*l[s];return pu(e.subarray(32),a),u}function Xv(e,t,n,r){var i,s,a=new Et(32),o=[ee(),ee(),ee(),ee()],l=[ee(),ee(),ee(),ee()];if(s=-1,n<64||Jv(l,r))return-1;for(i=0;i<n;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=r[i];var u=Mn(e,n);if(Ba(u),Cu(o,l,u),Na(l,t.subarray(32)),ka(o,l),Ra(a,o),n-=64,yu(t,0,a,0)){for(i=0;i<n;++i)e[i]=0;return-1}for(i=0;i<n;++i)e[i]=t[i+64];return s=n,s}function pu(e,t){var n,r,i,s;for(r=63;r>=32;--r){for(n=0,i=r-32,s=r-12;i<s;++i)t[i]+=n-16*t[r]*Aa[i-(r-32)],n=t[i]+128>>8,t[i]-=n*256;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;++i)t[i]+=n-(t[31]>>4)*Aa[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=n*Aa[i];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function Ba(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;pu(e,t)}function ka(e,t){var n=ee(),r=ee(),i=ee(),s=ee(),a=ee(),o=ee(),l=ee(),u=ee(),c=ee();un(n,e[1],e[0]),un(c,t[1],t[0]),Se(n,n,c),ln(r,e[0],e[1]),ln(c,t[0],t[1]),Se(r,r,c),Se(i,e[3],t[3]),Se(i,i,Gv),Se(s,e[2],t[2]),ln(s,s,s),un(a,r,n),un(o,s,i),ln(l,s,i),ln(u,r,n),Se(e[0],a,o),Se(e[1],u,l),Se(e[2],l,o),Se(e[3],a,u)}function gu(e,t,n){for(var r=0;r<4;++r)Eu(e[r],t[r],n)}function Ra(e,t){var n=ee(),r=ee(),i=ee();ty(i,t[2]),Se(n,t[0],i),Se(r,t[1],i),Hi(e,r),e[31]^=mu(n)<<7}function Hi(e,t){var n,r,i,s=ee(),a=ee();for(n=0;n<16;++n)a[n]=t[n];for(La(a),La(a),La(a),r=0;r<2;++r){for(s[0]=a[0]-65517,n=1;n<15;++n)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Eu(a,s,1-i)}for(n=0;n<16;n++)e[2*n]=a[n]&255,e[2*n+1]=a[n]>>8}function Jv(e,t){var n=ee(),r=ee(),i=ee(),s=ee(),a=ee(),o=ee(),l=ee();return pr(e[2],zi),Zv(e[1],t),Fr(i,e[1]),Se(s,i,qv),un(i,i,e[2]),ln(s,e[2],s),Fr(a,s),Fr(o,a),Se(l,o,a),Se(n,l,i),Se(n,n,s),$v(n,n),Se(n,n,i),Se(n,n,s),Se(n,n,s),Se(e[0],n,s),Fr(r,e[0]),Se(r,r,s),vu(r,i)&&Se(e[0],e[0],Wv),Fr(r,e[0]),Se(r,r,s),vu(r,i)?-1:(mu(e[0])===t[31]>>7&&un(e[0],Ia,e[0]),Se(e[3],e[0],e[1]),0)}function Zv(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function $v(e,t){var n=ee(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)Fr(n,n),r!==1&&Se(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function vu(e,t){var n=new Et(32),r=new Et(32);return Hi(n,e),Hi(r,t),yu(n,0,r,0)}function yu(e,t,n,r){return ey(e,t,n,r,32)}function ey(e,t,n,r,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^n[r+s];return(1&a-1>>>8)-1}function mu(e){var t=new Et(32);return Hi(t,e),t[0]&1}function Cu(e,t,n){var r,i;for(pr(e[0],Ia),pr(e[1],zi),pr(e[2],zi),pr(e[3],Ia),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,gu(e,t,r),ka(t,e),ka(e,e),gu(e,t,r)}function Na(e,t){var n=[ee(),ee(),ee(),ee()];pr(n[0],hu),pr(n[1],du),pr(n[2],zi),Se(n[3],hu,du),Cu(e,n,t)}function pr(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function ty(e,t){var n=ee(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)Fr(n,n),r!==2&&r!==4&&Se(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function La(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function Eu(e,t,n){for(var r,i=~(n-1),s=0;s<16;++s)r=i&(e[s]^t[s]),e[s]^=r,t[s]^=r}function ee(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function ln(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function un(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function Fr(e,t){Se(e,t,t)}function Se(e,t,n){var r,i,s=0,a=0,o=0,l=0,u=0,c=0,f=0,h=0,m=0,p=0,C=0,E=0,_=0,I=0,T=0,N=0,O=0,B=0,Y=0,J=0,se=0,ue=0,le=0,Be=0,qe=0,A=0,L=0,Z=0,q=0,ke=0,ge=0,Re=n[0],Te=n[1],Ue=n[2],Je=n[3],Ze=n[4],$e=n[5],et=n[6],tt=n[7],rt=n[8],nt=n[9],it=n[10],st=n[11],at=n[12],ot=n[13],lt=n[14],ut=n[15];r=t[0],s+=r*Re,a+=r*Te,o+=r*Ue,l+=r*Je,u+=r*Ze,c+=r*$e,f+=r*et,h+=r*tt,m+=r*rt,p+=r*nt,C+=r*it,E+=r*st,_+=r*at,I+=r*ot,T+=r*lt,N+=r*ut,r=t[1],a+=r*Re,o+=r*Te,l+=r*Ue,u+=r*Je,c+=r*Ze,f+=r*$e,h+=r*et,m+=r*tt,p+=r*rt,C+=r*nt,E+=r*it,_+=r*st,I+=r*at,T+=r*ot,N+=r*lt,O+=r*ut,r=t[2],o+=r*Re,l+=r*Te,u+=r*Ue,c+=r*Je,f+=r*Ze,h+=r*$e,m+=r*et,p+=r*tt,C+=r*rt,E+=r*nt,_+=r*it,I+=r*st,T+=r*at,N+=r*ot,O+=r*lt,B+=r*ut,r=t[3],l+=r*Re,u+=r*Te,c+=r*Ue,f+=r*Je,h+=r*Ze,m+=r*$e,p+=r*et,C+=r*tt,E+=r*rt,_+=r*nt,I+=r*it,T+=r*st,N+=r*at,O+=r*ot,B+=r*lt,Y+=r*ut,r=t[4],u+=r*Re,c+=r*Te,f+=r*Ue,h+=r*Je,m+=r*Ze,p+=r*$e,C+=r*et,E+=r*tt,_+=r*rt,I+=r*nt,T+=r*it,N+=r*st,O+=r*at,B+=r*ot,Y+=r*lt,J+=r*ut,r=t[5],c+=r*Re,f+=r*Te,h+=r*Ue,m+=r*Je,p+=r*Ze,C+=r*$e,E+=r*et,_+=r*tt,I+=r*rt,T+=r*nt,N+=r*it,O+=r*st,B+=r*at,Y+=r*ot,J+=r*lt,se+=r*ut,r=t[6],f+=r*Re,h+=r*Te,m+=r*Ue,p+=r*Je,C+=r*Ze,E+=r*$e,_+=r*et,I+=r*tt,T+=r*rt,N+=r*nt,O+=r*it,B+=r*st,Y+=r*at,J+=r*ot,se+=r*lt,ue+=r*ut,r=t[7],h+=r*Re,m+=r*Te,p+=r*Ue,C+=r*Je,E+=r*Ze,_+=r*$e,I+=r*et,T+=r*tt,N+=r*rt,O+=r*nt,B+=r*it,Y+=r*st,J+=r*at,se+=r*ot,ue+=r*lt,le+=r*ut,r=t[8],m+=r*Re,p+=r*Te,C+=r*Ue,E+=r*Je,_+=r*Ze,I+=r*$e,T+=r*et,N+=r*tt,O+=r*rt,B+=r*nt,Y+=r*it,J+=r*st,se+=r*at,ue+=r*ot,le+=r*lt,Be+=r*ut,r=t[9],p+=r*Re,C+=r*Te,E+=r*Ue,_+=r*Je,I+=r*Ze,T+=r*$e,N+=r*et,O+=r*tt,B+=r*rt,Y+=r*nt,J+=r*it,se+=r*st,ue+=r*at,le+=r*ot,Be+=r*lt,qe+=r*ut,r=t[10],C+=r*Re,E+=r*Te,_+=r*Ue,I+=r*Je,T+=r*Ze,N+=r*$e,O+=r*et,B+=r*tt,Y+=r*rt,J+=r*nt,se+=r*it,ue+=r*st,le+=r*at,Be+=r*ot,qe+=r*lt,A+=r*ut,r=t[11],E+=r*Re,_+=r*Te,I+=r*Ue,T+=r*Je,N+=r*Ze,O+=r*$e,B+=r*et,Y+=r*tt,J+=r*rt,se+=r*nt,ue+=r*it,le+=r*st,Be+=r*at,qe+=r*ot,A+=r*lt,L+=r*ut,r=t[12],_+=r*Re,I+=r*Te,T+=r*Ue,N+=r*Je,O+=r*Ze,B+=r*$e,Y+=r*et,J+=r*tt,se+=r*rt,ue+=r*nt,le+=r*it,Be+=r*st,qe+=r*at,A+=r*ot,L+=r*lt,Z+=r*ut,r=t[13],I+=r*Re,T+=r*Te,N+=r*Ue,O+=r*Je,B+=r*Ze,Y+=r*$e,J+=r*et,se+=r*tt,ue+=r*rt,le+=r*nt,Be+=r*it,qe+=r*st,A+=r*at,L+=r*ot,Z+=r*lt,q+=r*ut,r=t[14],T+=r*Re,N+=r*Te,O+=r*Ue,B+=r*Je,Y+=r*Ze,J+=r*$e,se+=r*et,ue+=r*tt,le+=r*rt,Be+=r*nt,qe+=r*it,A+=r*st,L+=r*at,Z+=r*ot,q+=r*lt,ke+=r*ut,r=t[15],N+=r*Re,O+=r*Te,B+=r*Ue,Y+=r*Je,J+=r*Ze,se+=r*$e,ue+=r*et,le+=r*tt,Be+=r*rt,qe+=r*nt,A+=r*it,L+=r*st,Z+=r*at,q+=r*ot,ke+=r*lt,ge+=r*ut,s+=38*O,a+=38*B,o+=38*Y,l+=38*J,u+=38*se,c+=38*ue,f+=38*le,h+=38*Be,m+=38*qe,p+=38*A,C+=38*L,E+=38*Z,_+=38*q,I+=38*ke,T+=38*ge,i=1,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=T+i+65535,i=Math.floor(r/65536),T=r-i*65536,r=N+i+65535,i=Math.floor(r/65536),N=r-i*65536,s+=i-1+37*(i-1),i=1,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=C+i+65535,i=Math.floor(r/65536),C=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=T+i+65535,i=Math.floor(r/65536),T=r-i*65536,r=N+i+65535,i=Math.floor(r/65536),N=r-i*65536,s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=l,e[4]=u,e[5]=c,e[6]=f,e[7]=h,e[8]=m,e[9]=p,e[10]=C,e[11]=E,e[12]=_,e[13]=I,e[14]=T,e[15]=N}var St=ae;St.kem=St.kem||{};var xu=St.jsbn.BigInteger;St.kem.rsa={};St.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||St.random,r={};return r.encrypt=function(i,s){var a=Math.ceil(i.n.bitLength()/8),o;do o=new xu(St.util.bytesToHex(n.getBytesSync(a)),16).mod(i.n);while(o.compareTo(xu.ONE)<=0);o=St.util.hexToBytes(o.toString(16));var l=a-o.length;l>0&&(o=St.util.fillString(String.fromCharCode(0),l)+o);var u=i.encrypt(o,"NONE"),c=e.generate(o,s);return{encapsulation:u,key:c}},r.decrypt=function(i,s,a){var o=i.decrypt(s,"NONE");return e.generate(o,a)},r};St.kem.kdf1=function(e,t){_u(this,e,0,t||e.digestLength)};St.kem.kdf2=function(e,t){_u(this,e,1,t||e.digestLength)};function _u(e,t,n,r){e.generate=function(i,s){for(var a=new St.util.ByteBuffer,o=Math.ceil(s/r)+n,l=new St.util.ByteBuffer,u=n;u<o;++u){l.putInt32(u),t.start(),t.update(i+l.getBytes());var c=t.digest();a.putBytes(c.getBytes(r))}return a.truncate(a.length()-s),a.getBytes()}}var de=ae;de.log=de.log||{};de.log.levels=["none","error","warning","info","debug","verbose","max"];var qi={},Da=[],Kn=null;de.log.LEVEL_LOCKED=1<<1;de.log.NO_LEVEL_CHECK=1<<2;de.log.INTERPOLATE=1<<3;for(var gr=0;gr<de.log.levels.length;++gr){var bu=de.log.levels[gr];qi[bu]={index:gr,name:bu.toUpperCase()}}de.log.logMessage=function(e){for(var t=qi[e.level].index,n=0;n<Da.length;++n){var r=Da[n];if(r.flags&de.log.NO_LEVEL_CHECK)r.f(e);else{var i=qi[r.level].index;t<=i&&r.f(r,e)}}};de.log.prepareStandard=function(e){"standard"in e||(e.standard=qi[e.level].name+" ["+e.category+"] "+e.message)};de.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=de.util.format.apply(this,t)}};de.log.prepareStandardFull=function(e){"standardFull"in e||(de.log.prepareStandard(e),e.standardFull=e.standard)};for(var Su=["error","warning","info","debug","verbose"],gr=0;gr<Su.length;++gr)(function(t){de.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:t,category:n,message:r,arguments:i};de.log.logMessage(s)}})(Su[gr]);de.log.makeLogger=function(e){var t={flags:0,f:e};return de.log.setLevel(t,"none"),t};de.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&de.log.LEVEL_LOCKED))for(var r=0;r<de.log.levels.length;++r){var i=de.log.levels[r];if(t==i){e.level=t,n=!0;break}}return n};de.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=de.log.LEVEL_LOCKED:e.flags&=~de.log.LEVEL_LOCKED};de.log.addLogger=function(e){Da.push(e)};if(typeof console!="undefined"&&"log"in console){var jn;if(console.error&&console.warn&&console.info&&console.debug){var ry={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Ua=function(e,t){de.log.prepareStandard(t);var n=ry[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)};jn=de.log.makeLogger(Ua)}else{var Ua=function(t,n){de.log.prepareStandardFull(n),console.log(n.standardFull)};jn=de.log.makeLogger(Ua)}de.log.setLevel(jn,"debug"),de.log.addLogger(jn),Kn=jn}else console={log:function(){}};if(Kn!==null){var Gi=de.util.getQueryVariables();if("console.level"in Gi&&de.log.setLevel(Kn,Gi["console.level"].slice(-1)[0]),"console.lock"in Gi){var ny=Gi["console.lock"].slice(-1)[0];ny=="true"&&de.log.lock(Kn)}}de.log.consoleLogger=Kn;var z=ae,b=z.asn1,vt=z.pkcs7=z.pkcs7||{};vt.messageFromPem=function(e){var t=z.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=b.fromDer(t.body);return vt.messageFromAsn1(r)};vt.messageToPem=function(e,t){var n={type:"PKCS7",body:b.toDer(e.toAsn1()).getBytes()};return z.pem.encode(n,{maxline:t})};vt.messageFromAsn1=function(e){var t={},n=[];if(!b.validate(e,vt.asn1.contentInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=b.derToOid(t.contentType),s;switch(i){case z.pki.oids.envelopedData:s=vt.createEnvelopedData();break;case z.pki.oids.encryptedData:s=vt.createEncryptedData();break;case z.pki.oids.signedData:s=vt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return s.fromAsn1(t.content.value[0]),s};vt.createSignedData=function(){var e=null;return e={type:z.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(r){if(Pa(e,r,vt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,s=0;s<i.length;++s)e.certificates.push(z.pki.certificateFromAsn1(i[s]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],i=0;i<e.certificates.length;++i)r.push(z.pki.certificateToAsn1(e.certificates[i]));var s=[],a=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&a.value[0].value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,r)),s.length>0&&a.value[0].value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push(b.create(b.Class.UNIVERSAL,b.Type.SET,!0,e.signerInfos)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),a])},addSigner:function(r){var i=r.issuer,s=r.serialNumber;if(r.certificate){var a=r.certificate;typeof a=="string"&&(a=z.pki.certificateFromPem(a)),i=a.issuer.attributes,s=a.serialNumber}var o=r.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=z.pki.privateKeyFromPem(o));var l=r.digestAlgorithm||z.pki.oids.sha1;switch(l){case z.pki.oids.sha1:case z.pki.oids.sha256:case z.pki.oids.sha384:case z.pki.oids.sha512:case z.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var c=!1,f=!1,h=0;h<u.length;++h){var m=u[h];if(!c&&m.type===z.pki.oids.contentType){if(c=!0,f)break;continue}if(!f&&m.type===z.pki.oids.messageDigest){if(f=!0,c)break;continue}}if(!c||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:s,digestAlgorithm:l,signatureAlgorithm:z.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(r){if(r=r||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(z.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof z.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=z.util.encodeUtf8(e.content)),r.detached?e.detachedContent=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var s=t();n(s)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(r){typeof r=="string"&&(r=z.pki.certificateFromPem(r)),e.certificates.push(r)},addCertificateRevokationList:function(r){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var r={},i=0;i<e.signers.length;++i){var s=e.signers[i],a=s.digestAlgorithm;a in r||(r[a]=z.md[z.pki.oids[a]].create()),s.authenticatedAttributes.length===0?s.md=r[a]:s.md=z.md[z.pki.oids[a]].create()}e.digestAlgorithmIdentifiers=[];for(var a in r)e.digestAlgorithmIdentifiers.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(a).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]));return r}function n(r){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=b.derToOid(e.contentInfo.value[0].value),a=b.toDer(i);a.getByte(),b.getBerValueLength(a),a=a.getBytes();for(var o in r)r[o].start().update(a);for(var l=new Date,u=0;u<e.signers.length;++u){var c=e.signers[u];if(c.authenticatedAttributes.length===0){if(s!==z.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{c.authenticatedAttributesAsn1=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[]),h=0;h<c.authenticatedAttributes.length;++h){var m=c.authenticatedAttributes[h];m.type===z.pki.oids.messageDigest?m.value=r[c.digestAlgorithm].digest():m.type===z.pki.oids.signingTime&&(m.value||(m.value=l)),f.value.push(Oa(m)),c.authenticatedAttributesAsn1.value.push(Oa(m))}a=b.toDer(f).getBytes(),c.md.start().update(a)}c.signature=c.key.sign(c.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=uy(e.signers)}};vt.createEncryptedData=function(){var e=null;return e={type:z.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:z.pki.oids["aes256-CBC"]},fromAsn1:function(t){Pa(e,t,vt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Tu(e)}},e};vt.createEnvelopedData=function(){var e=null;return e={type:z.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:z.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=Pa(e,t,vt.asn1.envelopedDataValidator);e.recipients=ay(n.recipientInfos.value)},toAsn1:function(){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,oy(e.recipients)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,cy(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var i=e.recipients[r],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===n.length){for(var a=!0,o=0;o<n.length;++o)if(s[o].type!==n[o].type||s[o].value!==n[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,n){if(e.encryptedContent.key===void 0&&t!==void 0&&n!==void 0)switch(t.encryptedContent.algorithm){case z.pki.oids.rsaEncryption:case z.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=z.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Tu(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:z.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===void 0){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var r,i,s;switch(n){case z.pki.oids["aes128-CBC"]:r=16,i=16,s=z.aes.createEncryptionCipher;break;case z.pki.oids["aes192-CBC"]:r=24,i=16,s=z.aes.createEncryptionCipher;break;case z.pki.oids["aes256-CBC"]:r=32,i=16,s=z.aes.createEncryptionCipher;break;case z.pki.oids["des-EDE3-CBC"]:r=24,i=8,s=z.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===void 0)t=z.util.createBuffer(z.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=z.util.createBuffer(z.random.getBytes(i));var a=s(t);if(a.start(e.encryptedContent.parameter.copy()),a.update(e.content),!a.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=a.output}for(var o=0;o<e.recipients.length;++o){var l=e.recipients[o];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case z.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function iy(e){var t={},n=[];if(!b.validate(e,vt.asn1.recipientInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:t.version.charCodeAt(0),issuer:z.pki.RDNAttributesAsArray(t.issuer),serialNumber:z.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:b.derToOid(t.encAlgorithm),parameter:t.encParameter.value,content:t.encKey}}}function sy(e){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[z.pki.distinguishedNameToAsn1({attributes:e.issuer}),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,z.util.hexToBytes(e.serialNumber))]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.encryptedContent.algorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function ay(e){for(var t=[],n=0;n<e.length;++n)t.push(iy(e[n]));return t}function oy(e){for(var t=[],n=0;n<e.length;++n)t.push(sy(e[n]));return t}function ly(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[z.pki.distinguishedNameToAsn1({attributes:e.issuer}),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,z.util.hexToBytes(e.serialNumber))]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.digestAlgorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureAlgorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var i=e.unauthenticatedAttributes[r];n.values.push(Oa(i))}t.value.push(n)}return t}function uy(e){for(var t=[],n=0;n<e.length;++n)t.push(ly(e[n]));return t}function Oa(e){var t;if(e.type===z.pki.oids.contentType)t=b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.value).getBytes());else if(e.type===z.pki.oids.messageDigest)t=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===z.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);isNaN(s)?i.length===13?i=b.utcTimeToDate(i):i=b.generalizedTimeToDate(i):i=new Date(s)}i>=n&&i<r?t=b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(i)):t=b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(i))}return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[t])])}function cy(e){return[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(z.pki.oids.data).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.algorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.parameter.getBytes())]),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Pa(e,t,n){var r={},i=[];if(!b.validate(t,n,r,i)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}var a=b.derToOid(r.contentType);if(a!==z.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var o="";if(z.util.isArray(r.encryptedContent))for(var l=0;l<r.encryptedContent.length;++l){if(r.encryptedContent[l].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=r.encryptedContent[l].value}else o=r.encryptedContent;e.encryptedContent={algorithm:b.derToOid(r.encAlgorithm),parameter:z.util.createBuffer(r.encParameter.value),content:z.util.createBuffer(o)}}if(r.content){var o="";if(z.util.isArray(r.content))for(var l=0;l<r.content.length;++l){if(r.content[l].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=r.content[l].value}else o=r.content;e.content=z.util.createBuffer(o)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function Tu(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case z.pki.oids["aes128-CBC"]:case z.pki.oids["aes192-CBC"]:case z.pki.oids["aes256-CBC"]:t=z.aes.createDecryptionCipher(e.encryptedContent.key);break;case z.pki.oids.desCBC:case z.pki.oids["des-EDE3-CBC"]:t=z.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var Fe=ae,Wi=Fe.ssh=Fe.ssh||{};Wi.privateKeyToPutty=function(e,t,n){n=n||"",t=t||"";var r="ssh-rsa",i=t===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+r+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+n+`\r
`;var a=Fe.util.createBuffer();cn(a,r),Qt(a,e.e),Qt(a,e.n);var o=Fe.util.encode64(a.bytes(),64),l=Math.floor(o.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=o;var u=Fe.util.createBuffer();Qt(u,e.d),Qt(u,e.p),Qt(u,e.q),Qt(u,e.qInv);var c;if(!t)c=Fe.util.encode64(u.bytes(),64);else{var f=u.length()+16-1;f-=f%16;var h=Qi(u.bytes());h.truncate(h.length()-f+u.length()),u.putBuffer(h);var m=Fe.util.createBuffer();m.putBuffer(Qi("\0\0\0\0",t)),m.putBuffer(Qi("\0\0\0",t));var p=Fe.aes.createEncryptionCipher(m.truncate(8),"CBC");p.start(Fe.util.createBuffer().fillWithByte(0,16)),p.update(u.copy()),p.finish();var C=p.output;C.truncate(16),c=Fe.util.encode64(C.bytes(),64)}l=Math.floor(c.length/66)+1,s+=`\r
Private-Lines: `+l+`\r
`,s+=c;var E=Qi("putty-private-key-file-mac-key",t),_=Fe.util.createBuffer();cn(_,r),cn(_,i),cn(_,n),_.putInt32(a.length()),_.putBuffer(a),_.putInt32(u.length()),_.putBuffer(u);var I=Fe.hmac.create();return I.start("sha1",E),I.update(_.bytes()),s+=`\r
Private-MAC: `+I.digest().toHex()+`\r
`,s};Wi.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var r=Fe.util.createBuffer();return cn(r,n),Qt(r,e.e),Qt(r,e.n),n+" "+Fe.util.encode64(r.bytes())+" "+t};Wi.privateKeyToOpenSSH=function(e,t){return t?Fe.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Fe.pki.privateKeyToPem(e)};Wi.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||Fe.md.md5.create(),r="ssh-rsa",i=Fe.util.createBuffer();cn(i,r),Qt(i,e.e),Qt(i,e.n),n.start(),n.update(i.getBytes());var s=n.digest();if(t.encoding==="hex"){var a=s.toHex();return t.delimiter?a.match(/.{2}/g).join(t.delimiter):a}else{if(t.encoding==="binary")return s.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return s};function Qt(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=Fe.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function cn(e,t){e.putInt32(t.length),e.putString(t)}function Qi(){for(var e=Fe.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}var Tt=ae,fn="forge.task",Va={},fy=0;Tt.debug.set(fn,"tasks",Va);var yt={};Tt.debug.set(fn,"queues",yt);var wu="?",hy=30,dy=20,vr="ready",Me="running",ht="blocked",Xe="sleeping",Pe="done",Ve="error",Mr="stop",yr="start",hn="block",zn="unblock",dn="sleep",Hn="wakeup",Kr="cancel",pn="fail",$={};$[vr]={};$[vr][Mr]=vr;$[vr][yr]=Me;$[vr][Kr]=Pe;$[vr][pn]=Ve;$[Me]={};$[Me][Mr]=vr;$[Me][yr]=Me;$[Me][hn]=ht;$[Me][zn]=Me;$[Me][dn]=Xe;$[Me][Hn]=Me;$[Me][Kr]=Pe;$[Me][pn]=Ve;$[ht]={};$[ht][Mr]=ht;$[ht][yr]=ht;$[ht][hn]=ht;$[ht][zn]=ht;$[ht][dn]=ht;$[ht][Hn]=ht;$[ht][Kr]=Pe;$[ht][pn]=Ve;$[Xe]={};$[Xe][Mr]=Xe;$[Xe][yr]=Xe;$[Xe][hn]=Xe;$[Xe][zn]=Xe;$[Xe][dn]=Xe;$[Xe][Hn]=Xe;$[Xe][Kr]=Pe;$[Xe][pn]=Ve;$[Pe]={};$[Pe][Mr]=Pe;$[Pe][yr]=Pe;$[Pe][hn]=Pe;$[Pe][zn]=Pe;$[Pe][dn]=Pe;$[Pe][Hn]=Pe;$[Pe][Kr]=Pe;$[Pe][pn]=Ve;$[Ve]={};$[Ve][Mr]=Ve;$[Ve][yr]=Ve;$[Ve][hn]=Ve;$[Ve][zn]=Ve;$[Ve][dn]=Ve;$[Ve][Hn]=Ve;$[Ve][Kr]=Ve;$[Ve][pn]=Ve;var xt=function(e){this.id=-1,this.name=e.name||wu,this.parent=e.parent||null,this.run=e.run,this.subtasks=[],this.error=!1,this.state=vr,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=fy++,Va[this.id]=this};xt.prototype.debug=function(e){e=e||"",Tt.log.debug(fn,e,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",yt)};xt.prototype.next=function(e,t){typeof e=="function"&&(t=e,e=this.name);var n=new xt({run:t,name:e,parent:this});return n.state=Me,n.type=this.type,n.successCallback=this.successCallback||null,n.failureCallback=this.failureCallback||null,this.subtasks.push(n),this};xt.prototype.parallel=function(e,t){return Tt.util.isArray(e)&&(t=e,e=this.name),this.next(e,function(n){var r=n;r.block(t.length);for(var i=function(l,u){Tt.task.start({type:l,run:function(c){t[u](c)},success:function(c){r.unblock()},failure:function(c){r.unblock()}})},s=0;s<t.length;s++){var a=e+"__parallel-"+n.id+"-"+s,o=s;i(a,o)}})};xt.prototype.stop=function(){this.state=$[this.state][Mr]};xt.prototype.start=function(){this.error=!1,this.state=$[this.state][yr],this.state===Me&&(this.start=new Date,this.run(this),mr(this,0))};xt.prototype.block=function(e){e=typeof e=="undefined"?1:e,this.blocks+=e,this.blocks>0&&(this.state=$[this.state][hn])};xt.prototype.unblock=function(e){return e=typeof e=="undefined"?1:e,this.blocks-=e,this.blocks===0&&this.state!==Pe&&(this.state=Me,mr(this,0)),this.blocks};xt.prototype.sleep=function(e){e=typeof e=="undefined"?0:e,this.state=$[this.state][dn];var t=this;this.timeoutId=setTimeout(function(){t.timeoutId=null,t.state=Me,mr(t,0)},e)};xt.prototype.wait=function(e){e.wait(this)};xt.prototype.wakeup=function(){this.state===Xe&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=Me,mr(this,0))};xt.prototype.cancel=function(){this.state=$[this.state][Kr],this.permitsNeeded=0,this.timeoutId!==null&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]};xt.prototype.fail=function(e){if(this.error=!0,Fa(this,!0),e)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,mr(e,0);else{if(this.parent!==null){for(var t=this.parent;t.parent!==null;)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,t=t.parent;Fa(t,!0)}this.failureCallback&&this.failureCallback(this)}};var py=function(e){e.error=!1,e.state=$[e.state][yr],setTimeout(function(){e.state===Me&&(e.swapTime=+new Date,e.run(e),mr(e,0))},0)},mr=function(e,t){var n=t>hy||+new Date-e.swapTime>dy,r=function(i){if(i++,e.state===Me)if(n&&(e.swapTime=+new Date),e.subtasks.length>0){var s=e.subtasks.shift();s.error=e.error,s.swapTime=e.swapTime,s.userData=e.userData,s.run(s),s.error||mr(s,i)}else Fa(e),e.error||e.parent!==null&&(e.parent.error=e.error,e.parent.swapTime=e.swapTime,e.parent.userData=e.userData,mr(e.parent,i))};n?setTimeout(r,0):r(t)},Fa=function(e,t){e.state=Pe,delete Va[e.id],e.parent===null&&(e.type in yt?yt[e.type].length===0?Tt.log.error(fn,"[%s][%s] task queue empty [%s]",e.id,e.name,e.type):yt[e.type][0]!==e?Tt.log.error(fn,"[%s][%s] task not first in queue [%s]",e.id,e.name,e.type):(yt[e.type].shift(),yt[e.type].length===0?delete yt[e.type]:yt[e.type][0].start()):Tt.log.error(fn,"[%s][%s] task queue missing [%s]",e.id,e.name,e.type),t||(e.error&&e.failureCallback?e.failureCallback(e):!e.error&&e.successCallback&&e.successCallback(e)))};Tt.task=Tt.task||{};Tt.task.start=function(e){var t=new xt({run:e.run,name:e.name||wu});t.type=e.type,t.successCallback=e.success||null,t.failureCallback=e.failure||null,t.type in yt?yt[e.type].push(t):(yt[t.type]=[t],py(t))};Tt.task.cancel=function(e){e in yt&&(yt[e]=[yt[e][0]])};Tt.task.createCondition=function(){var e={tasks:{}};return e.wait=function(t){t.id in e.tasks||(t.block(),e.tasks[t.id]=t)},e.notify=function(){var t=e.tasks;e.tasks={};for(var n in t)t[n].unblock()},e};var T1=ae;export{F as $,si as A,Nt as B,ai as C,X as D,Qn as E,sc as F,cf as G,qa as H,Ey as I,Ot as J,Ky as K,Fy as L,Vy as M,vy as N,wy as O,W as P,Py as Q,Uu as R,_e as S,Pu as T,Vu as U,Ou as V,ao as W,o1 as X,Ay as Y,Oy as Z,c1 as _,P as a,es as a$,M as a0,_y as a1,Yn as a2,Uy as a3,ky as a4,n1 as a5,f1 as a6,my as a7,As as a8,My as a9,s1 as aA,a1 as aB,io as aC,Ty as aD,S1 as aE,x1 as aF,so as aG,qy as aH,T1 as aI,C1 as aJ,p1 as aK,m1 as aL,$y as aM,xy as aN,yy as aO,ff as aP,Dy as aQ,Qy as aR,Yy as aS,Gy as aT,g1 as aU,v1 as aV,y1 as aW,Ha as aX,e1 as aY,t1 as aZ,E1 as a_,r1 as aa,i1 as ab,Qa as ac,Sy as ad,Cy as ae,Er as af,By as ag,_r as ah,ic as ai,u1 as aj,l1 as ak,Zy as al,Wy as am,jy as an,Hy as ao,Wu as ap,Ry as aq,d1 as ar,Ny as as,Ly as at,h1 as au,b1 as av,_1 as aw,zy as ax,Jy as ay,Xy as az,d as b,Yu as b0,Yi as b1,qr as c,k as d,Yt as e,pe as f,Qu as g,by as h,xe as i,Zi as j,zr as k,$i as l,ti as m,Jt as n,ri as o,Vt as p,Iy as q,tc as r,Ce as s,Ji as t,Jn as u,ls as v,uo as w,ii as x,ni as y,uc as z};